//>>built
require({cache:{"dijit/layout/AccordionContainer":function(){require({cache:{"url:dijit/layout/templates/AccordionButton.html":'<div data-dojo-attach-event=\'onclick:_onTitleClick\' class=\'dijitAccordionTitle\' role="presentation">\n\t<div data-dojo-attach-point=\'titleNode,focusNode\' data-dojo-attach-event=\'onkeypress:_onTitleKeyPress\'\n\t\t\tclass=\'dijitAccordionTitleFocus\' role="tab" aria-expanded="false"\n\t\t><span class=\'dijitInline dijitAccordionArrow\' role="presentation"></span\n\t\t><span class=\'arrowTextUp\' role="presentation">+</span\n\t\t><span class=\'arrowTextDown\' role="presentation">-</span\n\t\t><img src="${_blankGif}" alt="" class="dijitIcon" data-dojo-attach-point=\'iconNode\' style="vertical-align: middle" role="presentation"/>\n\t\t<span role="presentation" data-dojo-attach-point=\'titleTextNode\' class=\'dijitAccordionText\'></span>\n\t</div>\n</div>\n'}});
define("dijit/layout/AccordionContainer","require,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/_base/fx,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/topic,../focus,../_base/manager,dojo/ready,../_Widget,../_Container,../_TemplatedMixin,../_CssStateMixin,./StackContainer,./ContentPane,dojo/text!./templates/AccordionButton.html".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,o,n,z,q,t,v,A,s){var z=i("dijit.layout._AccordionButton",
[n,q,t],{templateString:s,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");e.set(this.titleTextNode,"id",a+"_title");this.focusNode.setAttribute("aria-labelledby",e.get(this.titleTextNode,
"id"));b.setSelectable(this.domNode,!1)},getTitleHeight:function(){return a.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0);u.focus(this.focusNode)},_onTitleKeyPress:function(a){return this.getParent()._onKeyPress(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a);this.focusNode.setAttribute("aria-expanded",a?"true":"false");this.focusNode.setAttribute("aria-selected",a?"true":"false");this.focusNode.setAttribute("tabIndex",
a?"0":"-1")}}),C=i("dijit.layout._AccordionInnerContainer",[n,t],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=h.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var a=this.contentWidget,g=m.isString(this.buttonWidget)?m.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=(new g({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir,iconClass:a.iconClass,
id:a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=h.place("<div class='dijitAccordionChildWrapper' style='display:none'>",this.domNode);h.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button;this._contentWidgetWatches=[this.contentWidget.watch("title",m.hitch(this,function(g,c,b){a.set("label",b)})),this.contentWidget.watch("tooltip",m.hitch(this,function(g,c,b){a.set("title",b)})),this.contentWidget.watch("iconClass",
m.hitch(this,function(g,c,b){a.set("iconClass",b)}))]},_setSelectedAttr:function(a){this._set("selected",a);this.button.set("selected",a);if(a&&(a=this.contentWidget,a.onSelected))a.onSelected()},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();j.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}}),
i=i("dijit.layout.AccordionContainer",v,{duration:r.defaultDuration,buttonWidget:z,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var g=this.selectedChildWidget;if(g){var c=g._wrapperWidget.domNode,b=a.getMarginExtents(c),
c=a.getPadBorderExtents(c),e=g._wrapperWidget.containerNode,q=a.getMarginExtents(e),e=a.getPadBorderExtents(e),h=this._contentBox,d=0;j.forEach(this.getChildren(),function(c){c!=g&&(d+=a.getMarginSize(c._wrapperWidget.domNode).h)});this._verticalSpace=h.h-d-b.h-c.h-q.h-e.h-g._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-b.w-c.w-q.w-e.w};g&&g.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=C({contentWidget:a,buttonWidget:this.buttonWidget,
id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir,parent:this});this.inherited(arguments)},addChild:function(a,g){if(this._started){var c=this.containerNode;if(g&&"number"==typeof g){var b=n.prototype.getChildren.call(this);if(b&&b.length>=g)c=b[g-1].domNode,g="after"}h.place(a.domNode,c,g);a._started||a.startup();this._setupChild(a);l.publish(this.id+"-addChild",a,g);this.layout();this.selectedChildWidget||this.selectChild(a)}else this.inherited(arguments)},removeChild:function(a){a._wrapperWidget&&
(h.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget);c.remove(a.domNode,"dijitHidden");this.inherited(arguments)},getChildren:function(){return j.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop();j.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()});this.inherited(arguments)},
_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none";this.inherited(arguments)},_transition:function(g,c,b){8>p("ie")&&(b=!1);this._animation&&(this._animation.stop(!0),delete this._animation);var e=this;if(g){g._wrapperWidget.set("selected",!0);var q=this._showChild(g);this.doLayout&&g.resize&&g.resize(this._containerContentBox)}c&&(c._wrapperWidget.set("selected",!1),
b||this._hideChild(c));if(b){var h=g._wrapperWidget.containerNode,o=c._wrapperWidget.containerNode,b=g._wrapperWidget.containerNode,g=a.getMarginExtents(b),b=a.getPadBorderExtents(b),n=g.h+b.h;o.style.height=e._verticalSpace-n+"px";this._animation=new d.Animation({node:h,duration:this.duration,curve:[1,this._verticalSpace-n-1],onAnimate:function(a){a=Math.floor(a);h.style.height=a+"px";o.style.height=e._verticalSpace-n-a+"px"},onEnd:function(){delete e._animation;h.style.height="auto";c._wrapperWidget.containerNode.style.display=
"none";o.style.height="auto";e._hideChild(c)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return q},_onKeyPress:function(a,c){if(!this.disabled&&!(a.altKey||!c&&!a.ctrlKey)){var b=a.charOrCode;if(c&&(b==g.LEFT_ARROW||b==g.UP_ARROW)||a.ctrlKey&&b==g.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),f.stop(a);else if(c&&(b==g.RIGHT_ARROW||b==g.DOWN_ARROW)||a.ctrlKey&&(b==g.PAGE_DOWN||b==g.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),f.stop(a)}}});p("dijit-legacy-requires")&&
o(0,function(){k(["dijit/layout/AccordionPane"])});i._InnerContainer=C;i._Button=z;return i})},"dijit/layout/StackContainer":function(){define("dijit/layout/StackContainer","dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/ready,dojo/topic,../registry,../_WidgetBase,./_LayoutWidget,dojo/i18n!../nls/common".split(","),function(k,j,i,f,d,b,e,c,h,a,g){d("dijit-legacy-requires")&&e(0,function(){require(["dijit/layout/StackController"])});i=i("dijit.layout.StackContainer",
g,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);f.add(this.domNode,"dijitLayoutContainer");this.containerNode.setAttribute("role","tabpanel")},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var a=this.getChildren();k.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=h.byId(j(this.id+"_selectedChild")):k.some(a,function(a){if(a.selected)this.selectedChildWidget=
a;return a.selected},this);var g=this.selectedChildWidget;if(!g&&a[0])g=this.selectedChildWidget=a[0],g.selected=!0;c.publish(this.id+"-startup",{children:a,selected:g});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);f.replace(a.domNode,"dijitHidden","dijitVisible");a.domNode.title=""},addChild:function(a,g){this.inherited(arguments);
this._started&&(c.publish(this.id+"-addChild",a,g),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){this.inherited(arguments);this._started&&c.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var g=this.getChildren();g.length&&this.selectChild(g[0])}this._started&&this.layout()}},selectChild:function(a,g){a=h.byId(a);if(this.selectedChildWidget!=a){var b=this._transition(a,
this.selectedChildWidget,g);this._set("selectedChildWidget",a);c.publish(this.id+"-selectChild",a);this.persist&&j(this.id+"_selectedChild",this.selectedChildWidget.id)}return b},_transition:function(a,g){g&&this._hideChild(g);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var g=this.getChildren(),c=k.indexOf(g,this.selectedChildWidget),c=c+(a?1:g.length-1);return g[c%g.length]},forward:function(){return this.selectChild(this._adjacent(!0),
!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyPress:function(a){c.publish(this.id+"-containerKeyPress",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var g=this.getChildren();a.isFirstChild=a==g[0];a.isLastChild=a==g[g.length-1];a._set("selected",!0);f.replace(a.domNode,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},
_hideChild:function(a){a._set("selected",!1);f.replace(a.domNode,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;k.forEach(this.getChildren(),function(g){a||this.removeChild(g);g.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});i.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",
showTitle:!0};b.extend(a,i.ChildWidgetProperties);return i})},"url:dijit/layout/templates/AccordionButton.html":'<div data-dojo-attach-event=\'onclick:_onTitleClick\' class=\'dijitAccordionTitle\' role="presentation">\n\t<div data-dojo-attach-point=\'titleNode,focusNode\' data-dojo-attach-event=\'onkeypress:_onTitleKeyPress\'\n\t\t\tclass=\'dijitAccordionTitleFocus\' role="tab" aria-expanded="false"\n\t\t><span class=\'dijitInline dijitAccordionArrow\' role="presentation"></span\n\t\t><span class=\'arrowTextUp\' role="presentation">+</span\n\t\t><span class=\'arrowTextDown\' role="presentation">-</span\n\t\t><img src="${_blankGif}" alt="" class="dijitIcon" data-dojo-attach-point=\'iconNode\' style="vertical-align: middle" role="presentation"/>\n\t\t<span role="presentation" data-dojo-attach-point=\'titleTextNode\' class=\'dijitAccordionText\'></span>\n\t</div>\n</div>\n',
"dojox/grid/EnhancedGrid":function(){define("dojox/grid/EnhancedGrid","dojo/_base/kernel,../main,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/sniff,dojo/dom,dojo/dom-geometry,./DataGrid,./DataSelection,./enhanced/_PluginManager,./enhanced/plugins/_SelectionPreserver,dojo/i18n!./enhanced/nls/EnhancedGrid".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p){k.experimental("dojox.grid.EnhancedGrid");k=i("dojox.grid.EnhancedGrid",h,{plugins:null,pluginMgr:null,_pluginMgrClass:g,postMixInProperties:function(){this._nls=
p;this.inherited(arguments)},postCreate:function(){this.pluginMgr=new this._pluginMgrClass(this);this.pluginMgr.preInit();this.inherited(arguments);this.pluginMgr.postInit()},plugin:function(a){return this.pluginMgr.getPlugin(a)},startup:function(){this.inherited(arguments);this.pluginMgr.startup()},createSelection:function(){this.selection=new j.grid.enhanced.DataSelection(this)},canSort:function(){return!0},doKeyEvent:function(a){try{var g=this.focus.focusView;g.content.decorateEvent(a);a.cell||
g.header.decorateEvent(a)}catch(c){}this.inherited(arguments)},doApplyCellEdit:function(a,g,c){c?this.inherited(arguments):this.invalidated[g]=!0},mixin:function(a,g){var c={},b;for(b in g)"_inherited"==b||"declaredClass"==b||"constructor"==b||g.privates&&g.privates[b]||(c[b]=g[b]);f.mixin(a,c)},_copyAttr:function(a,g){return!g?void 0:this.inherited(arguments)},_getHeaderHeight:function(){this.inherited(arguments);return c.getMarginBox(this.viewsHeaderNode).h},_fetch:function(a,g){if(this.items)return this.inherited(arguments);
a=a||0;if(this.store&&!this._pending_requests[a]){if(!this._isLoaded&&!this._isLoading)this._isLoading=!0,this.showMessage(this.loadingMessage);this._pending_requests[a]=!0;try{this._storeLayerFetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:g,onBegin:f.hitch(this,"_onFetchBegin"),onComplete:f.hitch(this,"_onFetchComplete"),onError:f.hitch(this,"_onFetchError")})}catch(c){this._onFetchError(c,{start:a,count:this.rowsPerPage})}}return 0},
_storeLayerFetch:function(a){this.store.fetch(a)},getCellByField:function(a){return d.filter(this.layout.cells,function(g){return g.field==a})[0]},onMouseUp:function(){},createView:function(){var a=this.inherited(arguments);if(b("mozilla")){var g=function(a){var g=a.toUpperCase();return function(a){return a.tagName!=g}},c=a.header.getCellX;a.header.getCellX=function(b){var h=c.call(a.header,b),d;d=g("th");for(var q=b.target;q&&d(q);q=q.parentNode);(d=q)&&d!==b.target&&e.isDescendant(b.target,d)&&
(h+=d.firstChild.offsetLeft);return h}}return a},destroy:function(){delete this._nls;this.pluginMgr.destroy();this.inherited(arguments)}});i("dojox.grid.enhanced.DataSelection",a,{constructor:function(a){if(a.keepSelection)this.preserver&&this.preserver.destroy(),this.preserver=new m(this)},_range:function(a,g){this.grid._selectingRange=!0;this.inherited(arguments);this.grid._selectingRange=!1;this.onChanged()},deselectAll:function(a){this.grid._selectingRange=!0;this.inherited(arguments);this.grid._selectingRange=
!1;this.onChanged()}});k.markupFactory=function(a,g,c,b){return j.grid._Grid.markupFactory(a,g,c,f.partial(h.cell_markupFactory,b))};k.registerPlugin=function(a,c){g.registerPlugin(a,c)};return k})},"dojox/grid/DataGrid":function(){define("dojox/grid/DataGrid","../main,dojo/_base/array,dojo/_base/lang,dojo/_base/json,dojo/_base/sniff,dojo/_base/declare,./_Grid,./DataSelection,dojo/_base/html".split(","),function(k,j,i,f,d,b,e,c,h){var a=b("dojox.grid.DataGrid",e,{store:null,query:null,queryOptions:null,
fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,keepSelection:!1,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},destroy:function(){this.selection.destroy();this.inherited(arguments)},createSelection:function(){this.selection=
new c(this)},get:function(a,c){if(c&&"_item"==this.field&&!this.fields)return c;if(c&&this.fields){var b=[],e=this.grid.store;j.forEach(this.fields,function(a){b=b.concat(e.getValues(c,a))});return b}return!c&&"string"===typeof a?this.inherited(arguments):!c?this.defaultValue:!this.field?this.value:"_item"==this.field?c:this.grid.store.getValue(c,this.field)},_checkUpdateStatus:function(){if(0<this.updateDelay){var a=!1;this._endUpdateDelay&&(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,
a=!0);this.updating||(this.beginUpdate(),a=!0);if(a){var c=this;this._endUpdateDelay=setTimeout(function(){delete c._endUpdateDelay;c.endUpdate()},this.updateDelay)}}},_onSet:function(a){this._checkUpdateStatus();a=this.getItemIndex(a);-1<a&&this.updateRow(a)},_createItem:function(a,c){var b=this._hasIdentity?this.store.getIdentity(a):f.toJson(this.query)+":idx:"+c+":sort:"+f.toJson(this.getSortProps());return this._by_idty[b]={idty:b,item:a}},_addItem:function(a,c,b){this._by_idx[c]=this._createItem(a,
c);b||this.updateRow(c)},_onNew:function(a){this._checkUpdateStatus();var c=this.get("rowCount");this._addingItem=!0;this.updateRowCount(c+1);this._addingItem=!1;this._addItem(a,c);this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();a=this._getItemIndex(a,!0);if(0<=a){this._pages=[];this._eop=this._bop=-1;var c=this._by_idx[a];this._by_idx.splice(a,1);delete this._by_idty[c.idty];this.updateRowCount(this.get("rowCount")-1);0===this.get("rowCount")&&this.showMessage(this.noDataMessage)}this.selection.isSelected(a)&&
(this.selection.deselect(a),this.selection.selected.splice(a,1))},_onRevert:function(){this._refresh()},setStore:function(a,c,b){this._requestsPending(0)||(this._setQuery(c,b),this._setStore(a),this._refresh(!0))},setQuery:function(a,c){this._requestsPending(0)||(this._setQuery(a,c),this._refresh(!0))},setItems:function(a){this.items=a;this._setStore(this.store);this._refresh(!0)},_setQuery:function(a,c){this.query=a;this.queryOptions=c||this.queryOptions},_setStore:function(a){this.store&&this._store_connects&&
j.forEach(this._store_connects,this.disconnect,this);if(this.store=a){var a=this.store.getFeatures(),c=[];this._canEdit=!!a["dojo.data.api.Write"]&&!!a["dojo.data.api.Identity"];this._hasIdentity=!!a["dojo.data.api.Identity"];a["dojo.data.api.Notification"]&&!this.items&&(c.push(this.connect(this.store,"onSet","_onSet")),c.push(this.connect(this.store,"onNew","_onNew")),c.push(this.connect(this.store,"onDelete","_onDelete")));this._canEdit&&c.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=
c}},_onFetchBegin:function(a,c){if(this.scroller){if(this.rowCount!=a)c.isRender?(this.scroller.init(a,this.keepRows,this.rowsPerPage),this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(a);a?this.showMessage():(this.views.render(),this._resize(),this.showMessage(this.noDataMessage),this.focus.initFocusView())}},_onFetchComplete:function(a,c){if(this.scroller){a&&0<a.length&&(j.forEach(a,function(a,
g){this._addItem(a,c.start+g,!0)},this),this.updateRows(c.start,a.length),c.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop),d("ie")&&h.setSelectable(this.domNode,this.selectable));delete this._lastScrollTop;if(!this._isLoaded)this._isLoading=!1,this._isLoaded=!0;this._pending_requests[c.start]=!1}},_onFetchError:function(a,c){delete this._lastScrollTop;if(!this._isLoaded)this._isLoading=!1,this._isLoaded=!0,this.showMessage(this.errorMessage);
this._pending_requests[c.start]=!1;this.onFetchError(a,c)},onFetchError:function(){},_fetch:function(a,c){a=a||0;if(this.store&&!this._pending_requests[a]){if(!this._isLoaded&&!this._isLoading)this._isLoading=!0,this.showMessage(this.loadingMessage);this._pending_requests[a]=!0;try{if(this.items){var b=this.items,e=this.store;this.rowsPerPage=b.length;var h={start:a,count:this.rowsPerPage,isRender:c};this._onFetchBegin(b.length,h);var d=0;j.forEach(b,function(a){e.isItemLoaded(a)||d++});if(0===d)this._onFetchComplete(b,
h);else{var o=function(){d--;0===d&&this._onFetchComplete(b,h)};j.forEach(b,function(a){e.isItemLoaded(a)||e.loadItem({item:a,onItem:o,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:c,onBegin:i.hitch(this,"_onFetchBegin"),onComplete:i.hitch(this,"_onFetchComplete"),onError:i.hitch(this,"_onFetchError")})}catch(n){this._onFetchError(n,{start:a,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);
this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=!1},getItem:function(a){var c=this._by_idx[a];return!c||c&&!c.item?(this._preparePage(a),null):c.item},getItemIndex:function(a){return this._getItemIndex(a,!1)},_getItemIndex:function(a,c){if(!c&&!this.store.isItem(a))return-1;for(var b=this._hasIdentity?this.store.getIdentity(a):null,e=0,h=this._by_idx.length;e<h;e++){var d=this._by_idx[e];if(d&&(b&&d.idty==b||d.item===a))return e}return-1},filter:function(a,
c){this.query=a;c&&this._clearData();this._fetch()},_getItemAttr:function(a,c){var b=this.getItem(a);return!b?this.fetchText:this.store.getValue(b,c)},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*
a:a},_preparePage:function(a){if((a<this._bop||a>=this._eop)&&!this._addingItem)a=this._rowToPage(a),this._needPage(a),this._bop=a*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"))},_needPage:function(a){this._pages[a]||(this._pages[a]=!0,this._requestPage(a))},_requestPage:function(a){a=this._pageToRow(a);0<Math.min(this.rowsPerPage,this.get("rowCount")-a)&&(this._requests++,this._requestsPending(a)||setTimeout(i.hitch(this,"_fetch",a,!1),1))},getCellName:function(a){return a.field},
_refresh:function(a){this._clearData();this._fetch(0,a)},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var c=a.sortDesc,b=!(0<this.sortInfo);return[{attribute:a.field,descending:"undefined"==typeof c?b:b?!c:c}]}return this.sortFields?this.sortFields:null},styleRowState:function(a){if(this.store&&this.store.getState){for(var c=this.store.getState(a.index),
b="",e=0,h=["inflight","error","inserting"],d;d=h[e];e++)if(c[d]){b=" dojoxGridRow-"+d;break}a.customClasses+=b}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},canEdit:function(){return this._canEdit},_copyAttr:function(a,c){return this.store.getValue(this.getItem(a),c)},doStartEdit:function(a,c){this._cache[c]||(this._cache[c]=this._copyAttr(c,a.field));this.onStartEdit(a,c)},doApplyCellEdit:function(a,c,b){this.store.fetchItemByIdentity({identity:this._by_idx[c].idty,onItem:i.hitch(this,
function(e){var h=this.store.getValue(e,b);"number"==typeof h?a=isNaN(a)?a:parseFloat(a):"boolean"==typeof h?a="true"==a?!0:"false"==a?!1:a:h instanceof Date&&(h=new Date(a),a=isNaN(h.getTime())?a:h);this.store.setValue(e,b,a);this.onApplyCellEdit(a,c,b)})})},doCancelEdit:function(a){this._cache[a]&&(this.updateRow(a),delete this._cache[a]);this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=
i.hitch(this,function(a){a.length&&(j.forEach(a,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):a(this.selection.getSelected())}}});a.cell_markupFactory=function(a,c,b){var e=i.trim(h.attr(c,"field")||"");if(e)b.field=e;b.field=b.field||b.name;if(e=i.trim(h.attr(c,"fields")||""))b.fields=e.split(",");a&&a(c,b)};a.markupFactory=function(c,b,h,d){return e.markupFactory(c,b,h,i.partial(a.cell_markupFactory,
d))};return a})},"dojox/grid/_Grid":function(){require({cache:{"url:dojox/grid/resources/_Grid.html":'<div hidefocus="hidefocus" role="grid" dojoAttachEvent="onmouseout:_mouseOut">\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" role="presentation"></div>\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" role="presentation"></div>\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\n</div>\n'}});
define("dojox/grid/_Grid","dojo/_base/kernel,../main,dojo/_base/declare,./_Events,./_Scroller,./_Layout,./_View,./_ViewManager,./_RowManager,./_FocusManager,./_EditManager,./Selection,./_RowSelector,./util,dijit/_Widget,dijit/_TemplatedMixin,dijit/CheckedMenuItem,dojo/text!./resources/_Grid.html,dojo/string,dojo/_base/array,dojo/_base/lang,dojo/_base/sniff,dojox/html/metrics,dojo/_base/html,dojo/query,dojo/dnd/common,dojo/i18n!dijit/nls/loading".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,
o,n,z,q,t,v,A,s,C){if(!k.isCopyKey)k.isCopyKey=k.dnd.getCopyKeyState;i=i("dojox.grid._Grid",[u,r,f],{templateString:n,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:!0,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:!1,selectionMode:"extended",rowSelector:"",columnReordering:!1,headerMenu:null,placeholderLabel:"GridColumns",selectable:!1,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",
errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:!0,formatterScope:null,editable:!1,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:b,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex"))this.domNode.tabIndex="0";this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,
"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");A.initOnFontResize();this.connect(A,"onFontResize","textSizeChanged");l.funnelEvents(this.domNode,this,"doKeyEvent",l.keyEvents);"none"!=this.selectionMode&&this.domNode.setAttribute("aria-multiselectable","single"==this.selectionMode?"false":"true");s.addClass(this.domNode,this.classTag);this.isLeftToRight()||s.addClass(this.domNode,this.classTag+"Rtl");0<this.rowHeight&&s.addClass(this.viewsNode,this.classTag+
"FixedRowHeight")},postMixInProperties:function(){this.inherited(arguments);var a=k.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=z.substitute(this.loadingMessage,a);this.errorMessage=z.substitute(this.errorMessage,a);if(this.srcNodeRef&&this.srcNodeRef.style.height)this.height=this.srcNodeRef.style.height;this._setAutoHeightAttr(this.autoHeight,!0);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);
this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth)this.domNode.style.width=this.initialWidth;this.domNode&&!this.editable&&s.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.scroller&&(this.scroller.destroy(),delete this.scroller);this.edit.destroy();delete this.edit;this.views.destroyViews();this.focus&&(this.focus.destroy(),delete this.focus);this.headerMenu&&
this._placeholders.length&&(q.forEach(this._placeholders,function(a){a.unReplace(!0)}),this.headerMenu.unBindDomNode(this.viewsHeaderNode));this.inherited(arguments)},_setAutoHeightAttr:function(a,c){"string"==typeof a&&(a=!a||"false"==a?!1:"true"==a?!0:window.parseInt(a,10));"number"==typeof a&&(isNaN(a)&&(a=!1),0>a?a=!0:0===a&&(a=!1));this.autoHeight=a;this._autoHeight="boolean"==typeof a?a:"number"==typeof a?a>=this.get("rowCount"):!1;this._started&&!c&&this.render()},_getRowCountAttr:function(){return this.updating&&
this.invalidated&&void 0!=this.invalidated.rowCount?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new h(this);this.focus=new a(this);this.edit=new g(this)},createSelection:function(){this.selection=new m(this)},createScroller:function(){this.scroller=new d;this.scroller.grid=this;this.scroller.renderRow=t.hitch(this,"renderRow");this.scroller.removeRow=t.hitch(this,"rowRemoved")},createLayout:function(){this.layout=
new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.update()},onResizeColumn:function(){},createViews:function(){this.views=new c(this);this.views.createView=t.hitch(this,"createView")},createView:function(a,c){var b=new (t.getObject(a))({grid:this,index:c});this.viewsNode.appendChild(b.domNode);this.viewsHeaderNode.appendChild(b.headerNode);this.views.addView(b);s.attr(this.domNode,"align",this.isLeftToRight()?"left":"right");return b},
buildViews:function(){for(var a=0,c;c=this.layout.structure[a];a++)this.createView(c.type||j._scopeName+".grid._View",a).setStructure(c);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(a){a&&t.isString(a)&&(k.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0"),a=t.getObject(a));this.structure=a;if(!a)if(this.layout.structure)a=this.layout.structure;else return;this.views.destroyViews();this.focus.focusView=
null;a!==this.layout.structure&&this.layout.setStructure(a);this._structureChanged()},setStructure:function(a){k.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(a)},getColumnTogglingItems:function(){var a,c=[];a=q.map(this.layout.cells,function(a){if(!a.menuItems)a.menuItems=[];var b=this,e=new o({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(a){if(b.layout.setColumnVisibility(this._gridCell.index,a)){var c=
this._gridCell.menuItems;1<c.length&&q.forEach(c,function(c){c!==this&&c.setAttribute("checked",a)},this);a=q.filter(b.layout.cells,function(a){1<a.menuItems.length?q.forEach(a.menuItems,"item.set('disabled', false);"):a.menuItems[0].set("disabled",!1);return!a.hidden});1==a.length&&q.forEach(a[0].menuItems,"item.set('disabled', true);")}},destroy:function(){this._gridCell.menuItems.splice(q.indexOf(this._gridCell.menuItems,this),1);delete this._gridCell;o.prototype.destroy.apply(this,arguments)}});
a.menuItems.push(e);a.hidden||c.push(e);return e},this);1==c.length&&c[0].set("disabled",!0);return a},_setHeaderMenuAttr:function(a){if(this._placeholders&&this._placeholders.length)q.forEach(this._placeholders,function(a){a.unReplace(!0)}),this._placeholders=[];this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode);if(this.headerMenu=a)if(this.headerMenu.bindDomNode(this.viewsHeaderNode),this.headerMenu.getPlaceholders)this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)},
setHeaderMenu:function(a){k.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(a)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&q.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(!0);a.replace(this.getColumnTogglingItems())},this)},_fetch:function(){this.setScrollTop(0)},getItem:function(){return null},showMessage:function(a){a?(this.messagesNode.innerHTML=a,this.messagesNode.style.display=
""):(this.messagesNode.innerHTML="",this.messagesNode.style.display="none")},_structureChanged:function(){this.buildViews();this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,c){this._pendingChangeSize=a;this._pendingResultSize=c;this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||s._getPadBorderExtents(this.domNode)},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,c="none"==a.display?
0:this.views.measureHeader();a.height=c+"px";this.views.normalizeHeaderNodeHeight();return c},_resize:function(a,c){a=a||this._pendingChangeSize;c=c||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(this.domNode){var b=this.domNode.parentNode;if(b&&!(1!=b.nodeType||!this.hasLayout()||"hidden"==b.style.visibility||"none"==b.style.display)){var e=this._getPadBorder(),g=void 0,h;if(this._autoHeight)this.domNode.style.height="auto";else if("number"==typeof this.autoHeight)h=
g=this._getHeaderHeight(),h+=this.scroller.averageRowHeight*this.autoHeight,this.domNode.style.height=h+"px";else if(this.domNode.clientHeight<=e.h)b==document.body?this.domNode.style.height=this.defaultHeight:this.height?this.domNode.style.height=this.height:this.fitTo="parent";c&&(a=c);if(!this._autoHeight&&a)s.marginBox(this.domNode,a),this.height=this.domNode.style.height,delete this.fitTo;else if("parent"==this.fitTo)h=this._parentContentBoxHeight=0<this._parentContentBoxHeight?this._parentContentBoxHeight:
s._getContentBox(b).h,this.domNode.style.height=Math.max(0,h)+"px";b=q.some(this.views.views,function(a){return a.flexCells});!this._autoHeight&&0===(h||s._getContentBox(this.domNode).h)?this.viewsHeaderNode.style.display="none":(this.viewsHeaderNode.style.display="block",!b&&void 0===g&&(g=this._getHeaderHeight()));b&&(g=void 0);this.adaptWidth();this.adaptHeight(g);this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,c=this.views.arrange(1,a?0:this.domNode.clientWidth||
this.domNode.offsetWidth-this._getPadBorder().w);this.views.onEach("adaptWidth");if(a)this.domNode.style.width=c+"px"},adaptHeight:function(a){var a=void 0===a?this._getHeaderHeight():a,c=this._autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,c]);this.views.onEach("adaptHeight");if(!this._autoHeight){var b=0,e=0,g=q.filter(this.views.views,function(a){(a=a.hasHScrollbar())?b++:e++;return!a});0<b&&0<e&&q.forEach(g,function(a){a.adaptHeight(!0)})}this.scroller.windowHeight=
!0===this.autoHeight||-1!=c||"number"==typeof this.autoHeight&&this.autoHeight>=this.get("rowCount")?c:Math.max(this.domNode.clientHeight-a,0)},startup:function(){this._started||(this.inherited(arguments),this.autoRender&&this.render())},render:function(){if(this.domNode&&this._started)this.hasLayout()?(this.update=this.defaultUpdate,this._render()):this.scroller.init(0,this.keepRows,this.rowsPerPage)},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();
this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();s.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight)this.viewsNode.style.height=Math.max(this.views.measureContent())+"px"},renderRow:function(a,c){this.views.renderRow(a,c,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},
invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=[];this.updating=!0},endUpdate:function(){this.updating=!1;var a=this.invalidated,c;if(a.all)this.update();else if(void 0!=a.rowCount)this.updateRowCount(a.rowCount);else for(c in a)this.updateRow(Number(c));this.invalidated=[]},defaultUpdate:function(){if(this.domNode)this.updating?this.invalidated.all=!0:(this.lastScrollTop=this.scrollTop,this.prerender(),this.scroller.invalidateNodes(),this.setScrollTop(this.lastScrollTop),this.postrender())},
update:function(){this.render()},updateRow:function(a){a=Number(a);this.updating?this.invalidated[a]=!0:(this.views.updateRow(a),this.scroller.rowHeightChanged(a))},updateRows:function(a,c){var a=Number(a),c=Number(c),b;if(this.updating)for(b=0;b<c;b++)this.invalidated[b+a]=!0;else{for(b=0;b<c;b++)this.views.updateRow(b+a,this._skipRowRenormalize);this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){this.updating?this.invalidated.rowCount=a:(this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,
!0),this.layout.cells.length&&this.scroller.updateRowCount(a),this._resize(),this.layout.cells.length&&this.setScrollTop(this.scrollTop))},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(this.focus.focusView&&!(this.focus.focusView instanceof p))return this.focus.focusView.rowNodes[a];for(var c=0,b;b=this.views.views[c];c++)if(!(b instanceof p))return b.rowNodes[a];return null},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},
fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:v("ie")?100:50,scrollTo:function(a){if(this.fastScroll){var c=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(c>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=!0;this.scrollTop=a;this.views.setScrollTop(a);this._pendingScroll&&window.clearTimeout(this._pendingScroll);var b=this;this._pendingScroll=window.setTimeout(function(){delete b._pendingScroll;b.finishScrollJob()},200)}else this.setScrollTop(a)}else this.setScrollTop(a)},
finishScrollJob:function(){this.delayScroll=!1;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,c){c&&this.rows.styleRowNode(a,c)},_mouseOut:function(){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,c){this.getCell(a).unitWidth=c},getCellName:function(a){return"Cell "+a.index},canSort:function(){},
sort:function(){},getSortAsc:function(a){a=void 0==a?this.sortInfo:a;return Boolean(0<a)},getSortIndex:function(a){a=void 0==a?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,c){var b=a+1;void 0!=c?b*=c?1:-1:this.getSortIndex()==a&&(b=-this.sortInfo);this.setSortInfo(b)},setSortInfo:function(a){if(this.canSort(a))this.sortInfo=a,this.sort(),this.update()},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,c){return a in this?this[a](c):!1},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,
a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode)this.onCellClick(a);else this.onRowClick(a)},dodblclick:function(a){if(a.cellNode)this.onCellDblClick(a);else this.onRowDblClick(a)},docontextmenu:function(a){if(a.cellNode)this.onCellContextMenu(a);
else this.onRowContextMenu(a)},doheaderclick:function(a){if(a.cellNode)this.onHeaderCellClick(a);else this.onHeaderClick(a)},doheaderdblclick:function(a){if(a.cellNode)this.onHeaderCellDblClick(a);else this.onHeaderDblClick(a)},doheadercontextmenu:function(a){if(a.cellNode)this.onHeaderCellContextMenu(a);else this.onHeaderContextMenu(a)},doStartEdit:function(a,c){this.onStartEdit(a,c)},doApplyCellEdit:function(a,c,b){this.onApplyCellEdit(a,c,b)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},
addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));this.selection.clear()}});i.markupFactory=function(a,c,b,e){var g=function(a){a=s.attr(a,"width")||"auto";"auto"!=a&&"em"!=a.slice(-2)&&"%"!=a.slice(-1)&&(a=parseInt(a,10)+"px");return a};if(!a.structure&&"table"==c.nodeName.toLowerCase())a.structure=C("> colgroup",c).map(function(a){var c=
s.attr(a,"span"),c={noscroll:"true"==s.attr(a,"noscroll")?!0:!1,__span:c?parseInt(c,10):1,cells:[]};if(s.hasAttr(a,"width"))c.width=g(a);return c}),a.structure.length||a.structure.push({__span:Infinity,cells:[]}),C("thead > tr",c).forEach(function(c,b){var q=0,h=0,d,n=null;C("> th",c).map(function(c){n?q>=d+n.__span&&(h++,d+=n.__span,n=a.structure[h]):(d=0,n=a.structure[0]);var o={name:t.trim(s.attr(c,"name")||c.innerHTML),colSpan:parseInt(s.attr(c,"colspan")||1,10),type:t.trim(s.attr(c,"cellType")||
""),id:t.trim(s.attr(c,"id")||"")};q+=o.colSpan;var B=s.attr(c,"rowspan");if(B)o.rowSpan=B;if(s.hasAttr(c,"width"))o.width=g(c);if(s.hasAttr(c,"relWidth"))o.relWidth=window.parseInt(s.attr(c,"relWidth"),10);if(s.hasAttr(c,"hidden"))o.hidden="true"==s.attr(c,"hidden")||!0===s.attr(c,"hidden");e&&e(c,o);o.type=o.type?t.getObject(o.type):j.grid.cells.Cell;o.type&&o.type.markupFactory&&o.type.markupFactory(c,o);n.cells[b]||(n.cells[b]=[]);n.cells[b].push(o)})});return new b(a,c)};return i})},"dojox/grid/_Events":function(){define("dojox/grid/_Events",
["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(k,j,i,f,d){return i("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(b){this.dispatchKeyEvent(b)},onContentEvent:function(b){this.dispatchContentEvent(b)},onHeaderEvent:function(b){this.dispatchHeaderEvent(b)},onStyleRow:function(b){b.customClasses+=(b.odd?" dojoxGridRowOdd":"")+(b.selected?" dojoxGridRowSelected":"")+(b.over?" dojoxGridRowOver":"");this.focus.styleRow(b);
this.edit.styleRow(b)},onKeyDown:function(b){if(!b.altKey&&!b.metaKey){var e;switch(b.keyCode){case k.ESCAPE:this.edit.cancel();break;case k.ENTER:if(!this.edit.isEditing()){e=this.focus.getHeaderIndex();if(0<=e){this.setSortIndex(e);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(b),b.shiftKey);f.stop(b)}b.shiftKey||(e=this.edit.isEditing(),this.edit.apply(),e||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex));this.edit.isEditing()||((this.focus.focusView||this.views.views[0]).content.decorateEvent(b),
this.onRowClick(b),f.stop(b));break;case k.SPACE:if(!this.edit.isEditing()){e=this.focus.getHeaderIndex();if(0<=e){this.setSortIndex(e);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(b),b.shiftKey);f.stop(b)}break;case k.TAB:this.focus[b.shiftKey?"previousKey":"nextKey"](b);break;case k.LEFT_ARROW:case k.RIGHT_ARROW:if(!this.edit.isEditing()){var c=b.keyCode;f.stop(b);e=this.focus.getHeaderIndex();0<=e&&b.shiftKey&&b.ctrlKey?this.focus.colSizeAdjust(b,e,5*(c==k.LEFT_ARROW?
-1:1)):(b=c==k.LEFT_ARROW?1:-1,this.isLeftToRight()&&(b*=-1),this.focus.move(0,b))}break;case k.UP_ARROW:!this.edit.isEditing()&&0!==this.focus.rowIndex&&(f.stop(b),this.focus.move(-1,0));break;case k.DOWN_ARROW:!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount&&(f.stop(b),this.focus.move(1,0));break;case k.PAGE_UP:!this.edit.isEditing()&&0!==this.focus.rowIndex&&(f.stop(b),this.focus.rowIndex!=this.scroller.firstVisibleRow+1?this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,
0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1)),this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)));break;case k.PAGE_DOWN:!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount&&(f.stop(b),this.focus.rowIndex!=this.scroller.lastVisibleRow-1?this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1)),this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-
1,0)))}}},onMouseOver:function(b){-1==b.rowIndex?this.onHeaderCellMouseOver(b):this.onCellMouseOver(b)},onMouseOut:function(b){-1==b.rowIndex?this.onHeaderCellMouseOut(b):this.onCellMouseOut(b)},onMouseDown:function(b){-1==b.rowIndex?this.onHeaderCellMouseDown(b):this.onCellMouseDown(b)},onMouseOverRow:function(b){this.rows.isOver(b.rowIndex)||(this.rows.setOverRow(b.rowIndex),-1==b.rowIndex?this.onHeaderMouseOver(b):this.onRowMouseOver(b))},onMouseOutRow:function(b){if(this.rows.isOver(-1))this.onHeaderMouseOut(b);
else this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(b))},onMouseDownRow:function(b){if(-1!=b.rowIndex)this.onRowMouseDown(b)},onCellMouseOver:function(b){b.cellNode&&j.add(b.cellNode,this.cellOverClass)},onCellMouseOut:function(b){b.cellNode&&j.remove(b.cellNode,this.cellOverClass)},onCellMouseDown:function(){},onCellClick:function(b){this._click[0]=this._click[1];this._click[1]=b;this.edit.isEditCell(b.rowIndex,b.cellIndex)||this.focus.setFocusCell(b.cell,b.rowIndex);1<this._click.length&&
null==this._click[0]&&this._click.shift();this.onRowClick(b)},onCellDblClick:function(b){var e;e=1<this._click.length&&d("ie")?this._click[1]:1<this._click.length&&this._click[0].rowIndex!=this._click[1].rowIndex?this._click[0]:b;this.focus.setFocusCell(e.cell,e.rowIndex);this.onRowClick(e);this.edit.setEditCell(e.cell,e.rowIndex);this.onRowDblClick(b)},onCellContextMenu:function(b){this.onRowContextMenu(b)},onCellFocus:function(b,e){this.edit.cellFocus(b,e)},onRowClick:function(b){this.edit.rowClick(b);
this.selection.clickSelectEvent(b)},onRowDblClick:function(){},onRowMouseOver:function(){},onRowMouseOut:function(){},onRowMouseDown:function(){},onRowContextMenu:function(b){f.stop(b)},onHeaderMouseOver:function(){},onHeaderMouseOut:function(){},onHeaderCellMouseOver:function(b){b.cellNode&&j.add(b.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(b){b.cellNode&&j.remove(b.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(){},onHeaderClick:function(){},onHeaderCellClick:function(b){this.setSortIndex(b.cell.index);
this.onHeaderClick(b)},onHeaderDblClick:function(){},onHeaderCellDblClick:function(b){this.onHeaderDblClick(b)},onHeaderCellContextMenu:function(b){this.onHeaderContextMenu(b)},onHeaderContextMenu:function(b){this.headerMenu||f.stop(b)},onStartEdit:function(){},onApplyCellEdit:function(){},onCancelEdit:function(){},onApplyEdit:function(){},onCanSelect:function(){return!0},onCanDeselect:function(){return!0},onSelected:function(b){this.updateRowStyles(b)},onDeselected:function(b){this.updateRowStyles(b)},
onSelectionChanged:function(){}})})},"dojox/grid/_Scroller":function(){define("dojox/grid/_Scroller",["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(k,j,i,f,d){var b=function(c){c&&dojo.forEach(k.toArray(),function(b){b.domNode&&d.isDescendant(b.domNode,c,!0)&&b.destroy()})},e=function(c,b){for(var a=[],e=0,f;f=c.childNodes[e];){e++;var p=d.byId(f);(p&&p.tagName?p.tagName.toLowerCase():"")==b&&a.push(f)}return a};return j("dojox.grid._Scroller",null,{constructor:function(c){this.setContentNodes(c);
this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(c,b,a){switch(arguments.length){case 3:this.rowsPerPage=a;case 2:this.keepRows=b;case 1:this.rowCount=c}this.defaultPageHeight=(0<this.grid.rowHeight?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage;this.pageCount=
this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode)this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=i.hitch(this,"onscroll")},_getPageCount:function(c,b){return c?Math.ceil(c/b)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(c){this.keepRows=c;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/
this.rowsPerPage),2)},setContentNodes:function(c){this.colCount=(this.contentNodes=c)?this.contentNodes.length:0;this.pageNodes=[];for(c=0;c<this.colCount;c++)this.pageNodes[c]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=!0;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize();this._invalidating=!1},updateRowCount:function(c){this.invalidateNodes();
this.rowCount=c;c=this.pageCount;if(0===c)this.height=1;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<c)for(c-=1;c>=this.pageCount;c--)this.height-=this.getPageHeight(c),delete this.pageHeights[c];else this.pageCount>c&&(this.height+=this.defaultPageHeight*(this.pageCount-c-1)+this.calcLastPageHeight());this.resize()},pageExists:function(c){return Boolean(this.getDefaultPageNode(c))},measurePage:function(c){return this.grid.rowHeight?((c+1)*this.rowsPerPage>this.rowCount?
this.rowCount-c*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight:(c=this.getDefaultPageNode(c))&&c.innerHTML?c.offsetHeight:void 0},positionPage:function(c,b){for(var a=0;a<this.colCount;a++)this.pageNodes[a][c].style.top=b+"px"},repositionPages:function(c){for(var b=this.getDefaultNodes(),a=0,e=0;e<this.stack.length;e++)a=Math.max(this.stack[e],a);for(var d=(e=b[c])?this.getPageNodePosition(e)+this.getPageHeight(c):0,c=c+1;c<=a;c++){if(e=b[c]){if(this.getPageNodePosition(e)==d)break;this.positionPage(c,
d)}d+=this.getPageHeight(c)}},installPage:function(c){for(var b=0;b<this.colCount;b++)this.contentNodes[b].appendChild(this.pageNodes[b][c])},preparePage:function(c,b){for(var a=b?this.popPage():null,e=0;e<this.colCount;e++){var d=this.pageNodes[e],f=null===a?this.createPageNode():this.invalidatePageNode(a,d);f.pageIndex=c;d[c]=f}},renderPage:function(c){var b=[],a;for(a=0;a<this.colCount;a++)b[a]=this.pageNodes[a][c];for(a=0,c*=this.rowsPerPage;a<this.rowsPerPage&&c<this.rowCount;a++,c++)this.renderRow(c,
b)},removePage:function(c){for(var b=0,c=c*this.rowsPerPage;b<this.rowsPerPage;b++,c++)this.removeRow(c)},destroyPage:function(c){for(var b=0;b<this.colCount;b++){var a=this.invalidatePageNode(c,this.pageNodes[b]);a&&d.destroy(a)}},pacify:function(){},pacifying:!1,pacifyTicks:200,setPacifying:function(c){if(this.pacifying!=c)this.pacifying=c,this.pacify(this.pacifying)},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var c=(new Date).getTime()-this.startPacifyTicks>
this.pacifyTicks;this.setPacifying(!0);this.startPacify();return c},endPacify:function(){this.setPacifying(!1)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;for(var c=0;c<this.colCount;c++)f.setStyleHeightPx(this.contentNodes[c],Math.max(1,this.height));c=!this._invalidating;if(!c){var b=this.grid.get("autoHeight");"number"==typeof b&&b<=Math.min(this.rowsPerPage,this.rowCount)&&(c=!0)}c&&this.needPage(this.page,this.pageTop);c=this.page<this.pageCount-
1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage;b=this.getPageHeight(this.page);this.averageRowHeight=0<b&&0<c?b/c:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var c=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[this.pageCount-1]=c},updateContentHeight:function(c){this.height+=c;this.resize()},updatePageHeight:function(c,b,a){if(this.pageExists(c)){var e=this.getPageHeight(c),d=this.measurePage(c);void 0===d&&(d=
e);this.pageHeights[c]=d;if(e!=d){this.updateContentHeight(d-e);var f=this.grid.get("autoHeight");"number"==typeof f&&f>this.rowCount||!0===f&&!b?a?(b=this.grid.viewsNode.style,b.height=parseInt(b.height)+d-e+"px",this.repositionPages(c)):this.grid.sizeChange():this.repositionPages(c)}return d}return 0},rowHeightChanged:function(c,b){this.updatePageHeight(Math.floor(c/this.rowsPerPage),!1,b)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var c=
document.createElement("div");d.attr(c,"role","presentation");c.style.position="absolute";c.style[this.grid.isLeftToRight()?"left":"right"]="0";return c},getPageHeight:function(c){c=this.pageHeights[c];return void 0!==c?c:this.defaultPageHeight},pushPage:function(c){return this.stack.push(c)},popPage:function(){return this.stack.shift()},findPage:function(c){for(var b=0,a=0,e=0;b<this.pageCount&&!(e=this.getPageHeight(b),a+e>=c);b++,a+=e);this.page=b;this.pageTop=a},buildPage:function(c,b,a){this.preparePage(c,
b);this.positionPage(c,a);this.installPage(c);this.renderPage(c);this.pushPage(c)},needPage:function(c,b){var a=this.getPageHeight(c);this.pageExists(c)?this.positionPage(c,b):(this.buildPage(c,!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,b),a=this.updatePageHeight(c,!0));return a},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(c){this.grid.scrollTop=c;if(this.colCount){this.startPacify();this.findPage(c);for(var b=this.height,a=this.getScrollBottom(c),
e=this.page,d=this.pageTop;e<this.pageCount&&(0>a||d<a);e++)d+=this.needPage(e,d);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,c);this.lastVisibleRow=this.getLastVisibleRow(e-1,d,a);b!=this.height&&this.repositionPages(e-1);this.endPacify()}},getScrollBottom:function(c){return 0<=this.windowHeight?c+this.windowHeight:-1},processNodeEvent:function(c,b){for(var a=c.target;a&&a!=b&&a.parentNode&&a.parentNode.parentNode!=b;)a=a.parentNode;if(!a||!a.parentNode||a.parentNode.parentNode!=
b)return!1;c.topRowIndex=a.parentNode.pageIndex*this.rowsPerPage;var e=c.topRowIndex,d;a:{d=0;for(var f,l=a.parentNode;f=l.childNodes[d++];)if(f==a){d-=1;break a}d=-1}c.rowIndex=e+d;c.rowTarget=a;return!0},processEvent:function(c){return this.processNodeEvent(c,this.contentNode)},renderRow:function(){},removeRow:function(){},getDefaultPageNode:function(c){return this.getDefaultNodes()[c]},positionPageNode:function(){},getPageNodePosition:function(c){return c.offsetTop},invalidatePageNode:function(c,
e){var a=e[c];if(a)delete e[c],this.removePage(c,a),b(a),a.innerHTML="";return a},getPageRow:function(c){return c*this.rowsPerPage},getLastPageRow:function(c){return Math.min(this.rowCount,this.getPageRow(c+1))-1},getFirstVisibleRow:function(c,b,a){if(!this.pageExists(c))return 0;for(var g=this.getPageRow(c),d=this.getDefaultNodes(),c=e(d[c],"div"),d=0,f=c.length;d<f&&b<a;d++,g++)b+=c[d].offsetHeight;return g?g-1:g},getLastVisibleRow:function(c,b,a){if(!this.pageExists(c))return 0;for(var g=this.getDefaultNodes(),
d=this.getLastPageRow(c),c=e(g[c],"div"),g=c.length-1;0<=g&&b>a;g--,d--)b-=c[g].offsetHeight;return d+1},findTopRow:function(c){for(var b=this.getDefaultNodes(),b=e(b[this.page],"div"),a=0,g=b.length,d=this.pageTop,f;a<g;a++)if(f=b[a].offsetHeight,d+=f,d>=c)return this.offset=f-(d-c),a+this.page*this.rowsPerPage;return-1},findScrollTop:function(c){var b=Math.floor(c/this.rowsPerPage),a=0,g;for(g=0;g<b;g++)a+=this.getPageHeight(g);this.pageTop=a;this.page=b;this.needPage(b,this.pageTop);g=this.getDefaultNodes();
var d=e(g[b],"div"),b=c-this.rowsPerPage*b;for(g=0,c=d.length;g<c&&g<b;g++)a+=d[g].offsetHeight;return a},dummy:0})})},"dojox/grid/util":function(){define("dojox/grid/util",["../main","dojo/_base/lang","dojo/dom"],function(k,j,i){var f=j.getObject("grid.util",!0,k);f.na="...";f.rowIndexTag="gridRowIndex";f.gridViewTag="gridView";f.fire=function(d,b,e){var c=d&&b&&d[b];return c&&(e?c.apply(d,e):d[b]())};f.setStyleHeightPx=function(d,b){if(0<=b){var e=d.style,c=b+"px";d&&e.height!=c&&(e.height=c)}};
f.mouseEvents="mouseover,mouseout,mousedown,mouseup,click,dblclick,contextmenu".split(",");f.keyEvents=["keyup","keydown","keypress"];f.funnelEvents=function(d,b,e,c){for(var c=c?c:f.mouseEvents.concat(f.keyEvents),h=0,a=c.length;h<a;h++)b.connect(d,"on"+c[h],e)};f.removeNode=function(d){(d=i.byId(d))&&d.parentNode&&d.parentNode.removeChild(d);return d};f.arrayCompare=function(d,b){for(var e=0,c=d.length;e<c;e++)if(d[e]!=b[e])return!1;return d.length==b.length};f.arrayInsert=function(d,b,e){d.length<=
b?d[b]=e:d.splice(b,0,e)};f.arrayRemove=function(d,b){d.splice(b,1)};f.arraySwap=function(d,b,e){var c=d[b];d[b]=d[e];d[e]=c};return f})},"dojox/grid/_Layout":function(){define("dojox/grid/_Layout","dojo/_base/kernel,../main,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/dom-geometry,./cells,./_RowSelector".split(","),function(k,j,i,f,d,b){return i("dojox.grid._Layout",null,{constructor:function(b){this.grid=b},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(b,c,d,a,g){for(var m=
this.structure[b].cells[0],p=this.structure[c].cells[0],l=null,u=l=0,b=0,r;r=m[b];b++)if(r.index==d){l=b;break}l=m.splice(l,1)[0];l.view=this.grid.views.views[c];for(b=0,r=null;r=p[b];b++)if(r.index==a){u=b;break}g||(u+=1);p.splice(u,0,l);if(d=this.grid.getCell(this.grid.getSortIndex()))d._currentlySorted=this.grid.getSortAsc();this.cells=[];for(b=d=0;c=this.structure[b];b++)for(a=0;g=c.cells[a];a++)for(m=0;r=g[m];m++){r.index=d;this.cells.push(r);if("_currentlySorted"in r)p=d+1,p*=r._currentlySorted?
1:-1,this.grid.sortInfo=p,delete r._currentlySorted;d++}f.forEach(this.cells,function(a){var c=a.markup[2].split(" ");parseInt(c[1].substring(5))!=a.index&&(c[1]='idx="'+a.index+'"',a.markup[2]=c.join(" "))});this.grid.setupHeaderMenu()},setColumnVisibility:function(e,c){var d=this.cells[e];if(d.hidden==c){d.hidden=!c;var a=d.view,g=a.viewWidth;if(g&&"auto"!=g)a._togglingColumn=b.getMarginBox(d.getHeaderNode()).w||0;a.update();return!0}return!1},addCellDef:function(b,c,h){var a=this,g=function(c){var b=
0;1<c.colSpan?b=0:(b=c.width||a._defaultCellProps.width||a.defaultWidth,isNaN(b)||(b+="em"));return b},b={grid:this.grid,subrow:b,layoutIndex:c,index:this.cells.length};if(h&&h instanceof j.grid.cells._Base)return c=d.clone(h),b.unitWidth=g(c._props),c=d.mixin(c,this._defaultCellProps,h._props,b);c=h.type||h.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||j.grid.cells.Cell;d.isString(c)&&(c=d.getObject(c));b.unitWidth=g(h);return new c(d.mixin({},this._defaultCellProps,h,b))},
addRowDef:function(b,c){for(var d=[],a=0,g=0,m=!0,p=0,l;l=c[p];p++)if(l=this.addCellDef(b,p,l),d.push(l),this.cells.push(l),m&&l.relWidth)a+=l.relWidth;else if(l.width)l=l.width,"string"==typeof l&&"%"==l.slice(-1)?g+=window.parseInt(l,10):"auto"==l&&(m=!1);a&&m&&f.forEach(d,function(c){if(c.relWidth)c.width=c.unitWidth=c.relWidth/a*(100-g)+"%"});return d},addRowsDef:function(b){var c=[];if(d.isArray(b))if(d.isArray(b[0]))for(var h=0,a;b&&(a=b[h]);h++)c.push(this.addRowDef(h,a));else c.push(this.addRowDef(0,
b));return c},addViewDef:function(b){this._defaultCellProps=b.defaultCell||{};b.width&&"auto"==b.width&&delete b.width;return d.mixin({},b,{cells:this.addRowsDef(b.rows||b.cells)})},setStructure:function(b){this.fieldIndex=0;this.cells=[];var c=this.structure=[];if(this.grid.rowSelector){var h={type:j._scopeName+".grid._RowSelector"};if(d.isString(this.grid.rowSelector)){var a=this.grid.rowSelector;"false"==a?h=null:"true"!=a&&(h.width=a)}else this.grid.rowSelector||(h=null);h&&c.push(this.addViewDef(h))}h=
function(a){return null!==a&&d.isObject(a)&&("cells"in a||"rows"in a||"type"in a&&!("name"in a||"field"in a||"get"in a))};if(d.isArray(b)){for(var a=!1,g=0,f;f=b[g];g++)if(h(f)){a=!0;break}if(a)for(g=0;f=b[g];g++)d.isArray(f)&&(d.isArray(f[0])||"name"in f[0]||"field"in f[0]||"get"in f[0])?c.push(this.addViewDef({cells:f})):h(f)&&c.push(this.addViewDef(f));else c.push(this.addViewDef({cells:b}))}else h(b)&&c.push(this.addViewDef(b));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})})},
"dojox/grid/cells":function(){define("dojox/grid/cells",["../main","./cells/_base"],function(k){return k.grid.cells})},"dojox/grid/cells/_base":function(){define("dojox/grid/cells/_base","dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/event,dojo/_base/connect,dojo/_base/array,dojo/_base/sniff,dojo/dom,dojo/dom-attr,dojo/dom-construct,dijit/_Widget,../util".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m){var p=j("dojox.grid._DeferredTextWidget",g,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&
this.deferred.addBoth(i.hitch(this,function(a){if(this.domNode)this.domNode.innerHTML=a}))}}),l=function(){setTimeout(i.hitch.apply(k,arguments),0)},u=j("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=a||{};i.mixin(this,a);if(void 0===this.draggable)this.draggable=!0},_defaultFormat:function(b,c){var n;var e=this.grid.formatterScope||
this,d=this.formatter;if(d&&e&&"string"==typeof d)n=this.formatter=e[d],d=n;e=b!=this.defaultValue&&d?d.apply(e,c):b;if("undefined"==typeof e)return this.defaultValue;e&&e.addBoth&&(e=new p({deferred:e},a.create("span",{innerHTML:this.defaultValue})));return e&&e.declaredClass&&e.startup?"<div class='dojoxGridStubNode' linkWidget='"+e.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>":e},format:function(a,b){var c=this.grid.edit.info,e=this.get?this.get(a,b):this.value||this.defaultValue,
e=e&&e.replace&&this.grid.escapeHTMLInData?e.replace(/&/g,"&amp;").replace(/</g,"&lt;"):e;return this.editable&&(this.alwaysEditing||c.rowIndex==a&&c.cell==this)?this.formatEditing(e,a):this._defaultFormat(e,[e,a,this])},formatEditing:function(){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;return a&&
"auto"!==a},isFlex:function(){var a=this.unitWidth;return a&&i.isString(a)&&("auto"==a||"%"==a.slice(-1))},applyEdit:function(a,b){this.getNode(b)&&this.grid.edit.applyCellEdit(a,this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,b){this.commitOnBlur&&d.connect(a,"onblur",function(){setTimeout(i.hitch(this,"_onEditBlur",b),250)})},needFormatNode:function(a,b){this._formatPending=
!0;l(this,"_formatNode",a,b)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(a,b){if(this._formatPending)this._formatPending=!1,e("ie")||c.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(b),a,b)},formatNode:function(a,b,c){e("ie")?l(this,"focus",c,a):this.focus(c,a)},dispatchEvent:function(a,b){if(a in this)return this[a](b)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},setValue:function(a,b){var c=this.getEditNode(a);c&&(c[this._valueProp]=
b)},focus:function(a,b){var c=b||this.getEditNode(a);try{m.fire(c,"focus"),m.fire(c,"select")}catch(e){}},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(){c.setSelectable(this.grid.domNode,!1);this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cancelEdit(a);this._finish(a)}});u.markupFactory=function(a,b){var c=i.trim(h.get(a,"formatter")||"");if(c)b.formatter=
i.getObject(c)||c;if(c=i.trim(h.get(a,"get")||""))b.get=i.getObject(c);c=function(b,c,e){var d=i.trim(h.get(a,b)||"");d&&(c[e||b]="false"!=d.toLowerCase())};c("sortDesc",b);c("editable",b);c("alwaysEditing",b);c("noresize",b);c("draggable",b);if(c=i.trim(h.get(a,"loadingText")||h.get(a,"defaultValue")||""))b.defaultValue=c;c=function(b,c,e){var d=i.trim(h.get(a,b)||"")||void 0;d&&(c[e||b]=d)};c("styles",b);c("headerStyles",b);c("cellStyles",b);c("classes",b);c("headerClasses",b);c("cellClasses",b)};
var r=j("dojox.grid.cells.Cell",u,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(a,b){this.needFormatNode(a,b);return'<input class="dojoxGridInput" type="text" value="'+a+'">'},formatNode:function(a,b,c){this.inherited(arguments);this.registerOnBlur(a,c)},doKey:function(a){this.keyFilter&&-1==String.fromCharCode(a.charCode).search(this.keyFilter)&&f.stop(a)},_finish:function(a){this.inherited(arguments);var b=this.getEditNode(a);try{m.fire(b,"blur")}catch(c){}}});
r.markupFactory=function(a,b){u.markupFactory(a,b);var c=i.trim(h.get(a,"keyFilter")||"");if(c)b.keyFilter=RegExp(c)};j("dojox.grid.cells.RowIndex",r,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}}).markupFactory=function(a,b){r.markupFactory(a,b)};j("dojox.grid.cells.Select",r,{options:null,values:null,returnIndex:-1,constructor:function(){this.values=this.values||this.options},formatEditing:function(a,b){this.needFormatNode(a,b);for(var c=['<select class="dojoxGridSelect">'],
e=0,d,g;void 0!==(d=this.options[e])&&void 0!==(g=this.values[e]);e++)g=g.replace?g.replace(/&/g,"&amp;").replace(/</g,"&lt;"):g,d=d.replace?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d,c.push("<option",a==g?" selected":"",' value="'+g+'"',">",d,"</option>");c.push("</select>");return c.join("")},_defaultFormat:function(a,c){var e=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var d=b.indexOf(this.values,e);0<=d&&(e=this.options[d])}return e},getValue:function(a){var b=
this.getEditNode(a);if(b)return a=b.selectedIndex,b=b.options[a],-1<this.returnIndex?a:b.value||b.innerHTML}}).markupFactory=function(a,b){r.markupFactory(a,b);var c=i.trim(h.get(a,"options")||"");if(c){var e=c.split(",");if(e[0]!=c)b.options=e}if(c=i.trim(h.get(a,"values")||""))if(e=c.split(","),e[0]!=c)b.values=e};var o=j("dojox.grid.cells.AlwaysEdit",r,{alwaysEditing:!0,_formatNode:function(a,b){this.formatNode(this.getEditNode(b),a,b)},applyStaticValue:function(a){var b=this.grid.edit;b.applyCellEdit(this.getValue(a),
this,a);b.start(this,a,!0)}});o.markupFactory=function(a,b){r.markupFactory(a,b)};j("dojox.grid.cells.Bool",o,{_valueProp:"checked",formatEditing:function(a){return'<input class="dojoxGridInput" type="checkbox"'+(a?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){"INPUT"==a.target.tagName&&this.applyStaticValue(a.rowIndex)}}).markupFactory=function(a,b){o.markupFactory(a,b)};return u})},"dojox/grid/_RowSelector":function(){define("dojox/grid/_RowSelector",["dojo/_base/declare",
"./_View"],function(k,j){return k("dojox.grid._RowSelector",j,{defaultWidth:"2em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(i,f){f.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+(this.contentWidth||0)+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},
renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){if(!("contentWidth"in this)&&this.contentNode&&0<this.contentNode.offsetWidth)this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth},doStyleRowNode:function(i,f){var d=["dojoxGridRowbar dojoxGridNonNormalizedCell"];this.grid.rows.isOver(i)&&d.push("dojoxGridRowbarOver");this.grid.selection.isSelected(i)&&d.push("dojoxGridRowbarSelected");f.className=d.join(" ")},domouseover:function(i){this.grid.onMouseOverRow(i)},
domouseout:function(i){if(!this.isIntraRowEvent(i))this.grid.onMouseOutRow(i)}})})},"dojox/grid/_View":function(){require({cache:{"url:dojox/grid/resources/View.html":'<div class="dojoxGridView" role="presentation">\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\n\t\t\t<div dojoAttachPoint="headerContentNode" role="row"></div>\n\t\t</div>\n\t</div>\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\n\t<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\n\t</div>\n</div>\n'}});
define("dojox/grid/_View","dojo,dijit/registry,../main,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/connect,dojo/_base/sniff,dojo/query,dojo/_base/window,dojo/text!./resources/View.html,dojo/dnd/Source,dijit/_Widget,dijit/_TemplatedMixin,dojox/html/metrics,./util,dojo/_base/html,./_Builder,dojo/dnd/Avatar,dojo/dnd/Manager".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,o,n,z,q){var g=f("dojox.grid._View",[p,l],{defaultWidth:"18em",viewWidth:"",templateString:g,classTag:"dojoxGrid",
marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:n._HeaderBuilder,_contentBuilderClass:n._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");r.funnelEvents(this.contentNode,this,"doContentEvent","mouseover,mouseout,click,dblclick,contextmenu,mousedown".split(","));r.funnelEvents(this.headerNode,this,"doHeaderEvent","dblclick,mouseover,mouseout,mousemove,mousedown,click,contextmenu".split(","));
this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!this.grid.isLeftToRight())this.headerNodeContainer.style.width=""},destroy:function(){o.destroy(this.headerNode);delete this.headerNode;for(var a in this.rowNodes)this._cleanupRowWidgets(this.rowNodes[a]),o.destroy(this.rowNodes[a]);this.rowNodes={};this.source&&this.source.destroy();this.inherited(arguments)},focus:function(){c("ie")||c("webkit")||c("opera")?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},
setStructure:function(a){a=this.structure=a;this.viewWidth=a.width&&!isNaN(a.width)?a.width+"em":a.width||(a.noscroll?"auto":this.viewWidth);this._onBeforeRow=a.onBeforeRow||function(){};this._onAfterRow=a.onAfterRow||function(){};if(this.noscroll=a.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=Boolean(1==a.cells.length);this.testFlexCells();this.updateStructure()},_cleanupRowWidgets:function(a){a&&d.forEach(h("[widgetId]",a).map(j.byNode),function(a){a._destroyOnRemove?
(a.destroy(),delete a):a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.removeChild(a.domNode)})},onBeforeRow:function(a,b){this._onBeforeRow(a,b);0<=a&&this._cleanupRowWidgets(this.getRowNode(a))},onAfterRow:function(a,b,c){this._onAfterRow(a,b,c);var e=this.grid;d.forEach(h(".dojoxGridStubNode",c),function(a){if(a&&a.parentNode){var b=a.getAttribute("linkWidget"),c=window.parseInt(o.attr(a,"cellIdx"),10);e.getCell(c);(b=j.byId(b))?(a.parentNode.replaceChild(b.domNode,a),b._started||b.startup(),
k.destroy(a)):a.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var a=0,b;b=this.structure.cells[a];a++)for(var c=0,e;e=b[c];c++)e.view=this,this.flexCells=this.flexCells||e.isFlex();return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var a=this.hasVScrollbar(),b=o.style(this.scrollboxNode,"overflow");this.noscroll||!b||"hidden"==b?a=!1:"scroll"==b&&(a=!0);return a?u.getScrollbar().w:0},getColumnsWidth:function(){var a=
this.headerContentNode;return a&&a.firstChild?a.firstChild.offsetWidth||o.style(a.firstChild,"width"):0},setColumnsWidth:function(a){this.headerContentNode.firstChild.style.width=a+"px";if(this.viewWidth)this.viewWidth=a+"px"},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,o._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();
if(0<=this._togglingColumn)this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1;var d=this.grid.layout.cells,g=b.hitch(this,function(a,b){!this.grid.isLeftToRight()&&(b=!b);for(var c=b?-1:1,e=this.header.getCellNodeIndex(a)+c,g=d[e];g&&g.getHeaderNode()&&"none"==g.getHeaderNode().style.display;)e+=c,g=d[e];return g?g.getHeaderNode():null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();this.bottomMarker&&o.destroy(this.bottomMarker);
this.bottomMarker=o.byId("dojoxGrid_bottomMarker");this.topMarker&&o.destroy(this.topMarker);this.topMarker=o.byId("dojoxGrid_topMarker");if(!this.bottomMarker)this.bottomMarker=o.create("div",{id:"dojoxGrid_bottomMarker","class":"dojoxGridColPlaceBottom"},a.body()),this._hide(this.bottomMarker),this.topMarker=o.create("div",{id:"dojoxGrid_topMarker","class":"dojoxGridColPlaceTop"},a.body()),this._hide(this.topMarker);this.arrowDim=o.contentBox(this.bottomMarker);var q=o.contentBox(this.headerContentNode.firstChild.rows[0]).h;
this.source=new m(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:b.hitch(this,function(a){this.header.decorateEvent(a);if((this.header.overRightResizeArea(a)||this.header.overLeftResizeArea(a))&&this.header.canResize(a)&&!this.header.moveable)this.header.beginColumnResize(a);else{if(this.grid.headerMenu)this.grid.headerMenu.onCancel(!0);a.button===(9>c("ie")?1:0)&&m.prototype.onMouseDown.call(this.source,
a)}}),onMouseOver:b.hitch(this,function(a){var b=this.source;b._getChildByEvent(a)&&m.prototype.onMouseOver.apply(b,arguments)}),_markTargetAnchor:b.hitch(this,function(a){var b=this.source;if(!(b.current==b.targetAnchor&&b.before==a)){b.targetAnchor&&g(b.targetAnchor,b.before)&&b._removeItemClass(g(b.targetAnchor,b.before),b.before?"After":"Before");m.prototype._markTargetAnchor.call(b,a);var c=a?b.targetAnchor:g(b.targetAnchor,b.before),a=0;if(!c)c=b.targetAnchor,a=o.contentBox(c).w+this.arrowDim.w/
2+2;c=o.position(c,!0);a=Math.floor(c.x-this.arrowDim.w/2+a);o.style(this.bottomMarker,"visibility","visible");o.style(this.topMarker,"visibility","visible");o.style(this.bottomMarker,{left:a+"px",top:q+c.y+"px"});o.style(this.topMarker,{left:a+"px",top:c.y-this.arrowDim.h+"px"});b.targetAnchor&&g(b.targetAnchor,b.before)&&b._addItemClass(g(b.targetAnchor,b.before),b.before?"After":"Before")}}),_unmarkTargetAnchor:b.hitch(this,function(){var a=this.source;a.targetAnchor&&(a.targetAnchor&&g(a.targetAnchor,
a.before)&&a._removeItemClass(g(a.targetAnchor,a.before),a.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),m.prototype._unmarkTargetAnchor.call(a))}),destroy:b.hitch(this,function(){e.disconnect(this._source_conn);e.unsubscribe(this._source_sub);m.prototype.destroy.call(this.source);this.bottomMarker&&(o.destroy(this.bottomMarker),delete this.bottomMarker);this.topMarker&&(o.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:b.hitch(this,function(){m.prototype.onDndCancel.call(this.source);
this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=e.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=e.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(a){o.style(a,{top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(a){if(q.manager().target===this.source){this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var b=this.grid.views.views,a=b[a.viewIndex],
b=b[this.index];b!=a&&(a.convertColPctToFixed(),b.convertColPctToFixed())}},_onDndDrop:function(a,b){if(q.manager().target!==this.source){if(q.manager().source===this.source)this._removingColumn=!0}else{this._hide(this.bottomMarker);this._hide(this.topMarker);var c=o.marginBox(b[0]).w;if(a.viewIndex!==this.index){var e=this.grid.views.views,d=e[a.viewIndex],e=e[this.index];d.viewWidth&&"auto"!=d.viewWidth&&d.setColumnsWidth(d.getColumnsWidth()-c);e.viewWidth&&"auto"!=e.viewWidth&&e.setColumnsWidth(e.getColumnsWidth())}c=
this.source._targetNode;d=this.source._beforeTarget;!this.grid.isLeftToRight()&&(d=!d);var e=this.grid.layout,g=this.index;delete this.source._targetNode;delete this.source._beforeTarget;e.moveColumn(a.viewIndex,g,b[0]?o.attr(b[0],"idx"):null,c?o.attr(c,"idx"):null,d)}},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells)this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth;r.fire(this,
"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);/^\s+$/.test(b)&&(b="&nbsp;");var c=['<div class="dojoxGridSortNode'];a.index!=a.grid.getSortIndex()?c.push('">'):c=c.concat([" ",0<a.grid.sortInfo?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',0<a.grid.sortInfo?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']);
c=c.concat([b,"</div></div>"]);return c.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(a){var b=this._hasHScroll||!1;if(void 0==this._hasHScroll||a)this.noscroll?this._hasHScroll=!1:(a=o.style(this.scrollboxNode,"overflow"),this._hasHScroll="hidden"==a?!1:"scroll"==a?!0:this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);b!==this._hasHScroll&&this.grid.update();return this._hasHScroll},hasVScrollbar:function(a){var b=this._hasVScroll||
!1;if(void 0==this._hasVScroll||a)this.noscroll?this._hasVScroll=!1:(a=o.style(this.scrollboxNode,"overflow"),this._hasVScroll="hidden"==a?!1:"scroll"==a?!0:this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);b!==this._hasVScroll&&this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var a=!1;this.grid.initialWidth="";var b=h("th",this.headerContentNode),c=d.map(b,function(b,c){var e=b.style.width;o.attr(b,"vIdx",c);if(e&&"%"==e.slice(-1))a=!0;else if(e&&"px"==e.slice(-2))return window.parseInt(e,
10);return o.contentBox(b).w});return a?(d.forEach(this.grid.layout.cells,function(a,b){if(a.view==this){var e=a.view.getHeaderCellNode(a.index);if(e&&o.hasAttr(e,"vIdx")){var d=window.parseInt(o.attr(e,"vIdx"));this.setColWidth(b,c[d]);o.removeAttr(e,"vIdx")}}},this),!0):!1},adaptHeight:function(a){if(!this.grid._autoHeight){var b=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight;if(!a&&(a=this.noscroll))a:{for(var c in this.grid.views.views)if(a=
this.grid.views.views[c],a!==this&&a.hasHScrollbar()){a=!0;break a}a=!1}a&&(b-=u.getScrollbar().h);r.setStyleHeightPx(this.scrollboxNode,b)}this.hasVScrollbar(!0)},adaptWidth:function(){if(this.flexCells)this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth;var a=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();this._removingColumn?(a=Math.min(a,this.getColumnsWidth())+"px",this._removingColumn=!1):a=Math.max(a,this.getColumnsWidth())+"px";
this.contentNode.style.width=a;this.hasHScrollbar(!0)},setSize:function(a,b){var c=this.domNode.style,e=this.headerNode.style;if(a)c.width=a,e.width=a;c.height=0<=b?b+"px":""},renderRow:function(a){var b=this.createRowNode(a);this.buildRow(a,b);return b},createRowNode:function(a){var b=document.createElement("div");b.className=this.classTag+"Row";this instanceof i.grid._RowSelector?o.attr(b,"role","presentation"):(o.attr(b,"role","row"),"none"!=this.grid.selectionMode&&b.setAttribute("aria-selected",
"false"));b[r.gridViewTag]=this.id;b[r.rowIndexTag]=a;return this.rowNodes[a]=b},buildRow:function(a,b){this.buildRowContent(a,b);this.styleRow(a,b)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a);if(this.flexCells&&this.contentWidth)b.firstChild.style.width=this.contentWidth;r.fire(this,"onAfterRow",[a,this.structure.cells,b])},rowRemoved:function(a){0<=a&&this._cleanupRowWidgets(this.getRowNode(a));this.grid.edit.save(this,a);delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},
getCellNode:function(a,b){var c=this.getRowNode(a);if(c)return this.content.getCellNode(c,b)},getHeaderCellNode:function(a){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,a)},styleRow:function(a,b){b._style=void 0==b.style.cssText?b.getAttribute("style"):b.style.cssText;this.styleRowNode(a,b)},styleRowNode:function(a,b){b&&this.doStyleRowNode(a,b)},doStyleRowNode:function(a,b){this.grid.styleRowNode(a,b)},updateRow:function(a){var b=this.getRowNode(a);if(b)b.style.height=
"",this.buildRow(a,b);return b},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},lastTop:0,firstScroll:0,_nativeScroll:!1,doscroll:function(){if(13<=c("ff"))this._nativeScroll=!0;var a=this.grid.isLeftToRight();if(2>this.firstScroll){if(!a&&1==this.firstScroll||a&&0===this.firstScroll){var b=o.marginBox(this.headerNodeContainer);if(c("ie"))this.headerNodeContainer.style.width=b.w+this.getScrollbarWidth()+"px";else if(c("mozilla"))this.headerNodeContainer.style.width=b.w-this.getScrollbarWidth()+
"px",this.scrollboxNode.scrollLeft=a?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;a=this.scrollboxNode.scrollTop;a!==this.lastTop&&this.grid.scrollTo(a);this._nativeScroll=!1},setScrollTop:function(a){this.lastTop=a;if(!this._nativeScroll)this.scrollboxNode.scrollTop=a;return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a))this.grid.onContentEvent(a)},
doHeaderEvent:function(a){if(this.header.decorateEvent(a))this.grid.onHeaderEvent(a)},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){if(this.domNode){this.content.update();this.grid.update();var a=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=a;this.headerNode.scrollLeft=a}}}),t=f("dojox.grid._GridAvatar",z,{construct:function(){var b=
a.doc,c=b.createElement("table");c.cellPadding=c.cellSpacing="0";c.className="dojoxGridDndAvatar";c.style.position="absolute";c.style.zIndex=1999;c.style.margin="0px";var e=b.createElement("tbody"),d=b.createElement("tr"),g=b.createElement("td"),h=b.createElement("td");d.className="dojoxGridDndAvatarItem";h.className="dojoxGridDndAvatarItemImage";h.style.width="16px";var f=this.manager.source;if(f.creator)f=f._normalizedCreator(f.getItem(this.manager.nodes[0].id).data,"avatar").node;else{var f=this.manager.nodes[0].cloneNode(!0),
l,B;if("tr"==f.tagName.toLowerCase())l=b.createElement("table"),B=b.createElement("tbody"),B.appendChild(f),l.appendChild(B),f=l;else if("th"==f.tagName.toLowerCase())l=b.createElement("table"),B=b.createElement("tbody"),b=b.createElement("tr"),l.cellPadding=l.cellSpacing="0",b.appendChild(f),B.appendChild(b),l.appendChild(B),f=l}f.id="";g.appendChild(f);d.appendChild(h);d.appendChild(g);o.style(d,"opacity",0.9);e.appendChild(d);c.appendChild(e);this.node=c;c=q.manager();this.oldOffsetY=c.OFFSET_Y;
c.OFFSET_Y=1},destroy:function(){q.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments)}}),v=q.manager().makeAvatar;q.manager().makeAvatar=function(){return void 0!==this.source.viewIndex&&!o.hasClass(a.body(),"dijit_a11y")?new t(this):v.call(q.manager())};return g})},"url:dojox/grid/resources/View.html":'<div class="dojoxGridView" role="presentation">\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\n\t\t\t<div dojoAttachPoint="headerContentNode" role="row"></div>\n\t\t</div>\n\t</div>\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\n\t<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\n\t</div>\n</div>\n',
"dojox/html/metrics":function(){define("dojox/html/metrics","dojo/_base/kernel,dojo/_base/lang,dojo/_base/sniff,dojo/ready,dojo/_base/unload,dojo/_base/window,dojo/dom-geometry".split(","),function(k,j,i,f,d,b,e){var c=j.getObject("dojox.html.metrics",!0),h=j.getObject("dojox");c.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(i("ie"))b.doc.documentElement.style.fontSize="100%";var c=b.doc.createElement("div"),
e=c.style;e.position="absolute";e.left="-100px";e.top="0";e.width="30px";e.height="1000em";e.borderWidth="0";e.margin="0";e.padding="0";e.outline="0";e.lineHeight="1";e.overflow="hidden";b.body().appendChild(c);for(var d in a)e.fontSize=d,a[d]=16*Math.round(12*c.offsetHeight/16)/12/1E3;b.body().removeChild(c);return a};var a=null;c.getCachedFontMeasurements=function(b){if(b||!a)a=c.getFontMeasurements();return a};var g=null,m={};c.getTextBox=function(a,c,d){var h,f;if(g)h=g;else{h=g=b.doc.createElement("div");
var q=b.doc.createElement("div");q.appendChild(h);f=q.style;f.overflow="scroll";f.position="absolute";f.left="0px";f.top="-10000px";f.width="1px";f.height="1px";f.visibility="hidden";f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";b.body().appendChild(q)}h.className="";f=h.style;f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";if(1<arguments.length&&c)for(var l in c)l in m||(f[l]=c[l]);if(2<arguments.length&&d)h.className=d;h.innerHTML=a;f=e.position(h);f.w=h.parentNode.scrollWidth;
return f};var p=16,l=16;c.getScrollbar=function(){return{w:p,h:l}};c._fontResizeNode=null;c.initOnFontResize=function(){var a=c._fontResizeNode=b.doc.createElement("iframe"),e=a.style;e.position="absolute";e.width="5em";e.height="10em";e.top="-10000px";e.display="none";i("ie")?a.onreadystatechange=function(){if("complete"==a.contentWindow.document.readyState)a.onresize=a.contentWindow.parent[h._scopeName].html.metrics._fontresize}:a.onload=function(){a.contentWindow.onresize=a.contentWindow.parent[h._scopeName].html.metrics._fontresize};
a.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");b.body().appendChild(a);c.initOnFontResize=function(){}};c.onFontResize=function(){};c._fontresize=function(){c.onFontResize()};d.addOnUnload(function(){var a=c._fontResizeNode;if(a){if(i("ie")&&a.onresize)a.onresize=null;else if(a.contentWindow&&a.contentWindow.onresize)a.contentWindow.onresize=null;c._fontResizeNode=null}});f(function(){try{var a=
b.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";b.body().appendChild(a);p=a.offsetWidth-a.clientWidth;l=a.offsetHeight-a.clientHeight;b.body().removeChild(a);delete a}catch(e){}"fontSizeWatch"in k.config&&k.config.fontSizeWatch&&c.initOnFontResize()});return c})},"dojox/grid/_Builder":function(){define("dojox/grid/_Builder","../main,dojo/_base/array,dojo/_base/lang,dojo/_base/window,dojo/_base/event,dojo/_base/sniff,dojo/_base/connect,dojo/dnd/Moveable,dojox/html/metrics,./util,dojo/_base/html".split(","),
function(k,j,i,f,d,b,e,c,h,a,g){var m=k.grid,p=function(a){for(;a&&"TABLE"!=a.tagName;a=a.parentNode);return a},l=function(a,b){for(var c=a;c&&b(c);c=c.parentNode);return c},u=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},r=a.rowIndexTag,o=a.gridViewTag,n=m._Builder=i.extend(function(a){if(a)this.view=a,this.grid=a.grid},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var a=[this._table];
this.view.viewWidth&&a.push([' style="width:',this.view.viewWidth,';"'].join(""));a.push(">");return a},generateCellMarkup:function(a,b,c,e){var d=[],g;if(e){g=a.index!=a.grid.getSortIndex()?"":0<a.grid.sortInfo?'aria-sort="ascending"':'aria-sort="descending"';if(!a.id)a.id=this.grid.id+"Hdr"+a.index;g=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',g,'id="',a.id,'"']}else g=['<td tabIndex="-1" role="gridcell"',this.grid.editable&&!a.editable?'aria-readonly="true"':""];a.colSpan&&g.push(' colspan="',
a.colSpan,'"');a.rowSpan&&g.push(' rowspan="',a.rowSpan,'"');g.push(' class="dojoxGridCell ');a.classes&&g.push(a.classes," ");c&&g.push(c," ");d.push(g.join(""));d.push("");g=['" idx="',a.index,'" style="'];b&&";"!=b[b.length-1]&&(b+=";");g.push(a.styles,b||"",a.hidden?"display:none;":"");a.unitWidth&&g.push("width:",a.unitWidth,";");d.push(g.join(""));d.push("");g=['"'];a.attrs&&g.push(" ",a.attrs);g.push(">");d.push(g.join(""));d.push("");d.push(e?"</th>":"</td>");return d},isCellNode:function(a){return Boolean(a&&
a!=f.doc&&g.attr(a,"idx"))},getCellNodeIndex:function(a){return a?Number(g.attr(a,"idx")):-1},getCellNode:function(a,b){for(var c=0,e;(e=a.firstChild&&((a.firstChild.rows||0)[c]||a.firstChild.childNodes[c]))&&e.cells;c++)for(var d=0,g;g=e.cells[d];d++)if(this.getCellNodeIndex(g)==b)return g;return null},findCellTarget:function(a,b){for(var c=a;c&&(!this.isCellNode(c)||c.offsetParent&&o in c.offsetParent.parentNode&&c.offsetParent.parentNode[o]!=this.view.id)&&c!=b;)c=c.parentNode;return c!=b?c:null},
baseDecorateEvent:function(a){a.dispatch="do"+a.type;a.grid=this.grid;a.sourceView=this.view;a.cellNode=this.findCellTarget(a.target,a.rowNode);a.cellIndex=this.getCellNodeIndex(a.cellNode);a.cell=0<=a.cellIndex?this.grid.getCell(a.cellIndex):null},findTarget:function(a,b){for(var c=a;c&&c!=this.domNode&&(!(b in c)||o in c&&c[o]!=this.view.id);)c=c.parentNode;return c!=this.domNode?c:null},findRowTarget:function(a){return this.findTarget(a,r)},isIntraNodeEvent:function(a){try{return a.cellNode&&a.relatedTarget&&
g.isDescendant(a.relatedTarget,a.cellNode)}catch(b){return!1}},isIntraRowEvent:function(a){try{var b=a.relatedTarget&&this.findRowTarget(a.relatedTarget);return!b&&-1==a.rowIndex||b&&a.rowIndex==b.gridRowIndex}catch(c){return!1}},dispatchEvent:function(a){return a.dispatch in this?this[a.dispatch](a):!1},domouseover:function(a){if(a.cellNode&&a.cellNode!=this.lastOverCellNode)this.lastOverCellNode=a.cellNode,this.grid.onMouseOver(a);this.grid.onMouseOverRow(a)},domouseout:function(a){if(a.cellNode&&
a.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(a,this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(a),!this.isIntraRowEvent(a)))this.grid.onMouseOutRow(a)},domousedown:function(a){if(a.cellNode)this.grid.onMouseDown(a);this.grid.onMouseDownRow(a)}}),k=m._ContentBuilder=i.extend(function(a){n.call(this,a)},n.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var a=this.grid.get,b=this.view.structure.cells,c=0,e;e=b[c];c++)for(var d=0,g;g=e[d];d++)if(g.get=
g.get||void 0==g.value&&a,g.markup=this.generateCellMarkup(g,g.cellStyles,g.cellClasses,!1),!this.grid.editable&&g.editable)this.grid.editable=!0},generateHtml:function(b,c){var e=this.getTableArray(),d=this.view.structure.cells,g=this.grid.getItem(c);a.fire(this.view,"onBeforeRow",[c,d]);for(var h=0,o;o=d[h];h++)if(!o.hidden&&!o.header){e.push(!o.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var f=0,l,n,r,B;l=o[f];f++)n=l.markup,r=l.customClasses=[],B=l.customStyles=[],n[5]=l.format(c,
g),n[1]=r.join(" "),n[3]=B.join(";"),e.push.apply(e,n);e.push("</tr>")}e.push("</table>");return e.join("")},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode)return!1;a.rowIndex=a.rowNode[r];this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return!0}}),z=m._HeaderBuilder=i.extend(function(a){this.moveable=null;n.call(this,a)},n.prototype,{_skipBogusClicks:!1,overResizeWidth:4,minColWidth:1,update:function(){this.tableMap?this.tableMap.mapRows(this.view.structure.cells):
this.tableMap=new m._TableMap(this.view.structure.cells)},generateHtml:function(b,c){var e=this.getTableArray(),d=this.view.structure.cells;a.fire(this.view,"onBeforeRow",[-1,d]);for(var g=0,h;h=d[g];g++)if(!h.hidden){e.push(!h.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var o=0,f,l;f=h[o];o++){f.customClasses=[];f.customStyles=[];if(this.view.simpleStructure){if(f.draggable)f.headerClasses?-1==f.headerClasses.indexOf("dojoDndItem")&&(f.headerClasses+=" dojoDndItem"):f.headerClasses="dojoDndItem";
f.attrs?-1==f.attrs.indexOf("dndType='gridColumn_")&&(f.attrs+=" dndType='gridColumn_"+this.grid.id+"'"):f.attrs="dndType='gridColumn_"+this.grid.id+"'"}l=this.generateCellMarkup(f,f.headerStyles,f.headerClasses,!0);l[5]=void 0!=c?c:b(f);l[3]=f.customStyles.join(";");l[1]=f.customClasses.join(" ");e.push(l.join(""))}e.push("</tr>")}e.push("</table>");return e.join("")},getCellX:function(a){var c,e=a.layerX;if(b("mozilla")||9<=b("ie"))c=l(a.target,u("th")),e-=c&&c.offsetLeft||0,a.sourceView.getScrollbarWidth(),
this.grid.isLeftToRight()||(table=l(c,u("table")),e-=table&&table.offsetLeft||0);c=l(a.target,function(){if(!c||c==a.cellNode)return!1;e+=0>c.offsetLeft?0:c.offsetLeft;return!0});return e},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return!0},prepareResize:function(a,b){do{var c=a.cellIndex;a.cellNode=c?a.cellNode.parentNode.cells[c+b]:null;a.cellIndex=a.cellNode?this.getCellNodeIndex(a.cellNode):-1}while(a.cellNode&&"none"==a.cellNode.style.display);
return Boolean(a.cellNode)},canResize:function(a){if(!a.cellNode||1<a.cellNode.colSpan)return!1;a=this.grid.getCell(a.cellIndex);return!a.noresize&&a.canResize()},overLeftResizeArea:function(a){if(g.hasClass(f.body(),"dojoDndMove"))return!1;if(b("ie")){var c=a.target;if(g.hasClass(c,"dojoxGridArrowButtonNode")||g.hasClass(c,"dojoxGridArrowButtonChar")||g.hasClass(c,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?0<a.cellIndex&&0<a.cellX&&a.cellX<this.overResizeWidth&&this.prepareResize(a,
-1):a.cellNode&&0<a.cellX&&a.cellX<this.overResizeWidth},overRightResizeArea:function(a){if(g.hasClass(f.body(),"dojoDndMove"))return!1;if(b("ie")){var c=a.target;if(g.hasClass(c,"dojoxGridArrowButtonNode")||g.hasClass(c,"dojoxGridArrowButtonChar")||g.hasClass(c,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth:0<a.cellIndex&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(a,-1)},domousemove:function(a){if(!this.moveable){var b=
this.overRightResizeArea(a)?"dojoxGridColResize":this.overLeftResizeArea(a)?"dojoxGridColResize":"";b&&!this.canResize(a)&&(b="dojoxGridColNoResize");g.toggleClass(a.sourceView.headerNode,"dojoxGridColNoResize","dojoxGridColNoResize"==b);g.toggleClass(a.sourceView.headerNode,"dojoxGridColResize","dojoxGridColResize"==b);b&&d.stop(a)}},domousedown:function(a){this.moveable||((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):(this.grid.onMouseDown(a),
this.grid.onMouseOverRow(a)))},doclick:function(a){return this._skipBogusClicks?(d.stop(a),!0):!1},colResizeSetup:function(a,c){var e=g.contentBox(a.sourceView.headerNode);if(c){this.lineDiv=document.createElement("div");var d=g.position(a.sourceView.headerNode,!0),o=g.contentBox(a.sourceView.domNode),l=a.pageX;!this.grid.isLeftToRight()&&8>b("ie")&&(l-=h.getScrollbar().w);g.style(this.lineDiv,{top:d.y+"px",left:l+"px",height:o.h+e.h+"px"});g.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=
l;f.body().appendChild(this.lineDiv)}for(var d=[],o=this.tableMap.findOverlappingNodes(a.cellNode),l=0,n;n=o[l];l++)d.push({node:n,index:this.getCellNodeIndex(n),width:n.offsetWidth});o=a.sourceView;n=this.grid.isLeftToRight()?1:-1;for(var r=a.grid.views.views,l=[],p=o.idx+n,m;m=r[p];p+=n)l.push({node:m.headerNode,left:window.parseInt(m.headerNode.style.left)});n=o.headerContentNode.firstChild;return{scrollLeft:a.sourceView.headerNode.scrollLeft,view:o,node:a.cellNode,index:a.cellIndex,w:g.contentBox(a.cellNode).w,
vw:e.w,table:n,tw:g.contentBox(n).w,spanners:d,followers:l}},beginColumnResize:function(a){this.moverDiv=document.createElement("div");g.style(this.moverDiv,{position:"absolute",left:0});f.body().appendChild(this.moverDiv);g.addClass(this.grid.domNode,"dojoxGridColumnResizing");var b=this.moveable=new c(this.moverDiv),d=this.colResizeSetup(a,!0);b.onMove=i.hitch(this,"doResizeColumn",d);e.connect(b,"onMoveStop",i.hitch(this,function(){this.endResizeColumn(d);d.node.releaseCapture&&d.node.releaseCapture();
this.moveable.destroy();delete this.moveable;this.moveable=null;g.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));a.cellNode.setCapture&&a.cellNode.setCapture();b.onMouseDown(a)},doResizeColumn:function(a,b,c){var e=c.l,e={deltaX:e,w:a.w+(this.grid.isLeftToRight()?e:-e),vw:a.vw+e,tw:a.tw+e};this.dragRecord={inDrag:a,mover:b,leftTop:c};e.w>=this.minColWidth&&(b?g.style(this.lineDiv,"left",this.lineDiv._origLeft+e.deltaX+"px"):this.doResizeNow(a,e))},endResizeColumn:function(a){if(this.dragRecord){var c=
this.dragRecord.leftTop,c=this.grid.isLeftToRight()?c.l:-c.l,c=c+(Math.max(a.w+c,this.minColWidth)-(a.w+c));b("webkit")&&a.spanners.length&&(c+=g._getPadBorderExtents(a.spanners[0].node).w);this.doResizeNow(a,{deltaX:c,w:a.w+c,vw:a.vw+c,tw:a.tw+c});delete this.dragRecord}g.destroy(this.lineDiv);g.destroy(this.moverDiv);g.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=!0;a.view.update();this._skipBogusClicks=!1;this.grid.onResizeColumn(a.index)},doResizeNow:function(a,c){a.view.convertColPctToFixed();
if(a.view.flexCells&&!a.view.testFlexCells()){var e=p(a.node);if(e)e.style.width=""}for(var d,g,e=0;d=a.spanners[e];e++)if(g=d.width+c.deltaX,0<g)d.node.style.width=g+"px",a.view.setColWidth(d.index,g);if(this.grid.isLeftToRight()||!b("ie"))for(e=0;d=a.followers[e];e++)g=d.left+c.deltaX,d.node.style.left=g+"px";a.node.style.width=c.w+"px";a.view.setColWidth(a.index,c.w);a.view.headerNode.style.width=c.vw+"px";a.view.setColumnsWidth(c.tw);if(!this.grid.isLeftToRight())a.view.headerNode.scrollLeft=
a.scrollLeft+c.deltaX}});m._TableMap=i.extend(function(a){this.mapRows(a)},{map:null,mapRows:function(a){if(a.length){this.map=[];var b;for(b=0;a[b];b++)this.map[b]=[];for(var c=0;b=a[c];c++)for(var e=0,d=0,g,h;g=b[e];e++){for(;this.map[c][d];)d++;this.map[c][d]={c:e,r:c};h=g.rowSpan||1;g=g.colSpan||1;for(var o=0;o<h;o++)for(var f=0;f<g;f++)this.map[c+o][d+f]=this.map[c][d];d+=g}}},dumpMap:function(){for(var a=0,b;b=this.map[a];a++)for(var c=0;b[c];c++);},getMapCoords:function(a,b){for(var c=0,e;e=
this.map[c];c++)for(var d=0,g;g=e[d];d++)if(g.c==b&&g.r==a)return{j:c,i:d};return{j:-1,i:-1}},getNode:function(a,b,c){return(a=a&&a.rows[b])&&a.cells[c]},_findOverlappingNodes:function(a,b,c){var q;for(var e=[],b=this.getMapCoords(b,c),c=0,d;d=this.map[c];c++)c!=b.j&&(q=(d=d[b.i])?this.getNode(a,d.r,d.c):null,d=q)&&e.push(d);return e},findOverlappingNodes:function(a){return this._findOverlappingNodes(p(a),0<=a.parentNode.rowIndex?a.parentNode.rowIndex:j.indexOf(a.parentNode.parentNode.childNodes,
a.parentNode),0<=a.cellIndex?a.cellIndex:j.indexOf(a.parentNode.cells,a))}});return{_Builder:n,_HeaderBuilder:z,_ContentBuilder:k}})},"dojox/grid/_ViewManager":function(){define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(k,j,i){return k("dojox.grid._ViewManager",null,{constructor:function(f){this.grid=f},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(f){f.idx=this.views.length;
this.views.push(f)},destroyViews:function(){for(var f=0,d;d=this.views[f];f++)d.destroy();this.views=[]},getContentNodes:function(){for(var f=[],d=0,b;b=this.views[d];d++)f.push(b.contentNode);return f},forEach:function(f){for(var d=0,b;b=this.views[d];d++)f(b,d)},onEach:function(f,d){for(var d=d||[],b=0,e;e=this.views[b];b++)f in e&&e[f].apply(e,d)},normalizeHeaderNodeHeight:function(){for(var f=[],d=0,b;b=this.views[d];d++)b.headerContentNode.firstChild&&f.push(b.headerContentNode);this.normalizeRowNodeHeights(f)},
normalizeRowNodeHeights:function(f){var d=0,b=[];if(this.grid.rowHeight)d=this.grid.rowHeight;else{if(1>=f.length)return;for(var e=0,c;c=f[e];e++)if(!i.contains(c,"dojoxGridNonNormalizedCell"))b[e]=c.firstChild.offsetHeight,d=Math.max(d,b[e]);d=0<=d?d:0;(j("mozilla")||8<j("ie"))&&d&&d++}for(e=0;c=f[e];e++)if(b[e]!=d)c.firstChild.style.height=d+"px"},resetHeaderNodeHeight:function(){for(var f=0,d;d=this.views[f];f++)if(d=d.headerContentNode.firstChild)d.style.height=""},renormalizeRow:function(f){for(var d=
[],b=0,e,c;(e=this.views[b])&&(c=e.getRowNode(f));b++)c.firstChild.style.height="",d.push(c);this.normalizeRowNodeHeights(d)},getViewWidth:function(f){return this.views[f].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(d){d.headerContentNode.style.height=""});var f=0;this.forEach(function(d){f=Math.max(d.headerNode.offsetHeight,f)});return f},measureContent:function(){var f=0;this.forEach(function(d){f=Math.max(d.domNode.offsetHeight,f)});
return f},findClient:function(){var f=this.grid.elasticView||-1;if(0>f)for(var d=1,b;b=this.views[d];d++)if(b.viewWidth){for(d=1;b=this.views[d];d++)if(!b.viewWidth){f=d;break}break}0>f&&(f=Math.floor(this.views.length/2));return f},arrange:function(f,d){var b,e,c,h=this.views.length,a=this,g=0>=d?h:this.findClient(),m=function(b,c){var e=b.domNode.style,d=b.headerNode.style;if(a.grid.isLeftToRight())e.left=c+"px",d.left=c+"px";else if(e.right=c+"px",d.right=4>j("ff")?c+b.getScrollbarWidth()+"px":
c+"px",!j("webkit"))d.width=parseInt(d.width,10)-b.getScrollbarWidth()+"px";e.top="0px";d.top=0};for(b=0;(e=this.views[b])&&b<g;b++)c=this.getViewWidth(b),e.setSize(c,0),m(e,f),c=e.headerContentNode&&e.headerContentNode.firstChild?e.getColumnsWidth()+e.getScrollbarWidth():e.domNode.offsetWidth,f+=c;b++;for(var p=d,l=h-1;(e=this.views[l])&&b<=l;l--)c=this.getViewWidth(l),e.setSize(c,0),c=e.domNode.offsetWidth,p-=c,m(e,p);g<h&&(e=this.views[g],c=Math.max(1,p-f),e.setSize(c+"px",0),m(e,f));return f},
renderRow:function(f,d,b){for(var e=[],c=0,h,a;(h=this.views[c])&&(a=d[c]);c++)h=h.renderRow(f),a.appendChild(h),e.push(h);b||this.normalizeRowNodeHeights(e)},rowRemoved:function(f){this.onEach("rowRemoved",[f])},updateRow:function(f,d){for(var b=0,e;e=this.views[b];b++)e.updateRow(f);d||this.renormalizeRow(f)},updateRowStyles:function(f){this.onEach("updateRowStyles",[f])},setScrollTop:function(f){for(var d=f,b=0,e;e=this.views[b];b++)if(d=e.setScrollTop(f),j("ie")&&e.headerNode&&e.scrollboxNode)e.headerNode.scrollLeft=
e.scrollboxNode.scrollLeft;return d},getFirstScrollingView:function(){for(var f=0,d;d=this.views[f];f++)if(d.hasHScrollbar()||d.hasVScrollbar())return d;return null}})})},"dojox/grid/_RowManager":function(){define("dojox/grid/_RowManager",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(k,j,i){return k("dojox.grid._RowManager",null,{constructor:function(f){this.grid=f},linesToEms:2,overRow:-2,prepareStylingRow:function(f,d){return{index:f,node:d,odd:Boolean(f&1),selected:!!this.grid.selection.isSelected(f),
over:this.isOver(f),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(f,d){var b=this.prepareStylingRow(f,d);this.grid.onStyleRow(b);this.applyStyles(b)},applyStyles:function(f){f.node.className=f.customClasses;var d=f.node.style.height,b=f.node,e=f.customStyles+";"+(f.node._style||"");void 0==b.style.cssText?b.setAttribute("style",e):b.style.cssText=e;f.node.style.height=d},updateStyles:function(f){this.grid.updateRowStyles(f)},setOverRow:function(f){var d=this.overRow;this.overRow=
f;d!=this.overRow&&(j.isString(d)||0<=d)&&this.updateStyles(d);this.updateStyles(this.overRow)},isOver:function(f){return this.overRow==f&&!i.contains(this.grid.domNode,"dojoxGridColumnResizing")}})})},"dojox/grid/_FocusManager":function(){define("dojox/grid/_FocusManager","dojo/_base/array,dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,dojo/_base/event,dojo/_base/sniff,dojo/query,./util,dojo/_base/html".split(","),function(k,j,i,f,d,b,e,c,h){return i("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=
a;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(f.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(f.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(f.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(f.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(f.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));
this._connects.push(f.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(f.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(f.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(f.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){k.forEach(this._connects,f.disconnect);k.forEach(this._headerConnects,f.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,
_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:!1,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){return this.cell?this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1:!1},isFirstFocusCell:function(){return this.cell?0===
this.rowIndex&&0===this.cell.index:!1},isNoFocusCell:function(){return 0>this.rowIndex||!this.cell},isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?k.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var e=this.cell&&this.cell.getNode(this.rowIndex);if(e&&(h.toggleClass(e,this.focusClass,a),a)){a=this.scrollIntoView();try{if(b("webkit")||!this.grid.edit.isEditing())if(c.fire(e,"focus"),a)this.cell.view.scrollboxNode.scrollLeft=
a}catch(d){}}},_delayedCellFocus:function(){if(!this.isNavHeader()&&this.grid.focused){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a)try{this.grid.edit.isEditing()||(h.toggleClass(a,this.focusClass,!0),this._colHeadNode&&this.blurHeader(),c.fire(a,"focus"))}catch(b){}}},_delayedHeaderFocus:function(){this.isNavHeader()&&this.focusHeader()},_initColumnHeaders:function(){k.forEach(this._headerConnects,f.disconnect);this._headerConnects=[];for(var a=this._findHeaderCells(),b=0;b<a.length;b++)this._headerConnects.push(f.connect(a[b],
"onfocus",this,"doColHeaderFocus")),this._headerConnects.push(f.connect(a[b],"onblur",this,"doColHeaderBlur"))},_findHeaderCells:function(){for(var a=e("th",this.grid.viewsHeaderNode),b=[],c=0;c<a.length;c++){var d=a[c],f=h.hasAttr(d,"tabIndex"),u=h.attr(d,"tabIndex");f&&0>u&&b.push(d)}return b},_setActiveColHeader:function(a,b,c){this.grid.domNode.setAttribute("aria-activedescendant",a.id);null!=c&&0<=c&&c!=b&&h.toggleClass(this._findHeaderCells()[c],this.focusClass,!1);h.toggleClass(a,this.focusClass,
!0);this._colHeadNode=a;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);if(a.n&&a.sr)if(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w)a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-a.sr.w;else if(a.n.offsetLeft<a.sr.l)a.s.scrollLeft=a.n.offsetLeft;a.r&&a.sr&&(b+a.r.offsetHeight>a.sr.t+a.sr.h?this.grid.setScrollTop(b+a.r.offsetHeight-
a.sr.h):b<a.sr.t&&this.grid.setScrollTop(b));return a.s.scrollLeft},_scrollInfo:function(a,b){if(a){var c=a.view.scrollboxNode,e={w:c.clientWidth,l:c.scrollLeft,t:c.scrollTop,h:c.clientHeight},d=a.view.getRowNode(this.rowIndex);return{c:a,s:c,sr:e,n:b?b:a.getNode(this.rowIndex),r:d}}return null},_scrollHeader:function(a){var c=null;if(this._colHeadNode){var e=this.grid.getCell(a);if(!e)return;c=this._scrollInfo(e,e.getNode(0))}if(c&&c.s&&c.sr&&c.n)if(c.n.offsetLeft+c.n.offsetWidth>c.sr.l+c.sr.w)c.s.scrollLeft=
c.n.offsetLeft+c.n.offsetWidth-c.sr.w;else if(c.n.offsetLeft<c.sr.l)c.s.scrollLeft=c.n.offsetLeft;else if(7>=b("ie")&&e&&e.view.headerNode)e.view.headerNode.scrollLeft=c.s.scrollLeft},_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b=0,c;c=this.grid.views.views[b];b++)if(c.headerNode){a=c;break}return a&&"none"==h.getComputedStyle(a.headerNode).display},colSizeAdjust:function(a,b,c){var e=this._findHeaderCells(),d=this.focusView;if(!d||!d.header.tableMap.map)for(var h=0,f;f=this.grid.views.views[h];h++)if(f.header.tableMap.map){d=
f;break}h=e[b];if(d&&!(b==e.length-1&&0===b))d.content.baseDecorateEvent(a),a.cellNode=h,a.cellIndex=d.content.getCellNodeIndex(a.cellNode),a.cell=0<=a.cellIndex?this.grid.getCell(a.cellIndex):null,d.header.canResize(a)&&(b={l:c},a=d.header.colResizeSetup(a,!1),d.header.doResizeColumn(a,null,b),d.update())},styleRow:function(){},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,c){if(a&&!this.isFocusCell(a,c))this.tabbingOut=!1,this._colHeadNode&&this.blurHeader(),
this._colHeadNode=this._colHeadFocusIdx=null,this.focusGridView(),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=c,this._focusifyCellNode(!0);if(b("opera"))setTimeout(j.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=this.cell.index+1,c=this.grid.layout.cellCount-1,e=this.grid.rowCount-1;b>c&&(b=0,a++);a>e&&(b=c,a=e);if(this.grid.edit.isEditing()&&(c=this.grid.getCell(b),!this.isLastFocusCell()&&
(!c.editable||this.grid.canEdit&&!this.grid.canEdit(c,a)))){this.cell=c;this.rowIndex=a;this.next();return}this.setFocusIndex(a,b)}},previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;0>b&&(b=this.grid.layout.cellCount-1,a--);0>a&&(b=a=0);if(this.grid.edit.isEditing()){var c=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.previous();return}}this.setFocusIndex(a,b)}},move:function(a,b){var c=0>b?-1:1;if(this.isNavHeader()){var e=
this._findHeaderCells(),d=currentIdx=k.indexOf(e,this._colHeadNode);for(currentIdx+=b;0<=currentIdx&&currentIdx<e.length&&"none"==e[currentIdx].style.display;)currentIdx+=c;0<=currentIdx&&currentIdx<e.length&&this._setActiveColHeader(e[currentIdx],currentIdx,d)}else if(this.cell){var f=this.grid.scroller,e=this.rowIndex,d=this.grid.rowCount-1,r=Math.min(d,Math.max(0,e+a));a&&(0<a?r>f.getLastPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop+f.findScrollTop(r)-f.findScrollTop(e)):0>a&&r<=
f.getPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop-f.findScrollTop(e)-f.findScrollTop(r)));for(var f=this.grid.layout.cellCount-1,o=this.cell.index,n=Math.min(f,Math.max(0,o+b)),i=this.grid.getCell(n);0<=n&&n<f&&i&&!0===i.hidden;)n+=c,i=this.grid.getCell(n);if(!i||!0===i.hidden)n=o;c=i.getNode(r);!c&&a?0<=r+a&&r+a<=d&&this.move(0<a?++a:--a,b):(!c||"none"===h.style(c,"display"))&&b?0<=n+b&&n+b<=f&&this.move(a,0<b?++b:--b):(this.setFocusIndex(r,n),a&&this.grid.updateRow(e))}},previousKey:function(a){if(this.grid.edit.isEditing())d.stop(a),
this.previous();else if(!this.isNavHeader()&&!this._isHeaderHidden())this.grid.domNode.focus(),d.stop(a);else{this.tabOut(this.grid.domNode);if(null!=this._colHeadFocusIdx)h.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,!1),this._colHeadFocusIdx=null;this._focusifyCellNode(!1)}},nextKey:function(a){a.target===this.grid.domNode&&null==this._colHeadFocusIdx?(this.focusHeader(),d.stop(a)):this.isNavHeader()?(this.blurHeader(),this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode),
this._colHeadNode=this._colHeadFocusIdx=null):this.grid.edit.isEditing()?(d.stop(a),this.next()):this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=!0;a.focus()},focusGridView:function(){c.fire(this.focusView,"focus")},focusGrid:function(){this.focusGridView();this._focusifyCellNode(!0)},findAndFocusGridCell:function(){var a=!0,b=0===this.grid.rowCount;this.isNoFocusCell()&&!b?(b=0,this.grid.getCell(b).hidden&&(b=this.isNavHeader()?this._colHeadFocusIdx:0),this.setFocusIndex(0,
b)):this.cell&&!b?(this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex),this.focusGrid()):a=!1;this._colHeadNode=this._colHeadFocusIdx=null;return a},focusHeader:function(){var a=this._findHeaderCells(),b=this._colHeadFocusIdx;if(this._isHeaderHidden())this.findAndFocusGridCell();else if(!this._colHeadFocusIdx)this._colHeadFocusIdx=this.isNoFocusCell()?0:this.cell.index;for(this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&0<=this._colHeadFocusIdx&&
this._colHeadFocusIdx<a.length&&"none"==this._colHeadNode.style.display;)this._colHeadFocusIdx++,this._colHeadNode=a[this._colHeadFocusIdx];if(this._colHeadNode&&"none"!=this._colHeadNode.style.display){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode)this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode),this.headerMenu.bindDomNode(this.grid.domNode),this._contextMenuBindNode=this.grid.domNode;this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b);this._scrollHeader(this._colHeadFocusIdx);
this._focusifyCellNode(!1)}else this.findAndFocusGridCell()},blurHeader:function(){h.removeClass(this._colHeadNode,this.focusClass);h.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var a=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(a);this._contextMenuBindNode=a}},doFocus:function(a){if(a&&a.target!=a.currentTarget)d.stop(a);else if(!this._clickFocus)this.tabbingOut||
this.focusHeader(),this.tabbingOut=!1,d.stop(a)},doBlur:function(a){d.stop(a)},doContextMenu:function(a){this.headerMenu||d.stop(a)},doLastNodeFocus:function(a){this.tabbingOut?this._focusifyCellNode(!1):0<this.grid.rowCount?(this.isNoFocusCell()&&this.setFocusIndex(0,0),this._focusifyCellNode(!0)):this.focusHeader();this.tabbingOut=!1;d.stop(a)},doLastNodeBlur:function(a){d.stop(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,h.attr(a.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());
d.stop(a)},doColHeaderBlur:function(a){h.toggleClass(a.target,this.focusClass,!1)},_mouseDown:function(a){this._clickFocus=dojo.some(this.grid.views.views,function(b){return b.scrollboxNode===a.target})},_mouseUp:function(){this._clickFocus=!1}})})},"dojox/grid/_EditManager":function(){define("dojox/grid/_EditManager","dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/_base/connect,dojo/_base/sniff,./util".split(","),function(k,j,i,f,d,b){return i("dojox.grid._EditManager",null,{constructor:function(b){this.grid=
b;this.connections=d("ie")?[f.connect(document.body,"onfocus",k.hitch(this,"_boomerangFocus"))]:[f.connect(this.grid,"onBlur",this,"apply")]},info:{},destroy:function(){j.forEach(this.connections,f.disconnect)},cellFocus:function(b,c){this.grid.singleClickEdit||this.isEditRow(c)?this.setEditCell(b,c):this.apply();(this.isEditing()||b&&b.editable&&b.alwaysEditing)&&this._focusEditor(b,c)},rowClick:function(b){this.isEditing()&&!this.isEditRow(b.rowIndex)&&this.apply()},styleRow:function(b){b.index==
this.info.rowIndex&&(b.customClasses+=" dojoxGridRowEditing")},dispatchEvent:function(b){var c=b.cell;return(c=c&&c.editable?c:0)&&c.dispatchEvent(b.dispatch,b)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(b,c){return this.info.rowIndex===b&&this.info.cell.index==c},isEditRow:function(b){return this.info.rowIndex===b},setEditCell:function(b,c){!this.isEditCell(c,b.index)&&this.grid.canEdit&&this.grid.canEdit(b,c)&&this.start(b,c,this.isEditRow(c)||b.editable)},_focusEditor:function(e,
c){b.fire(e,"focus",[c])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang())this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0},_doCatchBoomerang:function(){if(d("ie"))this._catchBoomerang=(new Date).getTime()+this._boomerangWindow},start:function(b,c,d){if(this._isValidInput())this.grid.beginUpdate(),
this.editorApply(),this.isEditing()&&!this.isEditRow(c)&&(this.applyRowEdit(),this.grid.updateRow(c)),d?(this.info={cell:b,rowIndex:c},this.grid.doStartEdit(b,c),this.grid.updateRow(c)):this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._focusEditor(b,c),this._doCatchBoomerang()},_editorDo:function(b){var c=this.info.cell;if(c&&c.editable)c[b](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(b,
c,d){this.grid.canEdit(c,d)&&this.grid.doApplyCellEdit(b,d,c.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){if(this.isEditing()&&this._isValidInput())this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang()},cancel:function(){if(this.isEditing())this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),
this._doCatchBoomerang()},save:function(b,c){var d=this.info.cell;this.isEditRow(b)&&(!c||d.view==c)&&d.editable&&d.save(d,this.info.rowIndex)},restore:function(b,c){var d=this.info.cell;this.isEditRow(c)&&d.view==b&&d.editable&&d.restore(this.info.rowIndex)},_isValidInput:function(){var b=(this.info.cell||{}).widget;if(!b||!b.isValid)return!0;b.focused=!0;return b.isValid(!0)}})})},"dojox/grid/Selection":function(){define("dojox/grid/Selection",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang",
"dojo/dom-attr"],function(k,j,i,f){return k("dojox.grid.Selection",null,{constructor:function(d){this.grid=d;this.selected=[];this.setMode(d.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(d){this.selected.length&&this.deselectAll();this.mode="extended"!=d&&"multiple"!=d&&"single"!=d&&"none"!=d?"extended":d},onCanSelect:function(d){return this.grid.onCanSelect(d)},onCanDeselect:function(d){return this.grid.onCanDeselect(d)},onSelected:function(){},
onDeselected:function(){},onChanging:function(){},onChanged:function(){},isSelected:function(d){return"none"==this.mode?!1:this.selected[d]},getFirstSelected:function(){if(!this.selected.length||"none"==this.mode)return-1;for(var d=0,b=this.selected.length;d<b;d++)if(this.selected[d])return d;return-1},getNextSelected:function(d){if("none"==this.mode)return-1;for(var d=d+1,b=this.selected.length;d<b;d++)if(this.selected[d])return d;return-1},getSelected:function(){for(var d=[],b=0,e=this.selected.length;b<
e;b++)this.selected[b]&&d.push(b);return d},getSelectedCount:function(){for(var d=0,b=0;b<this.selected.length;b++)this.selected[b]&&d++;return d},_beginUpdate:function(){if(0===this.updating)this.onChanging();this.updating++},_endUpdate:function(){this.updating--;if(0===this.updating)this.onChanged()},select:function(d){"none"!=this.mode&&("multiple"!=this.mode?(this.deselectAll(d),this.addToSelection(d)):this.toggleSelect(d))},addToSelection:function(d){if("none"!=this.mode)if(i.isArray(d))j.forEach(d,
this.addToSelection,this);else if(d=Number(d),this.selected[d])this.selectedIndex=d;else if(!1!==this.onCanSelect(d)){this.selectedIndex=d;var b=this.grid.getRowNode(d);b&&f.set(b,"aria-selected","true");this._beginUpdate();this.selected[d]=!0;this.onSelected(d);this._endUpdate()}},deselect:function(d){if("none"!=this.mode)if(i.isArray(d))j.forEach(d,this.deselect,this);else{d=Number(d);if(this.selectedIndex==d)this.selectedIndex=-1;if(this.selected[d]&&!1!==this.onCanDeselect(d)){var b=this.grid.getRowNode(d);
b&&f.set(b,"aria-selected","false");this._beginUpdate();delete this.selected[d];this.onDeselected(d);this._endUpdate()}}},setSelected:function(d,b){this[b?"addToSelection":"deselect"](d)},toggleSelect:function(d){i.isArray(d)?j.forEach(d,this.toggleSelect,this):this.setSelected(d,!this.selected[d])},_range:function(d,b,e){var c=0<=d?d:b,d=b;c>d&&(d=c,c=b);for(b=c;b<=d;b++)e(b)},selectRange:function(d,b){this._range(d,b,i.hitch(this,"addToSelection"))},deselectRange:function(d,b){this._range(d,b,i.hitch(this,
"deselect"))},insert:function(d){this.selected.splice(d,0,!1);this.selectedIndex>=d&&this.selectedIndex++},remove:function(d){this.selected.splice(d,1);this.selectedIndex>=d&&this.selectedIndex--},deselectAll:function(d){for(var b in this.selected)b!=d&&!0===this.selected[b]&&this.deselect(b)},clickSelect:function(d,b,e){if("none"!=this.mode){this._beginUpdate();if("extended"!=this.mode)this.select(d);else{if(!e||0>this.rangeStartIndex)this.rangeStartIndex=d;b||this.deselectAll(d);e?this.selectRange(this.rangeStartIndex,
d):b?this.toggleSelect(d):this.addToSelection(d)}this._endUpdate()}},clickSelectEvent:function(d){this.clickSelect(d.rowIndex,dojo.isCopyKey(d),d.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})})},"url:dojox/grid/resources/_Grid.html":'<div hidefocus="hidefocus" role="grid" dojoAttachEvent="onmouseout:_mouseOut">\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" role="presentation"></div>\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" role="presentation"></div>\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\n</div>\n',
"dojox/grid/DataSelection":function(){define("dojox/grid/DataSelection",["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(k,j,i){return k("dojox.grid.DataSelection",i,{constructor:function(f){if(f.keepSelection)this.preserver=new j(this)},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var f=i.prototype.getFirstSelected.call(this);return-1==f?null:this.grid.getItem(f)},getNextSelected:function(f){f=this.grid.getItemIndex(f);f=i.prototype.getNextSelected.call(this,
f);return-1==f?null:this.grid.getItem(f)},getSelected:function(){for(var f=[],d=0,b=this.selected.length;d<b;d++)this.selected[d]&&f.push(this.grid.getItem(d));return f},addToSelection:function(f){if("none"!=this.mode){var d=null,d="number"==typeof f||"string"==typeof f?f:this.grid.getItemIndex(f);i.prototype.addToSelection.call(this,d)}},deselect:function(f){if("none"!=this.mode){var d=null,d="number"==typeof f||"string"==typeof f?f:this.grid.getItemIndex(f);i.prototype.deselect.call(this,d)}},deselectAll:function(f){var d=
null;f||"number"==typeof f?(d="number"==typeof f||"string"==typeof f?f:this.grid.getItemIndex(f),i.prototype.deselectAll.call(this,d)):this.inherited(arguments)}})})},"dojox/grid/_SelectionPreserver":function(){define("dojox/grid/_SelectionPreserver",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(k,j,i,f){return k("dojox.grid._SelectionPreserver",null,{constructor:function(d){this.selection=d;var b=this.grid=d.grid;this.reset();this._connects=[j.connect(b,
"_setStore",this,"reset"),j.connect(b,"_addItem",this,"_reSelectById"),j.connect(d,"onSelected",i.hitch(this,"_selectById",!0)),j.connect(d,"onDeselected",i.hitch(this,"_selectById",!1)),j.connect(d,"deselectAll",this,"reset")]},destroy:function(){this.reset();f.forEach(this._connects,j.disconnect);delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(d,b){d&&this.grid._hasIdentity&&(this.selection.selected[b]=this._selectedById[this.grid.store.getIdentity(d)])},_selectById:function(d,
b){if("none"!=this.selection.mode&&this.grid._hasIdentity){var e=b,c=this.grid;if("number"==typeof b||"string"==typeof b)e=(e=c._by_idx[b])&&e.item;e&&(this._selectedById[c.store.getIdentity(e)]=!!d);return e}}})})},"dojox/grid/enhanced/_PluginManager":function(){define("dojox/grid/enhanced/_PluginManager","dojo/_base/kernel,dojo/_base/lang,dojo/_base/declare,dojo/_base/array,dojo/_base/connect,./_Events,./_FocusManager,../util".split(","),function(k,j,i,f,d,b,e,c){var h=i("dojox.grid.enhanced._PluginManager",
null,{_options:null,_plugins:null,_connects:null,constructor:function(a){this.grid=a;this._store=a.store;this._options={};this._plugins=[];this._connects=[];this._parseProps(this.grid.plugins);a.connect(a,"_setStore",j.hitch(this,function(a){if(this._store!==a)this.forEach("onSetStore",[a,this._store]),this._store=a}))},startup:function(){this.forEach("onStartUp")},preInit:function(){this.grid.focus.destroy();this.grid.focus=new e(this.grid);new b(this.grid);this._init(!0);this.forEach("onPreInit")},
postInit:function(){this._init(!1);f.forEach(this.grid.views.views,this._initView,this);this._connects.push(d.connect(this.grid.views,"addView",j.hitch(this,this._initView)));if(0<this._plugins.length){var a=this.grid.edit;if(a)a.styleRow=function(){}}this.forEach("onPostInit")},forEach:function(a,b){f.forEach(this._plugins,function(c){c&&c[a]&&c[a].apply(c,b?b:[])})},_parseProps:function(a){if(a){var b,c={},e=this._options,d=this.grid,f=h.registry;for(b in a)a[b]&&this._normalize(b,a,f,c);if(e.dnd)e.columnReordering=
!1;j.mixin(d,e)}},_normalize:function(a,b,c,e){if(!c[a])throw Error("Plugin "+a+" is required.");if(e[a])throw Error("Recursive cycle dependency is not supported.");var d=this._options;if(d[a])return d[a];e[a]=!0;d[a]=j.mixin({},c[a],j.isObject(b[a])?b[a]:{});var h=d[a].dependency;if(h)j.isArray(h)||(h=d[a].dependency=[h]),f.forEach(h,function(a){if(!this._normalize(a,b,c,e))throw Error("Plugin "+a+" is required.");},this);delete e[a];return d[a]},_init:function(a){var b,c,e=this._options;for(b in e)c=
e[b].preInit,(a?c:!c)&&e[b]["class"]&&!this.pluginExisted(b)&&this.loadPlugin(b)},loadPlugin:function(a){var b=this._options[a];if(!b)return null;if(a=this.getPlugin(a))return a;f.forEach(b.dependency,function(a){if(!this.loadPlugin(a))throw Error("Plugin "+a+" is required.");},this);a=b["class"];delete b["class"];a=(new this.getPluginClazz(a))(this.grid,b);this._plugins.push(a);return a},_initView:function(a){a&&(c.funnelEvents(a.contentNode,a,"doContentEvent",["mouseup","mousemove"]),c.funnelEvents(a.headerNode,
a,"doHeaderEvent",["mouseup"]))},pluginExisted:function(a){return!!this.getPlugin(a)},getPlugin:function(a){for(var b=this._plugins,a=a.toLowerCase(),c=0,e=b.length;c<e;c++)if(a==b[c].name.toLowerCase())return b[c];return null},getPluginClazz:function(a){if(j.isFunction(a))return a;var b='Please make sure Plugin "'+a+'" is existed.';try{var c=j.getObject(a);if(!c)throw Error(b);return c}catch(e){throw Error(b);}},isFixedCell:function(a){return a&&(a.isRowSelector||a.fixedPos)},destroy:function(){f.forEach(this._connects,
d.disconnect);this.forEach("destroy");this.grid.unwrap&&this.grid.unwrap();delete this._connects;delete this._plugins;delete this._options}});h.registerPlugin=function(a,b){if(a){var c=h;c.registry=c.registry||{};c.registry[a.prototype.name]=j.mixin({"class":a},b?b:{})}else console.warn("Failed to register plugin, class missed!")};return h})},"dojox/grid/enhanced/_Events":function(){define("dojox/grid/enhanced/_Events","dojo/_base/kernel,dojo/_base/declare,dojo/keys,dojo/_base/html,dojo/_base/event,dojox/grid/_Events".split(","),
function(k,j,i,f,d,b){return j("dojox.grid.enhanced._Events",null,{_events:null,headerCellActiveClass:"dojoxGridHeaderActive",cellActiveClass:"dojoxGridCellActive",rowActiveClass:"dojoxGridRowActive",constructor:function(e){this._events=new b;e.mixin(e,this)},dokeyup:function(b){this.focus.currentArea().keyup(b)},onKeyDown:function(b){if(!b.altKey&&!b.metaKey){var c=this.focus,d=this.edit.isEditing();switch(b.keyCode){case i.TAB:if(b.ctrlKey)break;c.tab(b.shiftKey?-1:1,b);break;case i.UP_ARROW:case i.DOWN_ARROW:if(d)break;
c.currentArea().move(b.keyCode==i.UP_ARROW?-1:1,0,b);break;case i.LEFT_ARROW:case i.RIGHT_ARROW:if(d)break;d=b.keyCode==i.LEFT_ARROW?1:-1;f._isBodyLtr()&&(d*=-1);c.currentArea().move(0,d,b);break;case i.F10:if(this.menus&&b.shiftKey)this.onRowContextMenu(b);break;default:c.currentArea().keydown(b)}}},domouseup:function(b){if(b.cellNode)this.onMouseUp(b);else this.onRowSelectorMouseUp(b)},domousedown:function(b){if(!b.cellNode)this.onRowSelectorMouseDown(b)},onMouseUp:function(b){this[-1==b.rowIndex?
"onHeaderCellMouseUp":"onCellMouseUp"](b)},onCellMouseDown:function(b){f.addClass(b.cellNode,this.cellActiveClass);f.addClass(b.rowNode,this.rowActiveClass)},onCellMouseUp:function(b){f.removeClass(b.cellNode,this.cellActiveClass);f.removeClass(b.rowNode,this.rowActiveClass)},onCellClick:function(b){this._events.onCellClick.call(this,b);this.focus.contentMouseEvent(b)},onCellDblClick:function(b){if(!this.pluginMgr.isFixedCell(b.cell)){if(1<this._click.length&&(!this._click[0]||!this._click[1]))this._click[0]=
this._click[1]=b;this._events.onCellDblClick.call(this,b)}},onRowClick:function(b){this.edit.rowClick(b);(!b.cell||!this.plugin("indirectSelection"))&&this.selection.clickSelectEvent(b)},onRowContextMenu:function(b){!this.edit.isEditing()&&this.menus&&this.showMenu(b)},onSelectedRegionContextMenu:function(b){this.selectedRegionMenu&&(this.selectedRegionMenu._openMyself({target:b.target,coords:b.keyCode!==i.F10&&"pageX"in b?{x:b.pageX,y:b.pageY}:null}),d.stop(b))},onHeaderCellMouseOut:function(b){b.cellNode&&
(f.removeClass(b.cellNode,this.cellOverClass),f.removeClass(b.cellNode,this.headerCellActiveClass))},onHeaderCellMouseDown:function(b){b.cellNode&&f.addClass(b.cellNode,this.headerCellActiveClass)},onHeaderCellMouseUp:function(b){b.cellNode&&f.removeClass(b.cellNode,this.headerCellActiveClass)},onHeaderCellClick:function(b){this.focus.currentArea("header");b.cell.isRowSelector||this._events.onHeaderCellClick.call(this,b);this.focus.headerMouseEvent(b)},onRowSelectorMouseDown:function(b){this.focus.focusArea("rowHeader",
b)},onRowSelectorMouseUp:function(){},onMouseUpRow:function(b){if(-1!=b.rowIndex)this.onRowMouseUp(b)},onRowMouseUp:function(){}})})},"dojox/grid/enhanced/_FocusManager":function(){define("dojox/grid/enhanced/_FocusManager","dojo/_base/kernel,dojo/_base/lang,dojo/_base/declare,dojo/_base/array,dojo/_base/connect,dojo/_base/event,dojo/_base/sniff,dojo/_base/html,dojo/keys,dijit/a11y,dijit/focus,../_FocusManager".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m){var p=i("dojox.grid.enhanced._FocusArea",
null,{constructor:function(a,b){this._fm=b;this._evtStack=[a.name];var c=function(){return!0};a.onFocus=a.onFocus||c;a.onBlur=a.onBlur||c;a.onMove=a.onMove||c;a.onKeyUp=a.onKeyUp||c;a.onKeyDown=a.onKeyDown||c;j.mixin(this,a)},move:function(a,b,c){if(this.name){var d;for(d=this._evtStack.length-1;0<=d;--d)if(!1===this._fm._areas[this._evtStack[d]].onMove(a,b,c))return!1}return!0},_onKeyEvent:function(a,b){if(this.name){var c,d=this._evtStack.length;for(c=d-1;0<=c;--c)if(!1===this._fm._areas[this._evtStack[c]][b](a,
!1))return!1;for(c=0;c<d;++c)if(!1===this._fm._areas[this._evtStack[c]][b](a,!0))return!1}return!0},keydown:function(a){return this._onKeyEvent(a,"onKeyDown")},keyup:function(a){return this._onKeyEvent(a,"onKeyUp")},contentMouseEventPlanner:function(){return 0},headerMouseEventPlanner:function(){return 0}});return i("dojox.grid.enhanced._FocusManager",m,{_stopEvent:function(a){try{a&&a.preventDefault&&b.stop(a)}catch(c){}},constructor:function(a){this.grid=a;this._areas={};this._areaQueue=[];this._contentMouseEventHandlers=
[];this._headerMouseEventHandlers=[];this._currentAreaIdx=-1;this._gridBlured=!0;this._connects.push(d.connect(a,"onBlur",this,"_doBlur"));this._connects.push(d.connect(a.scroller,"renderPage",this,"_delayedCellFocus"));this.addArea({name:"header",onFocus:j.hitch(this,this.focusHeader),onBlur:j.hitch(this,this._blurHeader),onMove:j.hitch(this,this._navHeader),getRegions:j.hitch(this,this._findHeaderCells),onRegionFocus:j.hitch(this,this.doColHeaderFocus),onRegionBlur:j.hitch(this,this.doColHeaderBlur),
onKeyDown:j.hitch(this,this._onHeaderKeyDown)});this.addArea({name:"content",onFocus:j.hitch(this,this._focusContent),onBlur:j.hitch(this,this._blurContent),onMove:j.hitch(this,this._navContent),onKeyDown:j.hitch(this,this._onContentKeyDown)});this.addArea({name:"editableCell",onFocus:j.hitch(this,this._focusEditableCell),onBlur:j.hitch(this,this._blurEditableCell),onKeyDown:j.hitch(this,this._onEditableCellKeyDown),onContentMouseEvent:j.hitch(this,this._onEditableCellMouseEvent),contentMouseEventPlanner:function(){return-1}});
this.placeArea("header");this.placeArea("content");this.placeArea("editableCell");this.placeArea("editableCell","above","content")},destroy:function(){for(var a in this._areas){var b=this._areas[a];f.forEach(b._connects,d.disconnect);b._connects=null;b.uninitialize&&b.uninitialize()}this.inherited(arguments)},addArea:function(a){a.name&&j.isString(a.name)&&(this._areas[a.name]&&f.forEach(a._connects,d.disconnect),this._areas[a.name]=new p(a,this),a.onHeaderMouseEvent&&this._headerMouseEventHandlers.push(a.name),
a.onContentMouseEvent&&this._contentMouseEventHandlers.push(a.name))},getArea:function(a){return this._areas[a]},_bindAreaEvents:function(){var a,b,c=this._areas;f.forEach(this._areaQueue,function(e){a=c[e];if(!a._initialized&&j.isFunction(a.initialize))a.initialize(),a._initialized=!0;if(a.getRegions)a._regions=a.getRegions()||[],f.forEach(a._connects||[],d.disconnect),a._connects=[],f.forEach(a._regions,function(c){a.onRegionFocus&&(b=d.connect(c,"onfocus",a.onRegionFocus),a._connects.push(b));
a.onRegionBlur&&(b=d.connect(c,"onblur",a.onRegionBlur),a._connects.push(b))})})},removeArea:function(a){var b=this._areas[a];if(b){this.ignoreArea(a);var c=f.indexOf(this._contentMouseEventHandlers,a);0<=c&&this._contentMouseEventHandlers.splice(c,1);c=f.indexOf(this._headerMouseEventHandlers,a);0<=c&&this._headerMouseEventHandlers.splice(c,1);f.forEach(b._connects,d.disconnect);b.uninitialize&&b.uninitialize();delete this._areas[a]}},currentArea:function(a,b){var c,d=this._currentAreaIdx;if(j.isString(a)&&
0<=(c=f.indexOf(this._areaQueue,a))){if(d!=c){this.tabbingOut=!1;if(b&&0<=d&&d<this._areaQueue.length)this._areas[this._areaQueue[d]].onBlur();this._currentAreaIdx=c}}else return 0>d||d>=this._areaQueue.length?new p({},this):this._areas[this._areaQueue[this._currentAreaIdx]];return null},placeArea:function(a,b,c){if(this._areas[a]){var d=f.indexOf(this._areaQueue,c);switch(b){case "after":0<=d&&++d;case "before":if(0<=d){this._areaQueue.splice(d,0,a);break}default:this._areaQueue.push(a);break;case "above":var e=
!0;case "below":(b=this._areas[c])&&(e?b._evtStack.push(a):b._evtStack.splice(0,0,a))}}},ignoreArea:function(a){this._areaQueue=f.filter(this._areaQueue,function(b){return b!=a})},focusArea:function(a,b){var c;c="number"==typeof a?0>a?this._areaQueue.length+a:a:f.indexOf(this._areaQueue,j.isString(a)?a:a&&a.name);0>c&&(c=0);c-=this._currentAreaIdx;this._gridBlured=!1;if(c)this.tab(c,b);else this.currentArea().onFocus(b,c)},tab:function(a,b){this.tabbingOut=this._gridBlured=!1;if(0!==a){var c=this._currentAreaIdx,
d=0<a?1:-1;if(0>c||c>=this._areaQueue.length)c=this._currentAreaIdx+=a;else{var e=this._areas[this._areaQueue[c]].onBlur(b,a);if(!0===e)c=this._currentAreaIdx+=a;else if(j.isString(e)&&this._areas[e])c=this._currentAreaIdx=f.indexOf(this._areaQueue,e)}for(;0<=c&&c<this._areaQueue.length;c+=d)if(this._currentAreaIdx=c,this._areaQueue[c]&&this._areas[this._areaQueue[c]].onFocus(b,a))return;this.tabbingOut=!0;0>a?(this._currentAreaIdx=-1,g.focus(this.grid.domNode)):(this._currentAreaIdx=this._areaQueue.length,
g.focus(this.grid.lastFocusNode))}},_onMouseEvent:function(a,b){for(var c=a.toLowerCase(),d=this["_"+c+"MouseEventHandlers"],e=f.map(d,function(a){return{area:a,idx:this._areas[a][c+"MouseEventPlanner"](b,d)}},this).sort(function(a,b){return b.idx-a.idx}),g=f.map(e,function(){return e.area}),h=e.length;0<=--h&&!(!1===this._areas[e[h].area]["on"+a+"MouseEvent"](b,g)););},contentMouseEvent:function(a){this._onMouseEvent("Content",a)},headerMouseEvent:function(a){this._onMouseEvent("Header",a)},initFocusView:function(){this.focusView=
this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._bindAreaEvents()},isNavHeader:function(){return"header"==this._areaQueue[this._currentAreaIdx]},previousKey:function(a){this.tab(-1,a)},nextKey:function(a){this.tab(1,a)},setFocusCell:function(a,b){if(a)this.currentArea(this.grid.edit.isEditing()?"editableCell":"content",!0),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=b,this._focusifyCellNode(!0);this.grid.onCellFocus(this.cell,this.rowIndex)},doFocus:function(a){if(a&&
a.target==a.currentTarget&&!this.tabbingOut){if(this._gridBlured)this._gridBlured=!1,0>this._currentAreaIdx||this._currentAreaIdx>=this._areaQueue.length?this.focusArea(0,a):this.focusArea(this._currentAreaIdx,a)}else this.tabbingOut=!1;b.stop(a)},_doBlur:function(){this._gridBlured=!0},doLastNodeFocus:function(a){this.tabbingOut?this.tabbingOut=!1:this.focusArea(-1,a)},_delayedHeaderFocus:function(){this.isNavHeader()&&!e("ie")&&this.focusHeader()},_delayedCellFocus:function(){},_changeMenuBindNode:function(a,
b){var c=this.grid.headerMenu;if(c&&this._contextMenuBindNode==a)c.unBindDomNode(a),c.bindDomNode(b),this._contextMenuBindNode=b},focusHeader:function(a,b){var d=!1;this.inherited(arguments);this._colHeadNode&&"none"!=c.style(this._colHeadNode,"display")&&(g.focus(this._colHeadNode),this._stopEvent(a),d=!0);return d},_blurHeader:function(){this._colHeadNode&&c.removeClass(this._colHeadNode,this.focusClass);c.removeAttr(this.grid.domNode,"aria-activedescendant");this._changeMenuBindNode(this.grid.domNode,
this.grid.viewsHeaderNode);this._colHeadNode=this._colHeadFocusIdx=null;return!0},_navHeader:function(a,b,c){var d=0>b?-1:1,e=f.indexOf(this._findHeaderCells(),this._colHeadNode);0<=e&&c.shiftKey&&c.ctrlKey?this.colSizeAdjust(c,e,5*d):this.move(a,b)},_onHeaderKeyDown:function(a,c){if(c)switch(a.keyCode){case h.ENTER:case h.SPACE:var d=this.getHeaderIndex();0<=d&&!this.grid.pluginMgr.isFixedCell(a.cell)&&(this.grid.setSortIndex(d,null,a),b.stop(a))}return!0},_setActiveColHeader:function(){this.inherited(arguments);
g.focus(this._colHeadNode)},findAndFocusGridCell:function(){this._focusContent()},_focusContent:function(a){var b=!0,c=0===this.grid.rowCount;if(this.isNoFocusCell()&&!c){for(var c=0,d=this.grid.getCell(0);d&&d.hidden;d=this.grid.getCell(++c));this.setFocusIndex(0,d?c:0)}else this.cell&&!c?this.focusView&&!this.focusView.rowNodes[this.rowIndex]?(this.grid.scrollToRow(this.rowIndex),this.focusGrid()):this.setFocusIndex(this.rowIndex,this.cell.index):b=!1;b&&this._stopEvent(a);return b},_blurContent:function(){this._focusifyCellNode(!1);
return!0},_navContent:function(a,c,d){if(!(0===this.rowIndex&&0>a||this.rowIndex===this.grid.rowCount-1&&0<a))this._colHeadNode=null,this.move(a,c,d),d&&b.stop(d)},_onContentKeyDown:function(a,c){if(c){var e=this.grid.scroller;switch(a.keyCode){case h.ENTER:case h.SPACE:e=this.grid;if(e.indirectSelection)break;e.selection.clickSelect(this.rowIndex,d.isCopyKey(a),a.shiftKey);e.onRowClick(a);b.stop(a);break;case h.PAGE_UP:0!==this.rowIndex&&(this.rowIndex!=e.firstVisibleRow+1?this._navContent(e.firstVisibleRow-
this.rowIndex,0):(this.grid.setScrollTop(e.findScrollTop(this.rowIndex-1)),this._navContent(e.firstVisibleRow-e.lastVisibleRow+1,0)),b.stop(a));break;case h.PAGE_DOWN:this.rowIndex+1!=this.grid.rowCount&&(b.stop(a),this.rowIndex!=e.lastVisibleRow-1?this._navContent(e.lastVisibleRow-this.rowIndex-1,0):(this.grid.setScrollTop(e.findScrollTop(this.rowIndex+1)),this._navContent(e.lastVisibleRow-e.firstVisibleRow-1,0)),b.stop(a))}}return!0},_blurFromEditableCell:!1,_isNavigating:!1,_navElems:null,_focusEditableCell:function(a,
b){var c=!1;if(this._isNavigating)c=!0;else if(this.grid.edit.isEditing()&&this.cell){if(this._blurFromEditableCell||!this._blurEditableCell(a,b))this.setFocusIndex(this.rowIndex,this.cell.index),c=!0;this._stopEvent(a)}return c},_applyEditableCell:function(){try{this.grid.edit.apply()}catch(a){console.warn("_FocusManager._applyEditableCell() error:",a)}},_blurEditableCell:function(a,b){this._blurFromEditableCell=!1;if(this._isNavigating){var d=!0;if(a)var g=this._navElems,d=g.lowest||g.first,g=g.last||
g.highest||d,d=(e("ie")?a.srcElement:a.target)==(0<b?g:d);return d?(this._isNavigating=!1,c.setSelectable(this.cell.getNode(this.rowIndex),!1),"content"):!1}if(this.grid.edit.isEditing()&&this.cell){if(!b||"number"!=typeof b)return!1;for(var d=0<b?1:-1,g=this.grid.layout.cellCount,f,h=this.cell.index+d;0<=h&&h<g;h+=d)if(f=this.grid.getCell(h),f.editable)return this.cell=f,this._blurFromEditableCell=!0,!1;if((0<this.rowIndex||1==d)&&(this.rowIndex<this.grid.rowCount||-1==d)){this.rowIndex+=d;for(h=
0<d?0:g-1;0<=h&&h<g;h+=d)if(f=this.grid.getCell(h),f.editable){this.cell=f;break}this._applyEditableCell();return"content"}}return!0},_initNavigatableElems:function(){this._navElems=a._getTabNavigable(this.cell.getNode(this.rowIndex))},_onEditableCellKeyDown:function(a,d){var e=this.grid,f=e.edit,n=!1,p=!0;switch(a.keyCode){case h.ENTER:d&&f.isEditing()&&(this._applyEditableCell(),n=!0,b.stop(a));case h.SPACE:if(!d&&this._isNavigating){p=!1;break}if(d){if(!this.cell.editable&&this.cell.navigatable){this._initNavigatableElems();
var q=this._navElems.lowest||this._navElems.first;if(q){this._isNavigating=!0;c.setSelectable(this.cell.getNode(this.rowIndex),!0);g.focus(q);b.stop(a);this.currentArea("editableCell",!0);break}}!n&&!f.isEditing()&&!e.pluginMgr.isFixedCell(this.cell)&&f.setEditCell(this.cell,this.rowIndex);n?this.currentArea("content",!0):this.cell.editable&&e.canEdit()&&this.currentArea("editableCell",!0)}break;case h.PAGE_UP:case h.PAGE_DOWN:!d&&f.isEditing()&&(p=!1);break;case h.ESCAPE:d||(f.cancel(),this.currentArea("content",
!0))}return p},_onEditableCellMouseEvent:function(a){if("click"==a.type){var b=this.cell||a.cell;if(b&&!b.editable&&b.navigatable){if(this._initNavigatableElems(),this._navElems.lowest||this._navElems.first){var d=e("ie")?a.srcElement:a.target;if(d!=b.getNode(a.rowIndex))return this._isNavigating=!0,this.focusArea("editableCell",a),c.setSelectable(b.getNode(a.rowIndex),!0),g.focus(d),!1}}else if(this.grid.singleClickEdit)return this.currentArea("editableCell"),!1}return!0}})})},"dojox/grid/enhanced/plugins/_SelectionPreserver":function(){define("dojox/grid/enhanced/plugins/_SelectionPreserver",
["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","../../_SelectionPreserver"],function(k,j,i,f){return k("dojox.grid.enhanced.plugins._SelectionPreserver",f,{constructor:function(d){var b=this.grid;b.onSelectedById=this.onSelectedById;this._oldClearData=b._clearData;var e=this;b._clearData=function(){e._updateMapping(!b._noInternalMapping);e._trustSelection=[];e._oldClearData.apply(b,arguments)};this._connects.push(i.connect(d,"selectRange",j.hitch(this,"_updateMapping",!0,!0,!1)),i.connect(d,
"deselectRange",j.hitch(this,"_updateMapping",!0,!1,!1)),i.connect(d,"deselectAll",j.hitch(this,"_updateMapping",!0,!1,!0)))},destroy:function(){this.inherited(arguments);this.grid._clearData=this._oldClearData},reset:function(){this.inherited(arguments);this._idMap=[];this._trustSelection=[];this._defaultSelected=!1},_reSelectById:function(d,b){var e=this.selection,c=this.grid;if(d&&c._hasIdentity){var f=c.store.getIdentity(d);if(void 0===this._selectedById[f]){if(!this._trustSelection[b])e.selected[b]=
this._defaultSelected}else e.selected[b]=this._selectedById[f];this._idMap.push(f);c.onSelectedById(f,b,e.selected[b])}},_selectById:function(d,b){this.inherited(arguments)||(this._trustSelection[b]=!0)},onSelectedById:function(){},_updateMapping:function(d,b,e,c,f){var a=this.selection,g=this.grid,m=0,p=0,l,i;for(l=g.rowCount-1;0<=l;--l)if(g._by_idx[l]){if((i=g._by_idx[l].idty)&&(d||void 0===this._selectedById[i]))this._selectedById[i]=!!a.selected[l]}else++p,m+=a.selected[l]?1:-1;if(p)this._defaultSelected=
0<m;!e&&void 0!==c&&void 0!==f&&(e=!g.usingPagination&&Math.abs(f-c+1)===g.rowCount);if(e&&(!g.usingPagination||"single"===g.selectionMode))for(l=this._idMap.length-1;0<=l;--l)this._selectedById[this._idMap[l]]=b}})})},"dojox/grid/enhanced/plugins/IndirectSelection":function(){define("dojox/grid/enhanced/plugins/IndirectSelection","dojo/_base/declare,dojo/_base/array,dojo/_base/event,dojo/_base/lang,dojo/_base/html,dojo/_base/window,dojo/_base/connect,dojo/_base/sniff,dojo/query,dojo/keys,dojo/string,../_Plugin,../../EnhancedGrid,../../cells/dijit".split(","),
function(k,j,i,f,d,b,e,c,h,a,g,m,p){var l=f.getObject("dojox.grid.cells"),l=k("dojox.grid.cells.RowSelector",l._Widget,{inputType:"",map:null,disabledMap:null,isRowSelector:!0,_connects:null,_subscribes:null,checkedText:"&#10003;",unCheckedText:"O",constructor:function(){this.map={};this.disabledMap={};this.disabledCount=0;this._connects=[];this._subscribes=[];this.inA11YMode=d.hasClass(b.body(),"dijit_a11y");this.baseClass="dojoxGridRowSelector dijitReset dijitInline dijit"+this.inputType;this.checkedClass=
" dijit"+this.inputType+"Checked";this.disabledClass=" dijit"+this.inputType+"Disabled";this.checkedDisabledClass=" dijit"+this.inputType+"CheckedDisabled";this.statusTextClass=" dojoxGridRowSelectorStatusText";this._connects.push(e.connect(this.grid,"dokeyup",this,"_dokeyup"));this._connects.push(e.connect(this.grid.selection,"onSelected",this,"_onSelected"));this._connects.push(e.connect(this.grid.selection,"onDeselected",this,"_onDeselected"));this._connects.push(e.connect(this.grid.scroller,"invalidatePageNode",
this,"_pageDestroyed"));this._connects.push(e.connect(this.grid,"onCellClick",this,"_onClick"));this._connects.push(e.connect(this.grid,"updateRow",this,"_onUpdateRow"))},formatter:function(a,b,c){var a=c.baseClass,d=!!c.getValue(b),e=!!c.disabledMap[b];d?(a+=c.checkedClass,e&&(a+=c.checkedDisabledClass)):e&&(a+=c.disabledClass);return["<div tabindex = -1 ","id = '"+c.grid.id+"_rowSelector_"+b+"' ","name = '"+c.grid.id+"_rowSelector' class = '"+a+"' ","role = "+c.inputType+" aria-checked = '"+d+"' aria-disabled = '"+
e+"' aria-label = '"+g.substitute(c.grid._nls["indirectSelection"+c.inputType],[b+1])+"'>","<span class = '"+c.statusTextClass+"'>"+(d?c.checkedText:c.unCheckedText)+"</span>","</div>"].join("")},setValue:function(){},getValue:function(a){return this.grid.selection.isSelected(a)},toggleRow:function(a,b){this._nativeSelect(a,b)},setDisabled:function(a,b){0>a||this._toggleDisabledStyle(a,b)},disabled:function(a){return!!this.disabledMap[a]},_onClick:function(a){a.cell===this&&this._selectRow(a)},_dokeyup:function(b){b.cellIndex==
this.index&&0<=b.rowIndex&&b.keyCode==a.SPACE&&this._selectRow(b)},focus:function(a){(a=this.map[a])&&a.focus()},_focusEndingCell:function(a,b){this.grid.focus.setFocusCell(this.grid.getCell(b),a)},_nativeSelect:function(a,b){this.grid.selection[b?"select":"deselect"](a)},_onSelected:function(a){this._toggleCheckedStyle(a,!0)},_onDeselected:function(a){this._toggleCheckedStyle(a,!1)},_onUpdateRow:function(a){delete this.map[a]},_toggleCheckedStyle:function(a,b){var c=this._getSelector(a);if(c&&(d.toggleClass(c,
this.checkedClass,b),this.disabledMap[a]&&d.toggleClass(c,this.checkedDisabledClass,b),c.setAttribute("aria-checked",b),this.inA11YMode))c.firstChild.innerHTML=b?this.checkedText:this.unCheckedText},_toggleDisabledStyle:function(a,b){var c=this._getSelector(a);c&&(d.toggleClass(c,this.disabledClass,b),this.getValue(a)&&d.toggleClass(c,this.checkedDisabledClass,b),c.setAttribute("aria-disabled",b));this.disabledMap[a]=b;0<=a&&(this.disabledCount+=b?1:-1)},_getSelector:function(a){var b=this.map[a];
if(!b){var c=this.view.rowNodes[a];c&&(b=h(".dojoxGridRowSelector",c)[0])&&(this.map[a]=b)}return b},_pageDestroyed:function(a){for(var b=this.grid.scroller.rowsPerPage,a=a*b,b=a+b-1;a<=b;a++)this.map[a]&&(d.destroy(this.map[a]),delete this.map[a])},destroy:function(){for(var a in this.map)d.destroy(this.map[a]),delete this.map[a];for(a in this.disabledMap)delete this.disabledMap[a];j.forEach(this._connects,e.disconnect);j.forEach(this._subscribes,e.unsubscribe);delete this._connects;delete this._subscribes}}),
u=k("dojox.grid.cells.SingleRowSelector",l,{inputType:"Radio",_selectRow:function(a){var b=a.rowIndex;this.disabledMap[b]||(this._focusEndingCell(b,a.cellIndex),this._nativeSelect(b,!this.grid.selection.selected[b]))}}),r=k("dojox.grid.cells.MultipleRowSelector",l,{inputType:"CheckBox",swipeStartRowIndex:-1,swipeMinRowIndex:-1,swipeMaxRowIndex:-1,toSelect:!1,lastClickRowIdx:-1,unCheckedText:"&#9633;",constructor:function(){this._connects.push(e.connect(b.doc,"onmouseup",this,"_domouseup"));this._connects.push(e.connect(this.grid,
"onRowMouseOver",this,"_onRowMouseOver"));this._connects.push(e.connect(this.grid.focus,"move",this,"_swipeByKey"));this._connects.push(e.connect(this.grid,"onCellMouseDown",this,"_onMouseDown"));this.headerSelector&&(this._connects.push(e.connect(this.grid.views,"render",this,"_addHeaderSelector")),this._connects.push(e.connect(this.grid,"_onFetchComplete",this,"_addHeaderSelector")),this._connects.push(e.connect(this.grid,"onSelectionChanged",this,"_onSelectionChanged")),this._connects.push(e.connect(this.grid,
"onKeyDown",this,function(b){-1==b.rowIndex&&b.cellIndex==this.index&&b.keyCode==a.SPACE&&this._toggletHeader()})))},toggleAllSelection:function(a){var b=this.grid,c=b.selection;a?c.selectRange(0,b.rowCount-1):c.deselectAll()},_onMouseDown:function(a){a.cell==this&&(this._startSelection(a.rowIndex),i.stop(a))},_onRowMouseOver:function(a){this._updateSelection(a,0)},_domouseup:function(a){c("ie")&&this.view.content.decorateEvent(a);0<=a.cellIndex&&this.inSwipeSelection()&&!this.grid.edit.isEditRow(a.rowIndex)&&
this._focusEndingCell(a.rowIndex,a.cellIndex);this._finishSelect()},_dokeyup:function(a){this.inherited(arguments);a.shiftKey||this._finishSelect()},_startSelection:function(a){this.swipeStartRowIndex=this.swipeMinRowIndex=this.swipeMaxRowIndex=a;this.toSelect=!this.getValue(a)},_updateSelection:function(a,b){if(this.inSwipeSelection()){var c=0!==b,d=a.rowIndex,e=d-this.swipeStartRowIndex+b;if(0<e&&this.swipeMaxRowIndex<d+b)this.swipeMaxRowIndex=d+b;if(0>e&&this.swipeMinRowIndex>d+b)this.swipeMinRowIndex=
d+b;for(var g=0<e?this.swipeStartRowIndex:d+b,d=0<e?d+b:this.swipeStartRowIndex,e=this.swipeMinRowIndex;e<=this.swipeMaxRowIndex;e++)this.disabledMap[e]||0>e||(e>=g&&e<=d?this._nativeSelect(e,this.toSelect):c||this._nativeSelect(e,!this.toSelect))}},_swipeByKey:function(a,b,c){if(c&&!(0===a||!c.shiftKey||c.cellIndex!=this.index||0>this.grid.focus.rowIndex)){b=c.rowIndex;if(0>this.swipeStartRowIndex)this.swipeStartRowIndex=b,0<a?(this.swipeMaxRowIndex=b+a,this.swipeMinRowIndex=b):(this.swipeMinRowIndex=
b+a,this.swipeMaxRowIndex=b),this.toSelect=this.getValue(b);this._updateSelection(c,a)}},_finishSelect:function(){this.swipeMaxRowIndex=this.swipeMinRowIndex=this.swipeStartRowIndex=-1;this.toSelect=!1},inSwipeSelection:function(){return 0<=this.swipeStartRowIndex},_nativeSelect:function(a,b){this.grid.selection[b?"addToSelection":"deselect"](a)},_selectRow:function(a){var b=a.rowIndex;if(!this.disabledMap[b]){i.stop(a);this._focusEndingCell(b,a.cellIndex);var c=b-this.lastClickRowIdx,d=!this.grid.selection.selected[b];
if(0<=this.lastClickRowIdx&&!a.ctrlKey&&!a.altKey&&a.shiftKey){a=0<c?b:this.lastClickRowIdx;for(c=0<c?this.lastClickRowIdx:b;0<=c&&c<=a;c++)this._nativeSelect(c,d)}else this._nativeSelect(b,d);this.lastClickRowIdx=b}},getValue:function(a){if(-1==a){var b=this.grid;return 0<b.rowCount&&b.rowCount<=b.selection.getSelectedCount()}return this.inherited(arguments)},_addHeaderSelector:function(){var a=this.view.getHeaderCellNode(this.index);if(a){d.empty(a);var b=this.grid,a=a.appendChild(d.create("div",
{"aria-label":b._nls.selectAll,tabindex:-1,id:b.id+"_rowSelector_-1","class":this.baseClass,role:"Checkbox",innerHTML:"<span class = '"+this.statusTextClass+"'></span><span style='height: 0; width: 0; overflow: hidden; display: block;'>"+b._nls.selectAll+"</span>"}));this.map[-1]=a;b=this._headerSelectorConnectIdx;void 0!==b&&(e.disconnect(this._connects[b]),this._connects.splice(b,1));this._headerSelectorConnectIdx=this._connects.length;this._connects.push(e.connect(a,"onclick",this,"_toggletHeader"));
this._onSelectionChanged()}},_toggletHeader:function(){if(!this.disabledMap[-1])this.grid._selectingRange=!0,this.toggleAllSelection(!this.getValue(-1)),this._onSelectionChanged(),this.grid._selectingRange=!1},_onSelectionChanged:function(){var a=this.grid;if(this.map[-1]&&!a._selectingRange)a.allItemsSelected=this.getValue(-1),this._toggleCheckedStyle(-1,a.allItemsSelected)},_toggleDisabledStyle:function(a,b){this.inherited(arguments);if(this.headerSelector){var c=this.grid.rowCount==this.disabledCount;
c!=!!this.disabledMap[-1]&&(arguments[0]=-1,arguments[1]=c,this.inherited(arguments))}}}),k=k("dojox.grid.enhanced.plugins.IndirectSelection",m,{name:"indirectSelection",constructor:function(){var a=this.grid.layout;this.connect(a,"setStructure",f.hitch(a,this.addRowSelectCell,this.option))},addRowSelectCell:function(a){if(this.grid.indirectSelection&&"none"!=this.grid.selectionMode){var b=!1,c=["get","formatter","field","fields"],d={type:r,name:"",width:"30px",styles:"text-align: center;"};if(a.headerSelector)a.name=
"";this.grid.rowSelectCell&&this.grid.rowSelectCell.destroy();j.forEach(this.structure,function(e){var g=e.cells;if(g&&0<g.length&&!b){e=g[0];if(!e[0]||!e[0].isRowSelector){var h;h=f.mixin(d,a,{type:"single"==this.grid.selectionMode?u:r,editable:!1,notselectable:!0,filterable:!1,navigatable:!0,nosort:!0});j.forEach(c,function(a){a in h&&delete h[a]});if(1<g.length)h.rowSpan=g.length;j.forEach(this.cells,function(a,b){0<=a.index?a.index+=1:console.warn("Error:IndirectSelection.addRowSelectCell()-  cell "+
b+" has no index!")});g=this.addCellDef(0,0,h);g.index=0;e.unshift(g);this.cells.unshift(g);this.grid.rowSelectCell=g}b=!0}},this);this.cellCount=this.cells.length}},destroy:function(){this.grid.rowSelectCell.destroy();delete this.grid.rowSelectCell;this.inherited(arguments)}});p.registerPlugin(k,{preInit:!0});return k})},"dojox/grid/enhanced/_Plugin":function(){define("dojox/grid/enhanced/_Plugin","dojo/_base/kernel,dojo/_base/lang,dojo/_base/declare,dojo/_base/array,dojo/_base/connect,../EnhancedGrid".split(","),
function(k,j,i,f,d){return i("dojox.grid.enhanced._Plugin",null,{name:"plugin",grid:null,option:{},_connects:[],_subscribes:[],privates:{},constructor:function(b,d){this.grid=b;this.option=d;this._connects=[];this._subscribes=[];this.privates=j.mixin({},dojox.grid.enhanced._Plugin.prototype);this.init()},init:function(){},onPreInit:function(){},onPostInit:function(){},onStartUp:function(){},connect:function(b,e,c){b=d.connect(b,e,this,c);this._connects.push(b);return b},disconnect:function(b){f.some(this._connects,
function(e,c,f){return e==b?(d.disconnect(b),f.splice(c,1),!0):!1})},subscribe:function(b,e){var c=d.subscribe(b,this,e);this._subscribes.push(c);return c},unsubscribe:function(b){f.some(this._subscribes,function(e,c,f){return e==b?(d.unsubscribe(b),f.splice(c,1),!0):!1})},onSetStore:function(){},destroy:function(){f.forEach(this._connects,d.disconnect);f.forEach(this._subscribes,d.unsubscribe);delete this._connects;delete this._subscribes;delete this.option;delete this.privates}})})},"dojox/grid/cells/dijit":function(){define("dojox/grid/cells/dijit",
"dojo/_base/kernel,../../main,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/json,dojo/_base/connect,dojo/_base/sniff,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-style,dojo/dom-geometry,dojo/data/ItemFileReadStore,dijit/form/DateTextBox,dijit/form/TimeTextBox,dijit/form/ComboBox,dijit/form/CheckBox,dijit/form/TextBox,dijit/form/NumberSpinner,dijit/form/NumberTextBox,dijit/form/CurrencyTextBox,dijit/form/HorizontalSlider,dijit/form/_TextBoxMixin,dijit/Editor,../util,./_base".split(","),
function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,o,n,z,q,t,v,A,s,C,w,E){var D=i("dojox.grid.cells._Widget",E,{widgetClass:z,constructor:function(){this.widget=null;if("string"==typeof this.widgetClass)k.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0"),this.widgetClass=d.getObject(this.widgetClass)},formatEditing:function(a,b){this.needFormatNode(a,b);return"<div></div>"},getValue:function(){return this.widget.get("value")},_unescapeHTML:function(a){return a&&
a.replace&&this.grid.escapeHTMLInData?a.replace(/&lt;/g,"<").replace(/&amp;/g,"&"):a},setValue:function(a,b){if(this.widget&&this.widget.set)if(b=this._unescapeHTML(b),this.widget.onLoadDeferred){var c=this;this.widget.onLoadDeferred.addCallback(function(){c.widget.set("value",null===b?"":b)})}else this.widget.set("value",b);else this.inherited(arguments)},getWidgetProps:function(a){return d.mixin({dir:this.dir,lang:this.lang},this.widgetProps||{},{constraints:d.mixin({},this.constraint)||{},required:(this.constraint||
{}).required,value:this._unescapeHTML(a)})},createWidget:function(a,b){return new this.widgetClass(this.getWidgetProps(b),a)},attachWidget:function(a,b,c){a.appendChild(this.widget.domNode);this.setValue(c,b)},formatNode:function(a,b,c){if(!this.widgetClass)return b;this.widget?this.attachWidget.apply(this,arguments):this.widget=this.createWidget.apply(this,arguments);this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(c);this.grid.scroller.rowHeightChanged(c,!0);this.focus()},sizeWidget:function(a,
b,c){a=this.getNode(c);k.marginBox(this.widget.domNode,{w:m.get(a,"width")})},focus:function(){this.widget&&setTimeout(d.hitch(this.widget,function(){w.fire(this,"focus");this.focusNode&&"INPUT"===this.focusNode.tagName&&s.selectInputText(this.focusNode)}),0)},_finish:function(a){this.inherited(arguments);w.removeNode(this.widget.domNode);c("ie")&&h.setSelectable(this.widget.domNode,!0)}});D.markupFactory=function(c,e){E.markupFactory(c,e);var g=d.trim(a.get(c,"widgetProps")||""),f=d.trim(a.get(c,
"constraint")||""),h=d.trim(a.get(c,"widgetClass")||"");if(g)e.widgetProps=b.fromJson(g);if(f)e.constraint=b.fromJson(f);if(h)e.widgetClass=d.getObject(h)};o=i("dojox.grid.cells.ComboBox",D,{widgetClass:o,getWidgetProps:function(a){var b=[];f.forEach(this.options,function(a){b.push({name:a,value:a})});var c=new l({data:{identifier:"name",items:b}});return d.mixin({},this.widgetProps||{},{value:a,store:c})},getValue:function(){var a=this.widget;a.set("displayedValue",a.get("displayedValue"));return a.get("value")}});
o.markupFactory=function(b,c){D.markupFactory(b,c);var e=d.trim(a.get(b,"options")||"");if(e){var g=e.split(",");if(g[0]!=e)c.options=g}};u=i("dojox.grid.cells.DateTextBox",D,{widgetClass:u,setValue:function(a,b){this.widget?this.widget.set("value",new Date(b)):this.inherited(arguments)},getWidgetProps:function(a){return d.mixin(this.inherited(arguments),{value:new Date(a)})}});u.markupFactory=function(a,b){D.markupFactory(a,b)};n=i("dojox.grid.cells.CheckBox",D,{widgetClass:n,getValue:function(){return this.widget.checked},
setValue:function(a,b){this.widget&&this.widget.attributeMap.checked?this.widget.set("checked",b):this.inherited(arguments)},sizeWidget:function(){}});n.markupFactory=function(a,b){D.markupFactory(a,b)};C=i("dojox.grid.cells.Editor",D,{widgetClass:C,getWidgetProps:function(){return d.mixin({},this.widgetProps||{},{height:this.widgetHeight||"100px"})},createWidget:function(a,b){var c=new this.widgetClass(this.getWidgetProps(b),a);c.onLoadDeferred.then(d.hitch(this,"populateEditor"));return c},formatNode:function(a,
b,d){this.content=b;this.inherited(arguments);if(c("mozilla")){var e=this.widget;e.open();this.widgetToolbar&&g.place(e.toolbar.domNode,e.editingArea,"before")}},populateEditor:function(){this.widget.set("value",this.content);this.widget.placeCursorAtEnd()}});C.markupFactory=function(b,c){D.markupFactory(b,c);var e=d.trim(a.get(b,"widgetHeight")||"");if(e)"auto"!=e&&"em"!=e.substr(-2)&&(e=parseInt(e,10)+"px"),c.widgetHeight=e};return j.grid.cells.dijit})},"dojo/data/ItemFileReadStore":function(){define("dojo/data/ItemFileReadStore",
"../_base/kernel,../_base/lang,../_base/declare,../_base/array,../_base/xhr,../Evented,./util/filter,./util/simpleFetch,../date/stamp".split(","),function(k,j,i,f,d,b,e,c,h){i=i("dojo.data.ItemFileReadStore",[b],{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(a){return h.fromISOString(a)}});
this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];if(void 0!==a.urlPreventCache)this.urlPreventCache=a.urlPreventCache?!0:!1;if(void 0!==a.hierarchical)this.hierarchical=a.hierarchical?!0:!1;if(a.clearOnClose)this.clearOnClose=!0;if("failOk"in a)this.failOk=a.failOk?!0:!1},url:"",_ccUrl:"",data:null,
typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(a,b,c){a=this.getValues(a,b);return 0<a.length?a[0]:c},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return(a[b]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);
var b=[],c;for(c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&b.push(c);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,c){var d=void 0;"string"===typeof c&&(d=e.patternToRegExp(c,!1));return this._containsValue(a,b,c,d)},_containsValue:function(a,b,c,d){return f.some(this.getValues(a,b),function(a){if(null!==a&&!j.isObject(a)&&d){if(a.toString().match(d))return!0}else if(c===
a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(){return this._labelAttr?[this._labelAttr]:null},filter:function(a,b,c){var d=[],f,h;if(a.query){var i;
f=a.queryOptions?a.queryOptions.ignoreCase:!1;var o={};for(h in a.query)i=a.query[h],"string"===typeof i?o[h]=e.patternToRegExp(i,f):i instanceof RegExp&&(o[h]=i);for(f=0;f<b.length;++f){var n=!0,j=b[f];if(null===j)n=!1;else for(h in a.query)i=a.query[h],this._containsValue(j,h,i,o[h])||(n=!1);n&&d.push(j)}}else for(f=0;f<b.length;++f)h=b[f],null!==h&&d.push(h);c(d,a)},_fetchItems:function(a,b,c){var e=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),b);else{if(this._jsonFileUrl!==
this._ccUrl)k.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(null!=this.data)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:j.hitch(e,"filter"),findCallback:j.hitch(e,b)});else{this._loadInProgress=!0;var f=
d.get({url:e._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});f.addCallback(function(d){try{e._getItemsFromLoadedData(d),e._loadFinished=!0,e._loadInProgress=!1,e.filter(a,e._getItemsArray(a.queryOptions),b),e._handleQueuedFetches()}catch(f){e._loadFinished=!0,e._loadInProgress=!1,c(f,a)}});f.addErrback(function(b){e._loadInProgress=!1;c(b,a)});var h=null;if(a.abort)h=a.abort;a.abort=function(){f&&-1===f.fired&&f.cancel();h&&h.call(a)}}else if(this._jsonData)try{this._loadFinished=
!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,e.filter(a,this._getItemsArray(a.queryOptions),b)}catch(i){c(i,a)}else c(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),a)}},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.args,d=b.filter,b=b.findCallback;d?d(c,this._getItemsArray(c.queryOptions),b):this.fetchItemByIdentity(c)}this._queuedFetches=
[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress)this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[]},_getItemsFromLoadedData:function(a){function b(a){return null!==a&&"object"===typeof a&&(!j.isArray(a)||d)&&!j.isFunction(a)&&(a.constructor==Object||j.isArray(a))&&"undefined"===
typeof a._reference&&"undefined"===typeof a._type&&"undefined"===typeof a._value&&e.hierarchical}function c(a){e._arrayOfAllItems.push(a);for(var d in a){var f=a[d];if(f)if(j.isArray(f))for(var h=0;h<f.length;++h){var o=f[h];b(o)&&c(o)}else b(f)&&c(f)}}var d=!1,e=this;this._labelAttr=a.label;var f,h;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(f=0;f<this._arrayOfTopLevelItems.length;++f)h=this._arrayOfTopLevelItems[f],j.isArray(h)&&(d=!0),c(h),h[this._rootItemPropName]=!0;var o=
{},n;for(f=0;f<this._arrayOfAllItems.length;++f)for(n in h=this._arrayOfAllItems[f],h){if(n!==this._rootItemPropName){var i=h[n];null!==i?j.isArray(i)||(h[n]=[i]):h[n]=[null]}o[n]=n}for(;o[this._storeRefPropName];)this._storeRefPropName+="_";for(;o[this._itemNumPropName];)this._itemNumPropName+="_";for(;o[this._reverseRefMap];)this._reverseRefMap+="_";if(o=a.identifier){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=o;for(f=0;f<this._arrayOfAllItems.length;++f)if(h=this._arrayOfAllItems[f],
a=h[o],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+o+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+o+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=h}else this._features["dojo.data.api.Identity"]=
Number;for(f=0;f<this._arrayOfAllItems.length;++f)h=this._arrayOfAllItems[f],h[this._storeRefPropName]=this,h[this._itemNumPropName]=f;for(f=0;f<this._arrayOfAllItems.length;++f)for(n in h=this._arrayOfAllItems[f],h){a=h[n];for(o=0;o<a.length;++o)if(i=a[o],null!==i&&"object"==typeof i){if("_type"in i&&"_value"in i){var q=i._type,k=this._datatypeMap[q];if(k)if(j.isFunction(k))a[o]=new k(i._value);else if(j.isFunction(k.deserialize))a[o]=k.deserialize(i._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");
else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+q+"'");}if(i._reference){i=i._reference;if(j.isObject(i))for(q=0;q<this._arrayOfAllItems.length;++q){var k=this._arrayOfAllItems[q],v=!0,A;for(A in i)k[A]!=i[A]&&(v=!1);v&&(a[o]=k)}else a[o]=this._getItemByIdentity(i);this.referenceIntegrity&&(i=a[o],this.isItem(i)&&this._addReferenceToMap(i,h,n))}else this.isItem(i)&&this.referenceIntegrity&&this._addReferenceToMap(i,h,
n)}}},_addReferenceToMap:function(){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];return b===Number?a[this._itemNumPropName]:(a=a[b])?a[0]:null},fetchItemByIdentity:function(a){var b,c;if(this._loadFinished)b=this._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:k.global,a.onItem.call(c,b));else{var e=this;if(this._jsonFileUrl!==this._ccUrl)k.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(null!=this.data&&null==this._jsonData)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl)this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,c=d.get({url:e._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),c.addCallback(function(c){var d=a.scope?a.scope:k.global;try{e._getItemsFromLoadedData(c),e._loadFinished=
!0,e._loadInProgress=!1,b=e._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(d,b),e._handleQueuedFetches()}catch(f){e._loadInProgress=!1,a.onError&&a.onError.call(d,f)}}),c.addErrback(function(b){e._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:k.global,b)}));else if(this._jsonData)e._getItemsFromLoadedData(e._jsonData),e._jsonData=null,e._loadFinished=!0,b=e._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:k.global,a.onItem.call(c,b))}},_getItemByIdentity:function(a){var b=
null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(b=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,a)&&(b=this._arrayOfAllItems[a]);void 0===b&&(b=null);return b},getIdentityAttributes:function(){var a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;if(this._jsonFileUrl!==this._ccUrl)k.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(null!=this.data)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl){var b=d.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});b.addCallback(function(b){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(b),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");
}catch(c){throw c;}});b.addErrback(function(a){throw a;})}else if(this._jsonData)a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0}});j.extend(i,c);return i})},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(k,j,i){return k("dijit.form.DateTextBox",i,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:j,_selector:"date",value:new Date("")})})},"dijit/Calendar":function(){define("dijit/Calendar",
"dojo/_base/array,dojo/date,dojo/date/locale,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/_base/event,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/sniff,./CalendarLite,./_Widget,./_CssStateMixin,./_TemplatedMixin,./form/DropDownButton".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r){var o=f("dijit.Calendar",[m,p,l],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},
setValue:function(a){c.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new o._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:a.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");
this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp")},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);var a=this.dateModule.getDaysInMonth(b),c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=b.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:
a.target)&&(a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))b.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){if(this._currentNode&&!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode))a="dijitCalendarHoveredDate",b.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),b.remove(this._currentNode,a),this._currentNode=null},_onDayMouseDown:function(a){if((a=
a.target.parentNode)&&a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate"))b.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&b.remove(a,"dijitCalendarActiveDate")},handleKey:function(a){var b=-1,c,d=this.currentFocus;switch(a.keyCode){case h.RIGHT_ARROW:b=1;case h.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case h.DOWN_ARROW:b=1;case h.UP_ARROW:c="week";break;case h.PAGE_DOWN:b=1;case h.PAGE_UP:c=a.ctrlKey||
a.altKey?"year":"month";break;case h.END:d=this.dateModule.add(d,"month",1),c="day";case h.HOME:d=new this.dateClassObj(d);d.setDate(1);break;case h.ENTER:case h.SPACE:this.set("value",this.currentFocus);break;default:return!0}c&&(d=this.dateModule.add(d,c,b));this._setCurrentFocusAttr(d);return!1},_onKeyDown:function(a){this.handleKey(a)||e.stop(a)},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});o._MonthDropDownButton=f("dijit.Calendar._MonthDropDownButton",
r,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new o._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b);this.containerNode.innerHTML=(6==g("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});
o._MonthDropDown=f("dijit.Calendar._MonthDropDown",[p,u],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(a){this.domNode.innerHTML=k.map(a,function(a,b){return a?"<div class='dijitCalendarMonthLabel' month='"+b+"'>"+a+"</div>":""}).join("")},_onClick:function(a){this.onChange(d.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){b.toggle(a.target,
"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return o})},"dojo/date":function(){define("dojo/date",["./has","./_base/lang"],function(k,j){var i={};i.getDaysInMonth=function(f){var d=f.getMonth(),b=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==d&&i.isLeapYear(f)?29:b[d]};i.isLeapYear=function(f){f=f.getFullYear();return!(f%400)||!(f%4)&&!!(f%100)};i.getTimezoneName=function(f){var d=f.toString(),b="",e=d.indexOf("(");if(-1<e)b=d.substring(++e,d.indexOf(")"));else if(e=/([A-Z\/]+) \d{4}$/,
d=d.match(e))b=d[1];else if(d=f.toLocaleString(),e=/ ([A-Z\/]+)$/,d=d.match(e))b=d[1];return"AM"==b||"PM"==b?"":b};i.compare=function(f,d,b){f=new Date(+f);d=new Date(+(d||new Date));"date"==b?(f.setHours(0,0,0,0),d.setHours(0,0,0,0)):"time"==b&&(f.setFullYear(0,0,0),d.setFullYear(0,0,0));return f>d?1:f<d?-1:0};i.add=function(f,d,b){var e=new Date(+f),c=!1,h="Date";switch(d){case "day":break;case "weekday":var a;(d=b%5)?a=parseInt(b/5):(d=0<b?5:-5,a=0<b?(b-5)/5:(b+5)/5);var g=f.getDay(),i=0;6==g&&
0<b?i=1:0==g&&0>b&&(i=-1);g+=d;if(0==g||6==g)i=0<b?2:-2;b=7*a+d+i;break;case "year":h="FullYear";c=!0;break;case "week":b*=7;break;case "quarter":b*=3;case "month":c=!0;h="Month";break;default:h="UTC"+d.charAt(0).toUpperCase()+d.substring(1)+"s"}if(h)e["set"+h](e["get"+h]()+b);c&&e.getDate()<f.getDate()&&e.setDate(0);return e};i.difference=function(f,d,b){var d=d||new Date,b=b||"day",e=d.getFullYear()-f.getFullYear(),c=1;switch(b){case "quarter":f=f.getMonth();d=d.getMonth();f=Math.floor(f/3)+1;d=
Math.floor(d/3)+1;c=d+4*e-f;break;case "weekday":e=Math.round(i.difference(f,d,"day"));b=parseInt(i.difference(f,d,"week"));if(0==e%7)e=5*b;else{var c=0,h=f.getDay(),a=d.getDay(),b=parseInt(e/7),d=e%7,f=new Date(f);f.setDate(f.getDate()+7*b);f=f.getDay();if(0<e)switch(!0){case 6==h:c=-1;break;case 0==h:c=0;break;case 6==a:c=-1;break;case 0==a:c=-2;break;case 5<f+d:c=-2}else if(0>e)switch(!0){case 6==h:c=0;break;case 0==h:c=1;break;case 6==a:c=2;break;case 0==a:c=1;break;case 0>f+d:c=2}e=e+c-2*b}c=
e;break;case "year":c=e;break;case "month":c=d.getMonth()-f.getMonth()+12*e;break;case "week":c=parseInt(i.difference(f,d,"day")/7);break;case "day":c/=24;case "hour":c/=60;case "minute":c/=60;case "second":c/=1E3;case "millisecond":c*=d.getTime()-f.getTime()}return Math.round(c)};j.mixin(j.getObject("dojo.date",!0),i);return i})},"dojo/date/locale":function(){define("dojo/date/locale","../_base/lang,../_base/array,../date,../cldr/supplemental,../i18n,../regexp,../string,../i18n!../cldr/nls/gregorian,module".split(","),
function(k,j,i,f,d,b,e,c,h){function a(a,b,c,d){return d.replace(/([a-z])\1*/ig,function(h){var g,i,l=h.charAt(0),h=h.length,j=["abbr","wide","narrow"];switch(l){case "G":g=b[4>h?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":g=a.getFullYear();switch(h){case 1:break;case 2:if(!c.fullYear){g=""+g;g=g.substr(g.length-2);break}default:i=!0}break;case "Q":case "q":g=Math.ceil((a.getMonth()+1)/3);i=!0;break;case "M":case "L":g=a.getMonth();3>h?(g+=1,i=!0):(l=["months","L"==l?"standAlone":
"format",j[h-3]].join("-"),g=b[l][g]);break;case "w":g=p._getWeekOfYear(a,0);i=!0;break;case "d":g=a.getDate();i=!0;break;case "D":g=p._getDayOfYear(a);i=!0;break;case "e":case "c":if(g=a.getDay(),2>h){g=(g-f.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":g=a.getDay();3>h?(g+=1,i=!0):(l=["days","c"==l?"standAlone":"format",j[h-3]].join("-"),g=b[l][g]);break;case "a":l=12>a.getHours()?"am":"pm";g=c[l]||b["dayPeriods-format-wide-"+l];break;case "h":case "H":case "K":case "k":i=a.getHours();switch(l){case "h":g=
i%12||12;break;case "H":g=i;break;case "K":g=i%12;break;case "k":g=i||24}i=!0;break;case "m":g=a.getMinutes();i=!0;break;case "s":g=a.getSeconds();i=!0;break;case "S":g=Math.round(a.getMilliseconds()*Math.pow(10,h-3));i=!0;break;case "v":case "z":if(g=p._getZone(a,!0,c))break;h=4;case "Z":l=p._getZone(a,!1,c);l=[0>=l?"+":"-",e.pad(Math.floor(Math.abs(l)/60),2),e.pad(Math.abs(l)%60,2)];4==h&&(l.splice(0,0,"GMT"),l.splice(3,0,":"));g=l.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
d);}i&&(g=e.pad(g,h));return g})}function g(a,b,c,d){var e=function(a){return a},b=b||e,c=c||e,d=d||e,f=a.match(/(''|[^'])+/g),g="'"==a.charAt(0);j.forEach(f,function(a,d){a?(f[d]=(g?c:b)(a.replace(/''/g,"'")),g=!g):f[d]=""});return d(f.join(""))}function m(a,c,d,e){e=b.escapeString(e);d.strict||(e=e.replace(" a"," ?a"));return e.replace(/([a-z])\1*/ig,function(b){var e;e=b.charAt(0);var f=b.length,g="",h="";d.strict?(1<f&&(g="0{"+(f-1)+"}"),2<f&&(h="0{"+(f-2)+"}")):(g="0?",h="0{0,2}");switch(e){case "y":e=
"\\d{2,4}";break;case "M":case "L":e=2<f?"\\S+?":"1[0-2]|"+g+"[1-9]";break;case "D":e="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+g+"[1-9][0-9]|"+h+"[1-9]";break;case "d":e="3[01]|[12]\\d|"+g+"[1-9]";break;case "w":e="[1-4][0-9]|5[0-3]|"+g+"[1-9]";break;case "E":case "e":case "c":e="\\S+";break;case "h":e="1[0-2]|"+g+"[1-9]";break;case "k":e="1[01]|"+g+"\\d";break;case "H":e="1\\d|2[0-3]|"+g+"\\d";break;case "K":e="1\\d|2[0-4]|"+g+"[1-9]";break;case "m":case "s":e="[0-5]\\d";break;case "S":e="\\d{"+f+"}";
break;case "a":f=d.am||c["dayPeriods-format-wide-am"];g=d.pm||c["dayPeriods-format-wide-pm"];e=f+"|"+g;d.strict||(f!=f.toLowerCase()&&(e+="|"+f.toLowerCase()),g!=g.toLowerCase()&&(e+="|"+g.toLowerCase()),-1!=e.indexOf(".")&&(e+="|"+e.replace(/\./g,"")));e=e.replace(/\./g,"\\.");break;default:e=".*"}a&&a.push(b);return"("+e+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var p={};k.setObject(h.id.replace(/\//g,"."),p);p._getZone=function(a,b){return b?i.getTimezoneName(a):a.getTimezoneOffset()};p.format=function(b,
c){var c=c||{},e=d.normalizeLocale(c.locale),f=c.formatLength||"short",e=p._getGregorianBundle(e),h=[],i=k.hitch(this,a,b,e,c);if("year"==c.selector)return g(e["dateFormatItem-yyyy"]||"yyyy",i);var l;"date"!=c.selector&&(l=c.timePattern||e["timeFormat-"+f])&&h.push(g(l,i));"time"!=c.selector&&(l=c.datePattern||e["dateFormat-"+f])&&h.push(g(l,i));return 1==h.length?h[0]:e["dateTimeFormat-"+f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return h[b]})};p.regexp=function(a){return p._parseInfo(a).regexp};
p._parseInfo=function(a){var a=a||{},b=d.normalizeLocale(a.locale),b=p._getGregorianBundle(b),c=a.formatLength||"short",e=a.datePattern||b["dateFormat-"+c],f=a.timePattern||b["timeFormat-"+c],c="date"==a.selector?e:"time"==a.selector?f:b["dateTimeFormat-"+c].replace(/\{(\d+)\}/g,function(a,b){return[f,e][b]}),h=[];return{regexp:g(c,k.hitch(this,m,h,b,a)),tokens:h,bundle:b}};p.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,d=p._parseInfo(b),e=d.tokens,f=d.bundle,c=RegExp("^"+d.regexp.replace(c,
"")+"$",d.strict?"":"i").exec(a&&a.replace(c,""));if(!c)return null;var g=["abbr","wide","narrow"],h=[1970,0,1,0,0,0,0],l="",c=j.every(c,function(a,c){if(!c)return!0;var d=e[c-1],o=d.length,d=d.charAt(0);switch(d){case "y":if(2!=o&&b.strict)h[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),o=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),h[0]=a<d?o+a:o-100+a;else{if(b.strict)return!1;h[0]=a}break;case "M":case "L":if(2<o){if(o=f["months-"+("L"==d?"standAlone":"format")+
"-"+g[o-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),o=j.map(o,function(a){return a.replace(".","").toLowerCase()})),a=j.indexOf(o,a),-1==a)return!1}else a--;h[1]=a;break;case "E":case "e":case "c":o=f["days-"+("c"==d?"standAlone":"format")+"-"+g[o-3]].concat();b.strict||(a=a.toLowerCase(),o=j.map(o,function(a){return a.toLowerCase()}));a=j.indexOf(o,a);if(-1==a)return!1;break;case "D":h[1]=0;case "d":h[2]=a;break;case "a":o=b.am||f["dayPeriods-format-wide-am"];d=b.pm||f["dayPeriods-format-wide-pm"];
if(!b.strict)var i=/\./g,a=a.replace(i,"").toLowerCase(),o=o.replace(i,"").toLowerCase(),d=d.replace(i,"").toLowerCase();if(b.strict&&a!=o&&a!=d)return!1;l=a==d?"p":a==o?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;h[3]=a;break;case "m":h[4]=a;break;case "s":h[5]=a;break;case "S":h[6]=a}return!0}),d=+h[3];"p"===l&&12>d?h[3]=d+12:"a"===l&&12==d&&(h[3]=0);d=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);b.strict&&d.setFullYear(h[0]);var m=e.join(""),k=-1!=m.indexOf("d"),
m=-1!=m.indexOf("M");if(!c||m&&d.getMonth()>h[1]||k&&d.getDate()>h[2])return null;if(m&&d.getMonth()<h[1]||k&&d.getDate()<h[2])d=i.add(d,"hour",1);return d};var l=[];p.addCustomFormats=function(a,b){l.push({pkg:a,name:b})};p._getGregorianBundle=function(a){var b={};j.forEach(l,function(c){c=d.getLocalization(c.pkg,c.name,a);b=k.mixin(b,c)},this);return b};p.addCustomFormats(h.id.replace(/\/date\/locale$/,".cldr"),"gregorian");p.getNames=function(a,b,c,d){var e,d=p._getGregorianBundle(d),a=[a,c,b];
"standAlone"==c&&(c=a.join("-"),e=d[c],1==e[0]&&(e=void 0));a[1]="format";return(e||d[a.join("-")]).concat()};p.isWeekend=function(a,b){var c=f.getWeekend(b),d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));return d>=c.start&&d<=c.end};p._getDayOfYear=function(a){return i.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};p._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((p._getDayOfYear(a)+(c-b+7)%7-
1)/7);c==b&&d++;return d};return p})},"dojo/cldr/supplemental":function(){define("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(k,j){var i={};k.setObject("dojo.cldr.supplemental",i);i.getFirstDayOfWeek=function(f){f={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,
mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[i._region(f)];return void 0===f?1:f};i._region=function(f){var f=j.normalizeLocale(f),f=f.split("-"),d=f[1];d?4==d.length&&(d=f[2]):d={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[f[0]];return d};i.getWeekend=function(f){var d=i._region(f),f={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,
kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[d],d={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[d];void 0===f&&(f=6);void 0===d&&(d=0);return{start:f,end:d}};return i})},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="incrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="onclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n'}});
define("dijit/CalendarLite","dojo/_base/array,dojo/_base/declare,dojo/cldr/supplemental,dojo/date,dojo/date/locale,dojo/date/stamp,dojo/dom,dojo/dom-class,dojo/_base/event,dojo/_base/lang,dojo/sniff,dojo/string,./_WidgetBase,./_TemplatedMixin,dojo/text!./templates/Calendar.html,./hccss".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u){var r=j("dijit.CalendarLite",[p,l],{templateString:u,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader"><span class="dijitCalendarDayLabel">${d}</span></th>',
dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},
_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var a=new this.dateClassObj(this.value);a.setHours(0,0,0,0);a.getDate()<this.value.getDate()&&(a=this.dateModule.add(a,"hour",1));return a}return null},_setValueAttr:function(a,c){"string"==typeof a&&(a=b.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(c||"undefined"==typeof c))this.onChange(this.get("value"))}else this._set("value",
null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),e=new this.dateClassObj,f=i.getFirstDayOfWeek(this.lang);
f>b&&(f-=7);this._date2cell={};k.forEach(this.dateCells,function(h,g){var i=g+f,l=new this.dateClassObj(a),p="dijitCalendar",j=0;i<b?(i=d-b+i+1,j=-1,p+="Previous"):i>=b+c?(i=i-b-c+1,j=1,p+="Next"):(i=i-b+1,p+="Current");j&&(l=this.dateModule.add(l,"month",j));l.setDate(i);this.dateModule.compare(l,e,"date")||(p="dijitCalendarCurrentDate "+p);this.isDisabledDate(l,this.lang)?(p="dijitCalendarDisabledDate "+p,h.setAttribute("aria-disabled","true")):(p="dijitCalendarEnabledDate "+p,h.removeAttribute("aria-disabled"),
h.setAttribute("aria-selected","false"));(j=this.getClassForDate(l,this.lang))&&(p=j+" "+p);h.className=p+"Month dijitCalendarDateTemplate";p=l.valueOf();this._date2cell[p]=h;h.dijitDateValue=p;this._setText(this.dateLabels[g],l.getDateLocalized?l.getDateLocalized(this.lang):l.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;k.forEach(["previous","current","next"],
function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(b){this.dateModule=b.datePackage?a.getObject(b.datePackage,!1):f;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?a.getObject(b.datePackage+".locale",!1):d},_createMonthWidget:function(){return r._MonthWidget({id:this.id+"_mw",lang:this.lang,
dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=i.getFirstDayOfWeek(this.lang);this.dayCellsHtml=m.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=m.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);e.setSelectable(this.domNode,
!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var b=a.hitch(this,function(a,b,c){this.connect(this[a],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))})});b("incrementMonth","month",1);b("decrementMonth","month",-1);b("nextYearLabelNode","year",1);b("previousYearLabelNode","year",-1)},
_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c),a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();d&&d!=c&&(g("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,
!0)},_onDayClick:function(a){h.stop(a);for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!c.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(b){function d(a,b){c.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}k.forEach(this._selectedCells||[],a.partial(d,!1));this._selectedCells=k.filter(k.map(b,
this._getNodeByDate,this),function(a){return a});k.forEach(this._selectedCells,a.partial(d,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});r._MonthWidget=j("dijit.CalendarLite._MonthWidget",p,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.domNode.innerHTML=(6==g("ie")?"":"<div class='dijitSpacer'>"+k.map(b,function(a){return"<div>"+a+"</div>"}).join("")+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+
b[a.getMonth()]+"</div>"}});return r})},"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="incrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="onclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n',
"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode, _popupStateNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox" aria-haspopup="true"\n\t/></div\n></div>\n'}});
define("dijit/form/_DateTimeTextBox","dojo/date,dojo/date/locale,dojo/date/stamp,dojo/_base/declare,dojo/_base/lang,./RangeBoundTextBox,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),function(k,j,i,f,d,b,e,c){return f("dijit.form._DateTimeTextBox",[b,e],{templateString:c,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:j.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,a){var c=
this._isInvalidDate(b),d=this._isInvalidDate(a);return c?d?0:-1:d?1:k.compare(b,a,this._selector)},forceWidth:!0,format:function(b,a){return!b?"":this.dateLocaleModule.format(b,a)},parse:function(b,a){return this.dateLocaleModule.parse(b,a)||(this._isEmpty(b)?null:void 0)},serialize:function(b,a){b.toGregorian&&(b=b.toGregorian());return i.toISOString(b,a)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){this.dateModule=b.datePackage?
d.getObject(b.datePackage,!1):k;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?d.getObject(b.datePackage+".locale",!1):j;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow)this._buttonNode.style.display="none";if(!this.hasDownArrow)this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick"},_setConstraintsAttr:function(b){b.selector=
this._selector;b.fullYear=!0;var a=i.fromISOString;if("string"==typeof b.min)b.min=a(b.min);if("string"==typeof b.max)b.max=a(b.max);this.inherited(arguments)},_isInvalidDate:function(b){return!b||isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,a,c){void 0!==b&&("string"==typeof b&&(b=i.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments);if(this.value instanceof
Date)this.filterString="";this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,a){"value"==b&&this.value instanceof Date&&0==this.compare(a,this.value)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this.dropDownDefaultValue=b},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var a=d.isString(this.popupClass)?d.getObject(this.popupClass,!1):this.popupClass,c=this,e=this.get("value");this.dropDown=new a({onChange:function(a){c.set("value",
a,!0)},id:this.id+"_popup",dir:c.dir,lang:c.lang,value:e,currentFocus:!this._isInvalidDate(e)?e:this.dropDownDefaultValue,constraints:c.constraints,filterString:c.filterString,datePackage:c.params.datePackage,isDisabledDate:function(a){return!c.rangeCheck(a,c.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,a){this._setValueAttr(this.parse(b,this.constraints),a,b)}})})},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",
["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(k,j,i){return k("dijit.form.RangeBoundTextBox",i,{rangeMessage:"",rangeCheck:function(f,d){return("min"in d?0<=this.compare(f,d.min):!0)&&("max"in d?0>=this.compare(f,d.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var f=this.get("value");if(null==f)return!1;var d=!1;if("min"in this.constraints)d=this.constraints.min,d=0>this.compare(f,"number"==typeof d&&0<=
d&&0!=f?0:d);if(!d&&"max"in this.constraints)d=this.constraints.max,d=0<this.compare(f,"number"!=typeof d||0<d?d:0);return d},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(f){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(f))},getErrorMessage:function(f){var d=this.get("value");return null!=d&&""!==d&&("number"!=typeof d||!isNaN(d))&&!this.isInRange(f)?this.rangeMessage:this.inherited(arguments)},
postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage)this.messages=j.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage},applyTextDir:function(){}})})},"dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(k,j,i){return k("dijit.form.MappedTextBox",i,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:null,
serialize:function(f){return f.toString?f.toString():""},toString:function(){var f=this.filter(this.get("value"));return null!=f?"string"==typeof f?f:this.serialize(f,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=j.place("<input type='hidden'"+(this.name?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value=
"";this.inherited(arguments)}})})},"dijit/form/TimeTextBox":function(){define("dijit/form/TimeTextBox",["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(k,j,i,f,d){return k("dijit.form.TimeTextBox",d,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:f,_selector:"time",value:new Date(""),_onKey:function(b){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),b.keyCode){case j.ENTER:case j.TAB:case j.ESCAPE:case j.DOWN_ARROW:case j.UP_ARROW:break;
default:this.defer(function(){var b=this.get("displayedValue");this.filterString=b&&!this.parse(b,this.constraints)?b.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"dijit/_TimePicker":function(){require({cache:{"url:dijit/templates/TimePicker.html":'<div id="widget_${id}" class="dijitMenu"\n    ><div data-dojo-attach-point="upArrow" class="dijitButtonNode dijitUpArrowButton" data-dojo-attach-event="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&#160;</div\n\t\t><div class="dijitArrowButtonChar">&#9650;</div></div\n    ><div data-dojo-attach-point="timeMenu,focusNode" data-dojo-attach-event="onclick:_onOptionSelected,onmouseover,onmouseout"></div\n    ><div data-dojo-attach-point="downArrow" class="dijitButtonNode dijitDownArrowButton" data-dojo-attach-event="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&#160;</div\n\t\t><div class="dijitArrowButtonChar">&#9660;</div></div\n></div>\n'}});
define("dijit/_TimePicker","dojo/_base/array,dojo/date,dojo/date/locale,dojo/date/stamp,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/_base/event,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/query,dojo/mouse,./typematic,./_Widget,./_TemplatedMixin,./form/_FormValueWidget,dojo/text!./templates/TimePicker.html".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,o,n,z){return d("dijit._TimePicker",[r,o],{templateString:z,baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",
visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:f.toISOString,setValue:function(a){h.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,
b,c,d){var e=[],d=d?d.date:this._refDate,f=a,g=this._maxIncrement+Math.abs(f),h=c?-1:1,i=c?1:0,l=1-i;do{f-=i;if(a=this._createOption(f)){if(c&&a.date>d||!c&&a.date<d)break;e[c?"unshift":"push"](a);d=a.date}f+=l}while(e.length<b&&f*h<g);return e},_showText:function(){var a=f.fromISOString;this.timeMenu.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);this._visibleRangeDate=a(this.visibleRange);var b=function(a){return 3600*a.getHours()+
60*a.getMinutes()+a.getSeconds()},a=b(this._clickableIncrementDate),c=b(this._visibleIncrementDate),b=b(this._visibleRangeDate),d=(this.value||this.currentFocus).getTime();this._refDate=new Date(d-d%(1E3*a));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=b/a;this._visibleIncrement=c/a;this._maxIncrement=86400/a;b=Math.min(this._totalIncrements,10);a=this._getFilteredNodes(0,(b>>1)+1,!1);c=[];b-=a.length;d=this._getFilteredNodes(0,b,!0,a[0]);d.length<b&&0<a.length&&
(c=this._getFilteredNodes(a[a.length-1].idx+1,b-d.length,!1,a[a.length-1]));k.forEach(d.concat(a,c),function(a){this.timeMenu.appendChild(a)},this);if(!d.length&&!a.length&&!c.length&&this.filterString)this.filterString="",this._showText()},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){g.mixin(this,a);if(!a.locale)a.locale=this.lang},postCreate:function(){this.connect(this.timeMenu,
l.wheel,"_mouseWheeled");this.own(u.addMouseListener(this.upArrow,this,"_onArrowUp",33,250),u.addMouseListener(this.downArrow,this,"_onArrowDown",33,250));this.inherited(arguments)},_buttonMouse:function(a){b.toggle(a.currentTarget,a.currentTarget==this.upArrow?"dijitUpArrowHover":"dijitDownArrowHover","mouseenter"==a.type||"mouseover"==a.type)},_createOption:function(a){var c=new Date(this._refDate),d=this._clickableIncrementDate;c.setTime(c.getTime()+36E5*d.getHours()*a+6E4*d.getMinutes()*a+1E3*
d.getSeconds()*a);"time"==this.constraints.selector&&c.setFullYear(1970,0,1);d=i.format(c,this.constraints);if(this.filterString&&0!==d.toLowerCase().indexOf(this.filterString))return null;var f=this.ownerDocument.createElement("div");f.className=this.baseClass+"Item";f.date=c;f.idx=a;e.create("div",{"class":this.baseClass+"ItemInner",innerHTML:d},f);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?b.add(f,this.baseClass+"Marker"):a%this._clickableIncrement||b.add(f,this.baseClass+"Tick");
this.isDisabledDate(c)&&b.add(f,this.baseClass+"ItemDisabled");if(this.value&&!j.compare(this.value,c,this.constraints.selector))f.selected=!0,b.add(f,this.baseClass+"ItemSelected"),b.contains(f,this.baseClass+"Marker")?b.add(f,this.baseClass+"MarkerSelected"):b.add(f,this.baseClass+"TickSelected"),this._highlightOption(f,!0);return f},_onOptionSelected:function(a){if((a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a))this._highlighted_option=null,this.set("value",a),this.onChange(a)},
onChange:function(){},_highlightOption:function(a,c){if(a){if(c)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}b.toggle(a,this.baseClass+"ItemHover",c);b.contains(a,this.baseClass+"Marker")?b.toggle(a,this.baseClass+"MarkerHover",c):b.toggle(a,this.baseClass+"TickHover",c)}},onmouseover:function(a){this._keyboardSelected=null;a=a.target.parentNode===this.timeMenu?a.target:
a.target.parentNode;b.contains(a,this.baseClass+"Item")&&this._highlightOption(a,!0)},onmouseout:function(a){this._keyboardSelected=null;this._highlightOption(a.target.parentNode===this.timeMenu?a.target:a.target.parentNode,!1)},_mouseWheeled:function(a){this._keyboardSelected=null;c.stop(a);this[0<a.wheelDelta?"_onArrowUp":"_onArrowDown"]()},_onArrowUp:function(a){-1===a?b.remove(this.upArrow,"dijitUpArrowActive"):(0===a&&b.add(this.upArrow,"dijitUpArrowActive"),this.timeMenu.childNodes.length&&
(a=this._getFilteredNodes(this.timeMenu.childNodes[0].idx,1,!0,this.timeMenu.childNodes[0]),a.length&&(this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]),this.timeMenu.insertBefore(a[0],this.timeMenu.childNodes[0]))))},_onArrowDown:function(a){-1===a?b.remove(this.downArrow,"dijitDownArrowActive"):(0===a&&b.add(this.downArrow,"dijitDownArrowActive"),this.timeMenu.childNodes.length&&(a=this._getFilteredNodes(this.timeMenu.childNodes[this.timeMenu.childNodes.length-
1].idx+1,1,!1,this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]),a.length&&(this.timeMenu.removeChild(this.timeMenu.childNodes[0]),this.timeMenu.appendChild(a[0]))))},handleKey:function(b){if(b.keyCode==a.DOWN_ARROW||b.keyCode==a.UP_ARROW){c.stop(b);if(this._highlighted_option&&!this._highlighted_option.parentNode)this._highlighted_option=null;var d=this.timeMenu,e=this._highlighted_option||p("."+this.baseClass+"ItemSelected",d)[0];e?d.childNodes.length&&(b.keyCode==a.DOWN_ARROW&&!e.nextSibling?
this._onArrowDown():b.keyCode==a.UP_ARROW&&!e.previousSibling&&this._onArrowUp(),e=b.keyCode==a.DOWN_ARROW?e.nextSibling:e.previousSibling):e=d.childNodes[0];this._highlightOption(e,!0);this._keyboardSelected=e;return!1}if(b.keyCode==a.ENTER||b.keyCode===a.TAB){if(!this._keyboardSelected&&b.keyCode===a.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return b.keyCode===a.TAB}}})})},"dijit/typematic":function(){define("dijit/typematic","dojo/_base/array,dojo/_base/connect,dojo/_base/event,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/sniff,./main".split(","),
function(k,j,i,f,d,b,e,c){var h=c.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(d.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,c,e,f,h,i,j){if(f!=this._obj){this.stop();this._initialDelay=i||500;
this._subsequentDelay=h||0.9;this._minDelay=j||10;this._obj=f;this._node=c;this._count=this._currentTimeout=-1;this._callback=d.hitch(b,e);this._evt={faux:!0};for(var n in a)"layerX"!=n&&"layerY"!=n&&(b=a[n],"function"!=typeof b&&"undefined"!=typeof b&&(this._evt[n]=b));this._fireEventAndReload()}},stop:function(){if(this._timer)clearTimeout(this._timer),this._timer=null;if(this._obj)this._callback(-1,this._node,this._evt),this._obj=null},addKeyListener:function(a,c,e,p,l,u,r){if(c.keyCode)c.charOrCode=
c.keyCode,f.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");else if(c.charCode)c.charOrCode=String.fromCharCode(c.charCode),f.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");var o=[b(a,j._keypress,d.hitch(this,function(b){b.charOrCode==c.charOrCode&&(void 0===c.ctrlKey||c.ctrlKey==b.ctrlKey)&&(void 0===c.altKey||c.altKey==b.altKey)&&(void 0===c.metaKey||
c.metaKey==(b.metaKey||!1))&&(void 0===c.shiftKey||c.shiftKey==b.shiftKey)?(i.stop(b),h.trigger(b,e,a,p,c,l,u,r)):h._obj==c&&h.stop()})),b(a,"keyup",d.hitch(this,function(){h._obj==c&&h.stop()}))];return{remove:function(){k.forEach(o,function(a){a.remove()})}}},addMouseListener:function(a,c,f,i,l,j){var r=[b(a,"mousedown",d.hitch(this,function(b){b.preventDefault();h.trigger(b,c,a,f,a,i,l,j)})),b(a,"mouseup",d.hitch(this,function(a){this._obj&&a.preventDefault();h.stop()})),b(a,"mouseout",d.hitch(this,
function(a){this._obj&&a.preventDefault();h.stop()})),b(a,"dblclick",d.hitch(this,function(b){b.preventDefault();9>e("ie")&&(h.trigger(b,c,a,f,a,i,l,j),setTimeout(d.hitch(this,h.stop),50))}))];return{remove:function(){k.forEach(r,function(a){a.remove()})}}},addListener:function(a,b,c,d,e,f,h,i){var j=[this.addKeyListener(b,c,d,e,f,h,i),this.addMouseListener(a,d,e,f,h,i)];return{remove:function(){k.forEach(j,function(a){a.remove()})}}}};return h})},"url:dijit/templates/TimePicker.html":'<div id="widget_${id}" class="dijitMenu"\n    ><div data-dojo-attach-point="upArrow" class="dijitButtonNode dijitUpArrowButton" data-dojo-attach-event="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&#160;</div\n\t\t><div class="dijitArrowButtonChar">&#9650;</div></div\n    ><div data-dojo-attach-point="timeMenu,focusNode" data-dojo-attach-event="onclick:_onOptionSelected,onmouseover,onmouseout"></div\n    ><div data-dojo-attach-point="downArrow" class="dijitButtonNode dijitDownArrowButton" data-dojo-attach-event="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&#160;</div\n\t\t><div class="dijitArrowButtonChar">&#9660;</div></div\n></div>\n',
"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(k,j,i,f,d){return k("dijit.form.NumberSpinner",[f,d.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(b,d){var c=this.constraints,f=isNaN(b),a=!isNaN(c.max),g=!isNaN(c.min);f&&0!=d&&(b=0<d?g?c.min:a?c.max:0:a?this.constraints.max:g?c.min:0);var i=b+d;if(f||isNaN(i))return b;if(a&&i>c.max)i=c.max;if(g&&i<
c.min)i=c.min;return i},_onKeyPress:function(b){if((b.charOrCode==i.HOME||b.charOrCode==i.END)&&!b.ctrlKey&&!b.altKey&&!b.metaKey&&"undefined"!=typeof this.get("value")){var d=this.constraints[b.charOrCode==i.HOME?"min":"max"];"number"==typeof d&&this._setValueAttr(d,!1);j.stop(b)}}})})},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeypress:_onKeyPress"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n'}});
define("dijit/form/_Spinner","dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/mouse,../typematic,./RangeBoundTextBox,dojo/text!./templates/Spinner.html,./_TextBoxMixin".split(","),function(k,j,i,f,d,b,e,c,h,a){return k("dijit.form._Spinner",c,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:h,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},
adjust:function(a){return a},_arrowPressed:function(b,c,d){!this.disabled&&!this.readOnly&&(this._setValueAttr(this.adjust(this.get("value"),c*d),!1),a.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,c){var d=this.smallDelta;if(b==this.textbox)b=c.charOrCode,d=b==i.PAGE_UP||b==i.PAGE_DOWN?this.largeDelta:this.smallDelta,b=b==i.UP_ARROW||b==i.PAGE_UP?this.upArrowNode:this.downArrowNode;-1==a?this._arrowReleased(b):
this._arrowPressed(b,b==this.upArrowNode?1:-1,d)},_wheelTimer:null,_mouseWheeled:function(a){j.stop(a);var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?1:-1);a=a.detail?-1*a.detail:b;if(0!==a){var c=this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(c,a,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(c)},50)}},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?
this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,b){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,b.wheel,"_mouseWheeled");this.own(e.addListener(this.upArrowNode,
this.textbox,{charOrCode:i.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),e.addListener(this.downArrowNode,this.textbox,{charOrCode:i.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),e.addListener(this.upArrowNode,this.textbox,{charOrCode:i.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",
this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),e.addListener(this.downArrowNode,this.textbox,{charOrCode:i.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeypress:_onKeyPress"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n',
"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(k,j,i,f){var d=k("dijit.form.NumberTextBoxMixin",null,{pattern:i.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:i.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(b){var d="number"==typeof b.places?b.places:0;d&&d++;if("number"!=typeof b.max)b.max=9*Math.pow(10,
15-d);if("number"!=typeof b.min)b.min=-9*Math.pow(10,15-d);this.inherited(arguments,[b]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled){var b=this.get("value");if("number"==typeof b&&!isNaN(b)&&(b=this.format(b,this.constraints),void 0!==b))this.textbox.value=b;this.inherited(arguments)}},format:function(b,d){var c=""+b;if("number"!=typeof b)return c;if(isNaN(b))return"";if(!("rangeCheck"in this&&this.rangeCheck(b,d))&&
!1!==d.exponent&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this.focused&&(d=j.mixin({},d,this.editOptions));return this._formatter(b,d)},_parser:i.parse,parse:function(b,d){var c=this._parser(b,j.mixin({},d,this.editOptions&&this.focused?this.editOptions:{}));this.editOptions&&this.focused&&isNaN(c)&&(c=this._parser(b,d));return c},_getDisplayedValueAttr:function(){var b=this.inherited(arguments);return isNaN(b)?this.textbox.value:b},filter:function(b){return null==b||""===b?NaN:this.inherited(arguments)},
serialize:function(b,d){return"number"!=typeof b||isNaN(b)?"":this.inherited(arguments)},_setBlurValue:function(){this._setValueAttr(j.hitch(j.mixin({},this,{focused:!0}),"get")("value"),!0)},_setValueAttr:function(b,d,c){if(void 0!==b&&void 0===c)if(c=""+b,"number"==typeof b)if(isNaN(b))c="";else{if("rangeCheck"in this&&this.rangeCheck(b,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else b?b=void 0:(c="",b=NaN);this.inherited(arguments,[b,d,c])},_getValueAttr:function(){var b=
this.inherited(arguments);if(isNaN(b)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+i._realNumberRegexp(j.mixin({},this.constraints))+"$").test(this.textbox.value))return b=Number(this.textbox.value),isNaN(b)?void 0:b}else return b},isValid:function(b){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var d=this.get("value");return!isNaN(d)&&this.rangeCheck(d,this.constraints)?!1!==this.constraints.exponent&&
/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1}}),k=k("dijit.form.NumberTextBox",[f,d],{baseClass:"dijitTextBox dijitNumberTextBox"});k.Mixin=d;return k})},"dijit/form/CurrencyTextBox":function(){define("dijit/form/CurrencyTextBox",["dojo/currency","dojo/_base/declare","dojo/_base/lang","./NumberTextBox"],function(k,j,i,f){return j("dijit.form.CurrencyTextBox",f,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",pattern:function(d){return"("+(this.focused?this.inherited(arguments,
[i.mixin({},d,this.editOptions)])+"|":"")+k.regexp(d)+")"},_formatter:k.format,_parser:k.parse,parse:function(d,b){var e=this.inherited(arguments);isNaN(e)&&/\d+/.test(d)&&(e=i.hitch(i.mixin({},this,{_parser:f.prototype._parser}),"inherited")(arguments));return e},_setConstraintsAttr:function(d){if(!d.currency&&this.currency)d.currency=this.currency;this.inherited(arguments,[k._mixInDefaults(i.mixin(d,{exponent:!1}))])}})})},"dojo/currency":function(){define("dojo/currency","./_base/array,./_base/lang,./number,./i18n,./i18n!./cldr/nls/currency,./cldr/monetary".split(","),
function(k,j,i,f,d,b){var e={};j.setObject("dojo.currency",e);e._mixInDefaults=function(c){c=c||{};c.type="currency";var d=f.getLocalization("dojo.cldr","currency",c.locale)||{},a=c.currency,e=b.getData(a);k.forEach(["displayName","symbol","group","decimal"],function(b){e[b]=d[a+"_"+b]});e.fractional=[!0,!1];return j.mixin(e,c)};e.format=function(b,d){return i.format(b,e._mixInDefaults(d))};e.regexp=function(b){return i.regexp(e._mixInDefaults(b))};e.parse=function(b,d){return i.parse(b,e._mixInDefaults(d))};
return e})},"dojo/cldr/monetary":function(){define("dojo/cldr/monetary",["../_base/kernel","../_base/lang"],function(k,j){var i={};j.setObject("dojo.cldr.monetary",i);i.getData=function(f){var d={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:0,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,
UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}[f],f={CHF:5}[f];"undefined"==typeof d&&(d=2);"undefined"==typeof f&&(f=0);return{places:d,round:f}};return i})},"dijit/form/HorizontalSlider":function(){require({cache:{"url:dijit/form/templates/HorizontalSlider.html":'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" data-dojo-attach-event="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\n\trole="presentation"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" data-dojo-attach-point="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event="press:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input data-dojo-attach-point="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" data-dojo-attach-point="sliderBarContainer"\n\t\t\t\t><div role="presentation" data-dojo-attach-point="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event="press:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t><div data-dojo-attach-point="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event="press:_onHandleClick" role="slider"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" data-dojo-attach-point="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event="press:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event="press:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" data-dojo-attach-point="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n'}});
define("dijit/form/HorizontalSlider","dojo/_base/array,dojo/_base/declare,dojo/dnd/move,dojo/_base/event,dojo/_base/fx,dojo/dom-geometry,dojo/dom-style,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/dnd/Moveable,dojo/dnd/Mover,dojo/query,dojo/mouse,../registry,../focus,../typematic,./Button,./_FormValueWidget,../_Container,dojo/text!./templates/HorizontalSlider.html".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,o,n,z,q,t){var v=j("dijit.form._SliderMover",m,{onMouseMove:function(a){var c=this.widget,
d=c._abspos;if(!d)d=c._abspos=b.position(c.sliderBarContainer,!0),c._setPixelValue_=h.hitch(c,"_setPixelValue"),c._isReversed_=c._isReversed();a=a[c._mousePixelCoord]-d[c._startingPixelCoord];c._setPixelValue_(c._isReversed_?d[c._pixelCount]-a:a,d[c._pixelCount],!1)},destroy:function(a){m.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}}),i=j("dijit.form.HorizontalSlider",[z,q],{templateString:t,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,
pageIncrement:2,clickSelect:!0,slideDuration:u.defaultDuration,_setIdAttr:"",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(a){!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey&&this._setValueAttr(this.value,!0)},_onKeyPress:function(a){if(!this.disabled&&
!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey){switch(a.charOrCode){case c.HOME:this._setValueAttr(this.minimum,!1);break;case c.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?c.RIGHT_ARROW:c.LEFT_ARROW:case !1===this._descending?c.DOWN_ARROW:c.UP_ARROW:case !1===this._descending?c.PAGE_DOWN:c.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?c.LEFT_ARROW:c.RIGHT_ARROW:case !1===this._descending?c.UP_ARROW:c.DOWN_ARROW:case !1===
this._descending?c.PAGE_UP:c.PAGE_DOWN:this.decrement(a);break;default:return}f.stop(a)}},_onHandleClick:function(b){!this.disabled&&!this.readOnly&&(a("ie")||r.focus(this.sliderHandle),f.stop(b))},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){r.focus(this.sliderHandle);f.stop(a);var c=b.position(this.sliderBarContainer,!0),d=a[this._mousePixelCoord]-c[this._startingPixelCoord];this._setPixelValue(this._isReversed()?
c[this._pixelCount]-d:d,c[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;if(1>=d||Infinity==d)d=b;d--;a=Math.round(a/(b/d));this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*a/d+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var c=(a-this.minimum)/
(this.maximum-this.minimum),e=!1===this._descending?this.remainingBar:this.progressBar,f=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(b&&0<this.slideDuration&&e.style[this._progressPixelSize]){var h=this,g={},i=parseFloat(e.style[this._progressPixelSize]),B=this.slideDuration*(c-i/100);if(0!=B)0>B&&(B=0-B),g[this._progressPixelSize]={start:i,end:100*c,units:"%"},this._inProgressAnim=d.animateProperty({node:e,
duration:B,onAnimate:function(a){f.style[h._progressPixelSize]=100-parseFloat(a[h._progressPixelSize])+"%"},onEnd:function(){delete h._inProgressAnim},properties:g}),this._inProgressAnim.play()}else e.style[this._progressPixelSize]=100*c+"%",f.style[this._progressPixelSize]=100*(1-c)+"%"},_bumpValue:function(a,c){if(!this.disabled&&!this.readOnly){var d=e.getComputedStyle(this.sliderBarContainer),f=b.getContentBox(this.sliderBarContainer,d),d=this.discreteValues;if(1>=d||Infinity==d)d=f[this._pixelCount];
d--;f=(this.value-this.minimum)*d/(this.maximum-this.minimum)+a;0>f&&(f=0);f>d&&(f=d);f=f*(this.maximum-this.minimum)/d+this.minimum;this._setValueAttr(f,c)}},_onClkBumper:function(a){!this.disabled&&!this.readOnly&&this.clickSelect&&this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.charOrCode==
c.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.charOrCode==c.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){f.stop(a);this._bumpValue(0>a.wheelDelta?-1:1,!0)},startup:function(){this._started||(k.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:
this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);if(this.showButtons)this.incrementButton.style.display="",this.decrementButton.style.display="";var a=p('label[for="'+this.id+'"]');if(a.length){if(!a[0].id)a[0].id=this.id+"_label";this.focusNode.setAttribute("aria-labelledby",a[0].id)}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);
this.showButtons&&this.own(o.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),o.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.connect(this.domNode,l.wheel,"_mouseWheeled");var a=j(v,{widget:this});this._movable=new g(this.sliderHandle,{mover:a});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});i._Mover=v;return i})},
"url:dijit/form/templates/HorizontalSlider.html":'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" data-dojo-attach-event="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\n\trole="presentation"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" data-dojo-attach-point="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event="press:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input data-dojo-attach-point="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" data-dojo-attach-point="sliderBarContainer"\n\t\t\t\t><div role="presentation" data-dojo-attach-point="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event="press:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t><div data-dojo-attach-point="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event="press:_onHandleClick" role="slider"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" data-dojo-attach-point="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event="press:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event="press:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" data-dojo-attach-point="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n',
"dijit/Editor":function(){define("dijit/Editor","require,dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/i18n,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/string,dojo/topic,dojo/_base/window,./_base/focus,./_Container,./Toolbar,./ToolbarSeparator,./layout/_LayoutWidget,./form/ToggleButton,./_editor/_Plugin,./_editor/plugins/EnterKeyHandling,./_editor/html,./_editor/range,./_editor/RichText,./main,dojo/i18n!./_editor/nls/commands".split(","),
function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,o,n,z,q,t,v,A,s,C,w,E,D){function x(a){return new A({command:a.name})}function y(a){return new A({buttonClass:v,command:a.name})}i=i("dijit.Editor",E,{plugins:null,extraPlugins:null,constructor:function(){if(!m.isArray(this.plugins))this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",
s];this._plugins=[];this._editInterval=1E3*this.editActionInterval;p("ie")&&(this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate"))},postMixInProperties:function(){this.setValueDeferred=new f;this.inherited(arguments)},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(m.isArray(this.extraPlugins))this.plugins=this.plugins.concat(this.extraPlugins);this.inherited(arguments);this.commands=d.getLocalization("dijit._editor","commands",
this.lang);if(!this.toolbar)this.toolbar=new z({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang}),this.header.appendChild(this.toolbar.domNode);j.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);e.add(this.iframe.parentNode,"dijitEditorIFrameContainer");e.add(this.iframe,"dijitEditorIFrame");b.set(this.iframe,"allowTransparency",!0);p("webkit")&&h.set(this.domNode,"KhtmlUserSelect","none");this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){j.forEach(this._plugins,
function(a){a&&a.destroy&&a.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(a,b){var c=m.isString(a)?{name:a}:m.isFunction(a)?{ctor:a}:a;if(!c.setEditor){var d={args:c,plugin:null,editor:this};if(c.name)A.registry[c.name]?d.plugin=A.registry[c.name](c):u.publish(D._scopeName+".Editor.getPlugin",d);if(!d.plugin)try{var e=c.ctor||m.getObject(c.name)||k(c.name);if(e)d.plugin=new e(c)}catch(f){throw Error(this.id+": cannot find plugin ["+
c.name+"]");}if(!d.plugin)throw Error(this.id+": cannot find plugin ["+c.name+"]");a=d.plugin}1<arguments.length?this._plugins[b]=a:this._plugins.push(a);a.setEditor(this);m.isFunction(a.setToolbar)&&a.setToolbar(this.toolbar)},resize:function(a){a&&t.prototype.resize.apply(this,arguments)},layout:function(){this.editingArea.style.height=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+c.getPadBorderExtents(this.iframe.parentNode).h+c.getMarginExtents(this.iframe.parentNode).h)+"px";
if(this.iframe)this.iframe.style.height="100%";this._layoutMode=!0},_onIEMouseDown:function(a){var b,c=this.document.body,d=c.clientWidth,e=c.clientHeight,f=c.clientLeft,h=c.offsetWidth,g=c.offsetHeight,i=c.offsetLeft;/^rtl$/i.test(c.dir||"")?d<h&&a.x>d&&a.x<h&&(b=!0):a.x<f&&a.x>i&&(b=!0);b||e<g&&a.y>e&&a.y<g&&(b=!0);b||(delete this._cursorToStart,delete this._savedSelection,"BODY"==a.target.tagName&&this.defer("placeCursorAtEnd"),this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},
onBeforeDeactivate:function(a){this.customUndo&&this.endEditing(!0);"BODY"!=a.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(a){if(!this._inEditing)this._inEditing=!0,this._beginEditing(a);if(0<this.editActionInterval)this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval)},_steps:[],_undoedSteps:[],execCommand:function(a){if(this.customUndo&&("undo"==a||"redo"==a))return this[a]();this.customUndo&&(this.endEditing(),
this._beginEditing());var b=this.inherited(arguments);this.customUndo&&this._endEditing();return b},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(a){var b;try{if(b=this.document.execCommand(a,!1,null),p("webkit")&&!b)throw{code:1011};}catch(c){if(1011==c.code||9==c.code&&p("opera"))b=l.substitute,alert(b(this.commands.systemShortcut,[this.commands[a],
b(this.commands[p("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[a]])]));b=!1}return b},queryCommandEnabled:function(a){return this.customUndo&&("undo"==a||"redo"==a)?"undo"==a?1<this._steps.length:0<this._undoedSteps.length:this.inherited(arguments)},_moveToBookmark:function(a){var b=a.mark,c=a.mark,a=a.isCollapsed,d,e,f;if(c)if(9>p("ie"))if(m.isArray(c))b=[],j.forEach(c,function(a){b.push(w.getNode(a,this.editNode))},this),r.withGlobal(this.window,"moveToBookmark",o,[{mark:b,isCollapsed:a}]);
else{if(c.startContainer&&c.endContainer&&(f=w.getSelection(this.window))&&f.removeAllRanges)f.removeAllRanges(),a=w.create(this.window),d=w.getNode(c.startContainer,this.editNode),e=w.getNode(c.endContainer,this.editNode),d&&e&&(a.setStart(d,c.startOffset),a.setEnd(e,c.endOffset),f.addRange(a))}else if((f=w.getSelection(this.window))&&f.removeAllRanges)f.removeAllRanges(),a=w.create(this.window),d=w.getNode(c.startContainer,this.editNode),e=w.getNode(c.endContainer,this.editNode),d&&e&&(a.setStart(d,
c.startOffset),a.setEnd(e,c.endOffset),f.addRange(a))},_changeToStep:function(a,b){this.setValue(b.text);var c=b.bookmark;c&&this._moveToBookmark(c)},undo:function(){var a=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._steps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(b,this._steps[this._steps.length-1]),this._undoedSteps.push(b),this.onDisplayChanged(),delete this._undoRedoActive,a=!0);delete this._undoRedoActive}return a},redo:function(){var a=
!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._undoedSteps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],b),this._steps.push(b),this.onDisplayChanged(),a=!0);delete this._undoRedoActive}return a},endEditing:function(a){if(this._editTimer)this._editTimer=this._editTimer.remove();if(this._inEditing)this._endEditing(a),this._inEditing=!1},_getBookmark:function(){var a=r.withGlobal(this.window,o.getBookmark),b=[];
if(a&&a.mark){var c=a.mark;if(9>p("ie")){var d=w.getSelection(this.window);if(m.isArray(c))j.forEach(a.mark,function(a){b.push(w.getIndex(a,this.editNode).o)},this),a.mark=b;else if(d){var e;d.rangeCount&&(e=d.getRangeAt(0));a.mark=e?e.cloneRange():r.withGlobal(this.window,o.getBookmark)}}try{if(a.mark&&a.mark.startContainer)b=w.getIndex(a.mark.startContainer,this.editNode).o,a.mark={startContainer:b,startOffset:a.mark.startOffset,endContainer:a.mark.endContainer===a.mark.startContainer?b:w.getIndex(a.mark.endContainer,
this.editNode).o,endOffset:a.mark.endOffset}}catch(f){a.mark=null}}return a},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:C.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var a=C.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(b){!p("ie")&&!this.iframe&&b.keyCode==g.TAB&&!this.tabIndent&&this._saveSelection();if(this.customUndo){var c=b.keyCode;if(b.ctrlKey&&
!b.altKey){if(90==c||122==c){a.stop(b);this.undo();return}if(89==c||121==c){a.stop(b);this.redo();return}}this.inherited(arguments);switch(c){case g.ENTER:case g.BACKSPACE:case g.DELETE:this.beginEditing();break;case 88:case 86:if(b.ctrlKey&&!b.altKey&&!b.metaKey){this.endEditing();88==b.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!b.ctrlKey&&!b.altKey&&!b.metaKey&&(b.keyCode<g.F1||b.keyCode>g.F15)){this.beginEditing();break}case g.ALT:this.endEditing();
break;case g.UP_ARROW:case g.DOWN_ARROW:case g.LEFT_ARROW:case g.RIGHT_ARROW:case g.HOME:case g.END:case g.PAGE_UP:case g.PAGE_DOWN:this.endEditing(!0);case g.CTRL:case g.SHIFT:case g.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(a){}},_restoreSelection:function(){this._savedSelection&&(delete this._cursorToStart,r.withGlobal(this.window,"isCollapsed",o)&&this._moveToBookmark(this._savedSelection),
delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(a){this.customUndo?this.isClosed?this.setValue(a):(this.beginEditing(),a||(a="&#160;"),this.setValue(a),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(a){this.setValueDeferred.then(m.hitch(this,function(){!this.disabled&&a||!this._buttonEnabledPlugins&&a?j.forEach(this._plugins,function(a){a.set("disabled",!0)}):this.disabled&&!a&&j.forEach(this._plugins,function(a){a.set("disabled",
!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&h.set(this.document.body,"color",h.get(this.iframe,"color"))}catch(a){}}});m.mixin(A.registry,{undo:x,redo:x,cut:x,copy:x,paste:x,insertOrderedList:x,insertUnorderedList:x,indent:x,outdent:x,justifyCenter:x,justifyFull:x,justifyLeft:x,justifyRight:x,"delete":x,selectAll:x,removeFormat:x,unlink:x,insertHorizontalRule:x,bold:y,italic:y,underline:y,strikethrough:y,subscript:y,
superscript:y,"|":function(){return new A({setEditor:function(a){this.editor=a;this.button=new q({ownerDocument:a.ownerDocument})}})}});return i})},"dijit/_base/focus":function(){define("dijit/_base/focus","dojo/_base/array,dojo/dom,dojo/_base/lang,dojo/topic,dojo/_base/window,../focus,../main".split(","),function(k,j,i,f,d,b,e){b.focus=function(c){if(c){var f="node"in c?c.node:c,a=c.bookmark,c=c.openedForWindow,g=a?a.isCollapsed:!1;if(f){var i="iframe"==f.tagName.toLowerCase()?f.contentWindow:f;
if(i&&i.focus)try{i.focus()}catch(j){}b._onFocusNode(f)}if(a&&d.withGlobal(c||d.global,e.isCollapsed)&&!g){c&&c.focus();try{d.withGlobal(c||d.global,e.moveToBookmark,null,[a])}catch(l){}}}};b.watch("curNode",function(b,d,a){e._curFocus=a;e._prevFocus=d;a&&f.publish("focusNode",a)});b.watch("activeStack",function(b,d,a){e._activeStack=a});b.on("widget-blur",function(b,d){f.publish("widgetBlur",b,d)});b.on("widget-focus",function(b,d){f.publish("widgetFocus",b,d)});i.mixin(e,{_curFocus:null,_prevFocus:null,
isCollapsed:function(){return e.getBookmark().isCollapsed},getBookmark:function(){var c,e,a=d.doc.selection,f=b.curNode;if(d.global.getSelection){if(a=d.global.getSelection())if(a.isCollapsed){if(c=f?f.tagName:"")if(c=c.toLowerCase(),"textarea"==c||"input"==c&&(!f.type||"text"==f.type.toLowerCase()))return a={start:f.selectionStart,end:f.selectionEnd,node:f,pRange:!0},{isCollapsed:a.end<=a.start,mark:a};c={isCollapsed:!0};if(a.rangeCount)c.mark=a.getRangeAt(0).cloneRange()}else e=a.getRangeAt(0),
c={isCollapsed:!1,mark:e.cloneRange()}}else if(a){c=f?f.tagName:"";c=c.toLowerCase();if(f&&c&&("button"==c||"textarea"==c||"input"==c)){if(a.type&&"none"==a.type.toLowerCase())return{isCollapsed:!0,mark:null};e=a.createRange();return{isCollapsed:e.text&&e.text.length?!1:!0,mark:{range:e,pRange:!0}}}c={};try{e=a.createRange(),c.isCollapsed=!("Text"==a.type?e.htmlText.length:e.length)}catch(i){return c.isCollapsed=!0,c}if("CONTROL"==a.type.toUpperCase())if(e.length){c.mark=[];a=0;for(f=e.length;a<f;)c.mark.push(e.item(a++))}else c.isCollapsed=
!0,c.mark=null;else c.mark=e.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return c},moveToBookmark:function(b){var e=d.doc;if(b=b.mark)if(d.global.getSelection)(e=d.global.getSelection())&&e.removeAllRanges?b.pRange?(e=b.node,e.selectionStart=b.start,e.selectionEnd=b.end):(e.removeAllRanges(),e.addRange(b)):console.warn("No idea how to restore selection for this browser!");else if(e.selection&&b){var a;b.pRange?a=b.range:i.isArray(b)?(a=e.body.createControlRange(),
k.forEach(b,function(b){a.addElement(b)})):(a=e.body.createTextRange(),a.moveToBookmark(b));a.select()}},getFocus:function(c,f){var a=!b.curNode||c&&j.isDescendant(b.curNode,c.domNode)?e._prevFocus:b.curNode;return{node:a,bookmark:a&&a==b.curNode&&d.withGlobal(f||d.global,e.getBookmark),openedForWindow:f}},_activeStack:[],registerIframe:function(c){return b.registerIframe(c)},unregisterIframe:function(b){b&&b.remove()},registerWin:function(c,d){return b.registerWin(c,d)},unregisterWin:function(b){b&&
b.remove()}});return e})},"dijit/Toolbar":function(){define("dijit/Toolbar","require,dojo/_base/declare,dojo/has,dojo/keys,dojo/ready,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),function(k,j,i,f,d,b,e,c){i("dijit-legacy-requires")&&d(0,function(){k(["dijit/ToolbarSeparator"])});return j("dijit.Toolbar",[b,c,e],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);
this.connectKeyNavHandlers(this.isLeftToRight()?[f.LEFT_ARROW]:[f.RIGHT_ARROW],this.isLeftToRight()?[f.RIGHT_ARROW]:[f.LEFT_ARROW])}})})},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(k,j,i,f){return k("dijit.ToolbarSeparator",[i,f],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);j.setSelectable(this.domNode,
!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(k,j,i,f){j=j("dijit._editor._Plugin",null,{constructor:function(d){this.params=d||{};i.mixin(this,this.params);this._connects=[];this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:f,disabled:!1,getLabel:function(d){return this.editor.commands[d]},
_initButton:function(){if(this.command.length){var d=this.getLabel(this.command),b=this.editor,e=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button)this.button=new this.buttonClass(i.mixin({label:d,ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,showLabel:!1,iconClass:e,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){for(var d;d=
this._connects.pop();)d.remove();this.dropDown&&this.dropDown.destroyRecursive()},connect:function(d,b,e){this._connects.push(k.connect(d,b,this,e))},updateState:function(){var d=this.editor,b=this.command,e,c;if(d&&d.isLoaded&&b.length){var f=this.get("disabled");if(this.button)try{c=!f&&d.queryCommandEnabled(b);if(this.enabled!==c)this.enabled=c,this.button.set("disabled",!c);if(c&&"boolean"==typeof this.button.checked&&(e=d.queryCommandState(b),this.checked!==e))this.checked=e,this.button.set("checked",
d.queryCommandState(b))}catch(a){}}},setEditor:function(d){this.editor=d;this._initButton();if(this.button&&this.useDefaultCommand)this.editor.queryCommandAvailable(this.command)?this.connect(this.button,"onClick",i.hitch(this.editor,"execCommand",this.command,this.commandArg)):this.button.domNode.style.display="none";this.connect(this.editor,"onNormalizedDisplayChanged","updateState")},setToolbar:function(d){this.button&&d.addChild(this.button)},set:function(d,b){if("object"===typeof d){for(var e in d)this.set(e,
d[e]);return this}e=this._getAttrNames(d);if(this[e.s])var c=this[e.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(d,b);return c||this},get:function(d){var b=this._getAttrNames(d);return this[b.g]?this[b.g]():this[d]},_setDisabledAttr:function(d){this.disabled=d;this.updateState()},_getAttrNames:function(d){var b=this._attrPairNames;if(b[d])return b[d];var e=d.charAt(0).toUpperCase()+d.substr(1);return b[d]={s:"_set"+e+"Attr",g:"_get"+e+"Attr"}},_set:function(d,b){this[d]=b}});
j.registry={};return j})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling","dojo/_base/declare,dojo/dom-construct,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/_base/window,dojo/window,../_Plugin,../RichText,../range,../../_base/focus".split(","),function(k,j,i,f,d,b,e,c,h,a,g,m){return k("dijit._editor.plugins.EnterKeyHandling",h,{blockNodeForEnter:"BR",constructor:function(a){if(a){if("blockNodeForEnter"in a)a.blockNodeForEnter=a.blockNodeForEnter.toUpperCase();
d.mixin(this,a)}},setEditor:function(a){if(this.editor!==a)if(this.editor=a,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,a.onLoadDeferred.then(d.hitch(this,function(c){this.connect(a.document,"onkeypress",function(a){if(a.charOrCode==f.ENTER){var b=d.mixin({},a);b.shiftKey=!0;this.handleEnterKey(b)||i.stop(a)}});9<=b("ie")&&this.connect(a.document,"onpaste",function(){setTimeout(dojo.hitch(this,function(){var a=this.editor.document.selection.createRange();a.move("character",-1);a.select();
a.move("character",1);a.select()}),0)});return c}));else if(this.blockNodeForEnter){var c=d.hitch(this,this.handleEnterKey);a.addKeyHandler(13,0,0,c);a.addKeyHandler(13,0,1,c);this.connect(this.editor,"onKeyPressed","onKeyPressed")}},onKeyPressed:function(){if(this._checkListLater){if(e.withGlobal(this.editor.window,"isCollapsed",m)){var c=this.editor._sCall("getAncestorElement",["LI"]);if(c){if(b("mozilla")&&"LI"==c.parentNode.parentNode.nodeName)c=c.parentNode.parentNode;var d=c.firstChild;if(d&&
1==d.nodeType&&("UL"==d.nodeName||"OL"==d.nodeName))c.insertBefore(d.ownerDocument.createTextNode("\u00a0"),d),d=g.create(this.editor.window),d.setStart(c.firstChild,0),c=g.getSelection(this.editor.window,!0),c.removeAllRanges(),c.addRange(d)}else a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter),(c=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]))?(c.innerHTML=this.bogusHtmlContent,9>=b("ie")&&(c=this.editor.document.selection.createRange(),c.move("character",
-1),c.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(d){var l;var e,f,h,i,k=this.editor.document,m,q;if(d.shiftKey){var d=this.editor._sCall("getParentElement",[]),t=g.getAncestor(d,this.blockNodes);
if(t){if("LI"==t.tagName)return!0;d=g.getSelection(this.editor.window);e=d.getRangeAt(0);e.collapsed||(e.deleteContents(),d=g.getSelection(this.editor.window),e=d.getRangeAt(0));if(g.atBeginningOfContainer(t,e.startContainer,e.startOffset))m=k.createElement("br"),e=g.create(this.editor.window),t.insertBefore(m,t.firstChild),e.setStartAfter(m),d.removeAllRanges(),d.addRange(e);else if(g.atEndOfContainer(t,e.startContainer,e.startOffset))e=g.create(this.editor.window),m=k.createElement("br"),t.appendChild(m),
t.appendChild(k.createTextNode("\u00a0")),e.setStart(t.lastChild,0),d.removeAllRanges(),d.addRange(e);else return(q=e.startContainer)&&3==q.nodeType?(h=q.nodeValue,f=k.createTextNode(h.substring(0,e.startOffset)),h=k.createTextNode(h.substring(e.startOffset)),i=k.createElement("br"),""==h.nodeValue&&b("webkit")&&(h=k.createTextNode("\u00a0")),j.place(f,q,"after"),j.place(i,f,"after"),j.place(h,i,"after"),j.destroy(q),e=g.create(this.editor.window),e.setStart(h,0),d.removeAllRanges(),d.addRange(e),
!1):!0}else if(d=g.getSelection(this.editor.window),d.rangeCount){if((e=d.getRangeAt(0))&&e.startContainer)if(e.collapsed||(e.deleteContents(),d=g.getSelection(this.editor.window),e=d.getRangeAt(0)),(q=e.startContainer)&&3==q.nodeType){t=!1;m=e.startOffset;if(q.length<m)h=this._adjustNodeAndOffset(q,m),q=h.node,m=h.offset;h=q.nodeValue;f=k.createTextNode(h.substring(0,m));h=k.createTextNode(h.substring(m));i=k.createElement("br");h.length||(h=k.createTextNode("\u00a0"),t=!0);f.length?j.place(f,q,
"after"):f=q;j.place(i,f,"after");j.place(h,i,"after");j.destroy(q);e=g.create(this.editor.window);e.setStart(h,0);e.setEnd(h,h.length);d.removeAllRanges();d.addRange(e);t&&!b("webkit")?this.editor._sCall("remove",[]):this.editor._sCall("collapse",[!0])}else 0<=e.startOffset&&(m=q.childNodes[e.startOffset]),i=k.createElement("br"),h=k.createTextNode("\u00a0"),m?(j.place(i,m,"before"),j.place(h,i,"after")):(q.appendChild(i),q.appendChild(h)),e=g.create(this.editor.window),e.setStart(h,0),e.setEnd(h,
h.length),d.removeAllRanges(),d.addRange(e),this.editor._sCall("collapse",[!0])}else a.prototype.execCommand.call(this.editor,"inserthtml","<br>");return!1}var v=!0,d=g.getSelection(this.editor.window);e=d.getRangeAt(0);e.collapsed||(e.deleteContents(),d=g.getSelection(this.editor.window),e=d.getRangeAt(0));m=g.getBlockAncestor(e.endContainer,null,this.editor.editNode);if(this._checkListLater=(i=m.blockNode)&&("LI"==i.nodeName||"LI"==i.parentNode.nodeName)){if(b("mozilla"))this._pressedEnterInBlock=
i;if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(i.innerHTML))i.innerHTML="",b("webkit")&&(e=g.create(this.editor.window),e.setStart(i,0),d.removeAllRanges(),d.addRange(e)),this._checkListLater=!1;return!0}if(!m.blockNode||m.blockNode===this.editor.editNode){try{a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(A){}m={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),
blockContainer:this.editor.editNode};if(m.blockNode){if(m.blockNode!=this.editor.editNode&&!(m.blockNode.textContent||m.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(m.blockNode),!1}else m.blockNode=this.editor.editNode;d=g.getSelection(this.editor.window);e=d.getRangeAt(0)}i=k.createElement(this.blockNodeForEnter);i.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(m.blockNode);var s=e.endOffset,v=e.endContainer;if(v.length<s)h=this._adjustNodeAndOffset(v,
s),v=h.node,s=h.offset;if(g.atEndOfContainer(m.blockNode,v,s))m.blockNode===m.blockContainer?m.blockNode.appendChild(i):j.place(i,m.blockNode,"after"),v=!1,e=g.create(this.editor.window),e.setStart(i,0),d.removeAllRanges(),d.addRange(e),this.editor.height&&c.scrollIntoView(i);else if(g.atBeginningOfContainer(m.blockNode,e.startContainer,e.startOffset))j.place(i,m.blockNode,m.blockNode===m.blockContainer?"first":"before"),i.nextSibling&&this.editor.height&&(e=g.create(this.editor.window),e.setStart(i.nextSibling,
0),d.removeAllRanges(),d.addRange(e),c.scrollIntoView(i.nextSibling)),v=!1;else{m.blockNode===m.blockContainer?m.blockNode.appendChild(i):j.place(i,m.blockNode,"after");v=!1;if(m.blockNode.style&&i.style&&m.blockNode.style.cssText)i.style.cssText=m.blockNode.style.cssText;if((q=e.startContainer)&&3==q.nodeType){s=e.endOffset;if(q.length<s)h=this._adjustNodeAndOffset(q,s),q=h.node,s=h.offset;h=q.nodeValue;f=k.createTextNode(h.substring(0,s));h=k.createTextNode(h.substring(s,h.length));j.place(f,q,
"before");j.place(h,q,"after");j.destroy(q);for(f=f.parentNode;f!==m.blockNode;){s=k.createElement(f.tagName);if(f.style&&s.style&&f.style.cssText)s.style.cssText=f.style.cssText;if("FONT"===f.tagName){if(f.color)s.color=f.color;if(f.face)s.face=f.face;if(f.size)s.size=f.size}for(e=h;e;)q=e.nextSibling,s.appendChild(e),e=q;j.place(s,f,"after");h=s;f=f.parentNode}e=h;if(1==e.nodeType||3==e.nodeType&&e.nodeValue)i.innerHTML="";for(f=e;e;)q=e.nextSibling,i.appendChild(e),e=q}e=g.create(this.editor.window);
k=f;if("BR"!==this.blockNodeForEnter){for(;k;)t=k,l=q=k.firstChild,k=l;if(t&&t.parentNode){if(i=t.parentNode,e.setStart(i,0),d.removeAllRanges(),d.addRange(e),this.editor.height&&c.scrollIntoView(i),b("mozilla"))this._pressedEnterInBlock=m.blockNode}else v=!0}else if(e.setStart(i,0),d.removeAllRanges(),d.addRange(e),this.editor.height&&c.scrollIntoView(i),b("mozilla"))this._pressedEnterInBlock=m.blockNode}return v},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3==a.nextSibling.nodeType;)b-=
a.length,a=a.nextSibling;return{node:a,offset:b}},removeTrailingBr:function(a){if(a=/P|DIV|LI/i.test(a.tagName)?a:this.editor._sCall("getParentOfType",[a,["P","DIV","LI"]]))if(a.lastChild&&(1<a.childNodes.length&&3==a.lastChild.nodeType&&/^[\s\xAD]*$/.test(a.lastChild.nodeValue)||"BR"==a.lastChild.tagName)&&j.destroy(a.lastChild),!a.childNodes.length)a.innerHTML=this.bogusHtmlContent}})})},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText","dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/on,dojo/query,dojo/ready,dojo/sniff,dojo/topic,dojo/_base/unload,dojo/_base/url,dojo/_base/window,../_Widget,../_CssStateMixin,./selection,./range,./html,../focus,../main".split(","),
function(k,j,i,f,d,b,e,c,h,a,g,m,p,l,u,r,o,n,z,q,t,v,A,s,C,w,E,D,x){var y=i("dijit._editor.RichText",[A,s],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(a&&l.isString(a.value))this.value=a.value;this.onLoadDeferred=new f},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[l.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(n("mozilla"))this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);if(n("webkit"))this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);if(n("ie"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[l.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);this.inherited(arguments);z.publish(x._scopeName+
"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=l.hitch(this,function(a,b){return function(){return!this.execCommand(a,b)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock","h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};if(!n("ie"))b.Z=a("redo");for(var c in b)this.addKeyHandler(c,
!0,!1,b[c])},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(y._editorCommandsLocalized)this._local2NativeFormatNames=y._local2NativeFormatNames,this._native2LocalFormatNames=y._native2LocalFormatNames;else{y._editorCommandsLocalized=!0;y._local2NativeFormatNames={};y._native2LocalFormatNames={};this._local2NativeFormatNames=y._local2NativeFormatNames;this._native2LocalFormatNames=y._native2LocalFormatNames;for(var a="div,p,pre,h1,h2,h3,h4,h5,h6,ol,ul,address".split(","),
b="",d,e=0;d=a[e++];)b="l"!==d.charAt(1)?b+("<"+d+"><span>content</span></"+d+"><br/>"):b+("<"+d+"><li>content</li></"+d+"><br/>");var f=c.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:0.01},innerHTML:b});this.ownerDocumentBody.appendChild(f);this.defer(l.hitch(this,function(){for(var a=f.firstChild;a;)try{this._sCall("selectElement",[a.firstChild]);var b=a.tagName.toLowerCase();this._local2NativeFormatNames[b]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[b]]=
b;a=a.nextSibling.nextSibling}catch(d){}c.destroy(f)}))}},open:function(h){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new f;this.isClosed||this.close();z.publish(x._scopeName+"._editor.RichText::open",this);if(1===arguments.length&&h.nodeName)this.domNode=h;var g=this.domNode,i;if(l.isString(this.value))i=this.value,delete this.value,g.innerHTML="";else if(g.nodeName&&"textarea"==g.nodeName.toLowerCase()){var m=this.textarea=g;this.name=m.name;i=m.value;g=this.domNode=
this.ownerDocument.createElement("div");g.setAttribute("widgetId",this.id);m.removeAttribute("widgetId");g.cssText=m.cssText;g.className+=" "+m.className;c.place(g,m,"before");var k=l.hitch(this,function(){a.set(m,{display:"block",position:"absolute",top:"-1000px"});if(n("ie")){var b=m.style;this.__overflow=b.overflow;b.overflow="hidden"}});n("ie")?this.defer(k,10):k();if(m.form){var o=m.value;this.reset=function(){this.getValue()!==o&&this.replaceValue(o)};u(m.form,"submit",l.hitch(this,function(){b.set(m,
"disabled",this.disabled);m.value=this.getValue()}))}}else i=E.getChildrenHtml(g),g.innerHTML="";this.value=i;if(g.nodeName&&"LI"===g.nodeName)g.innerHTML=" <br>";this.header=g.ownerDocument.createElement("div");g.appendChild(this.header);this.editingArea=g.ownerDocument.createElement("div");g.appendChild(this.editingArea);this.footer=g.ownerDocument.createElement("div");g.appendChild(this.footer);if(!this.name)this.name=this.id+"_AUTOGEN";if(""!==this.name&&(!j.useXDomain||j.allowXdRichTextSave)){if((k=
d.byId(x._scopeName+"._editor.RichText.value"))&&""!==k.value)for(var p=k.value.split(this._SEPARATOR),r=0,F;F=p[r++];)if(F=F.split(this._NAME_CONTENT_SEP),F[0]===this.name){i=F[1];p=p.splice(r,1);k.value=p.join(this._SEPARATOR);break}if(!y._globalSaveHandler)y._globalSaveHandler={},q.addOnUnload(function(){for(var a in y._globalSaveHandler){var b=y._globalSaveHandler[a];l.isFunction(b)&&b()}});y._globalSaveHandler[this.id]=l.hitch(this,"_saveContent")}this.isClosed=!1;var s=this.editorObject=this.iframe=
this.ownerDocument.createElement("iframe");s.id=this.id+"_iframe";s.style.border="none";s.style.width="100%";if(this._layoutMode)s.style.height="100%";else if(7<=n("ie")){if(this.height)s.style.height=this.height;if(this.minHeight)s.style.minHeight=this.minHeight}else s.style.height=this.height?this.height:this.minHeight;s.frameBorder=0;s._loadFunc=l.hitch(this,function(a){this.window=a;this.document=this.window.document;n("ie")&&this._localizeEditorCommands();this.onLoad(i)});var k=this._getIframeDocTxt(),
t="javascript: '"+k.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";s.setAttribute("src",t);this.editingArea.appendChild(s);4>=n("safari")&&(k=s.getAttribute("src"),(!k||-1===k.indexOf("javascript"))&&this.defer(function(){s.setAttribute("src",t)}));if("LI"===g.nodeName)g.lastChild.style.marginTop="-1.2em";e.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var b=a.getComputedStyle(this.domNode),c="",d=!0;if(n("ie")||n("webkit")||!this.height&&
!n("mozilla"))c="<div id='dijitEditorBody'></div>",d=!1;else if(n("mozilla"))this._cursorToStart=!0,c="&#160;";var e=[b.fontWeight,b.fontSize,b.fontFamily].join(" "),f=b.lineHeight,f=0<=f.indexOf("px")?parseFloat(f)/parseFloat(b.fontSize):0<=f.indexOf("em")?parseFloat(f):"normal",h="",g=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(b){var b=b.replace(/^;/ig,"")+";",c=b.split(":")[0];if(c){var c=l.trim(c),c=c.toLowerCase(),d,e="";for(d=0;d<c.length;d++){var f=c.charAt(d);switch(f){case "-":d++,
f=c.charAt(d).toUpperCase();default:e+=f}}a.set(g.domNode,e,"")}h+=b+";"});b=r('label[for="'+this.id+'"]');return[this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",n("mozilla")&&b.length?"<title>"+b[0].innerHTML+"</title>\n":"","<meta http-equiv='Content-Type' content='text/html'>\n<style>\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n",n("webkit")?"\t\twidth: 100%;\n":"",n("webkit")?"\t\theight: 100%;\n":"","\t}\n\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",
e,";\n",this.height||n("opera")?"":"\t\tposition: fixed;\n","\t\tmin-height:",this.minHeight,";\n\t\tline-height:",f,";\n\t}\n\tp{ margin: 1em 0; }\n",!d&&!this.height?"\tbody,html {overflow-y: hidden;}\n":"","\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",!n("ie")?"\tli{ min-height:1.2em; }\n":"","</style>\n",this._applyEditingAreaStyleSheets(),"\n</head>\n<body ",
d?"id='dijitEditorBody' ":"","onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+h+"'>",c,"</body>\n</html>"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];if(this.styleSheets)a=this.styleSheets.split(";"),this.styleSheets="";a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var b="",c=0,d;d=a[c++];)d=(new t(v.global.location,d)).toString(),this.editingAreaStyleSheets.push(d),b+='<link rel="stylesheet" type="text/css" href="'+d+'"/>';
return b},addStyleSheet:function(a){var b=a.toString();if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new t(v.global.location,b)).toString();-1<k.indexOf(this.editingAreaStyleSheets,b)||(this.editingAreaStyleSheets.push(b),this.onLoadDeferred.then(l.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(b);else{var a=this.document.getElementsByTagName("head")[0],c=this.document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.appendChild(c)}})))},
removeStyleSheet:function(a){var b=a.toString();if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new t(v.global.location,b)).toString();a=k.indexOf(this.editingAreaStyleSheets,b);-1!==a&&(delete this.editingAreaStyleSheets[a],r('link:[href="'+b+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(a){a=!!a;this._set("disabled",a);if(this.isLoaded){if(n("ie")||n("webkit")||n("opera")){var b=n("ie")&&(this.isLoaded||!this.focusOnLoad);if(b)this.editNode.unselectable=
"on";this.editNode.contentEditable=!a;b&&this.defer(function(){if(this.editNode)this.editNode.unselectable="off"})}else{try{this.document.designMode=a?"off":"on"}catch(c){return}if(!a&&this._mozSettingProps)for(b in a=this._mozSettingProps,a)if(a.hasOwnProperty(b))try{this.document.execCommand(b,!1,a[b])}catch(d){}}this._disabledOK=!0}},onLoad:function(a){if(!this.window.__registeredWindow)this.window.__registeredWindow=!0,this._iframeRegHandle=D.registerIframe(this.iframe);if(!n("ie")&&!n("webkit")&&
(this.height||n("mozilla")))this.editNode=this.document.body;else{this.editNode=this.document.body.firstChild;var b=this;if(n("ie"))this.tabStop=c.create("div",{tabIndex:-1},this.editingArea),this.iframe.onfocus=function(){b.editNode.setActive()}}this.focusNode=this.editNode;var d=this.events.concat(this.captureEvents),e=this.iframe?this.document:this.editNode;k.forEach(d,function(a){this.connect(e,a.toLowerCase(),a)},this);this.connect(e,"onmouseup","onClick");n("ie")?(this.connect(this.document,
"onmousedown","_onIEMouseDown"),this.editNode.style.zoom=1):this.connect(this.document,"onmousedown",function(){delete this._cursorToStart});if(n("webkit"))this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged"),this.connect(this.document,"onmousedown",function(a){(a=a.target)&&(a===this.document.body||a===this.document)&&this.defer("placeCursorAtEnd")});if(n("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(f){}this.isLoaded=!0;this.set("disabled",
this.disabled);d=l.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&o(l.hitch(this,"defer","focus",this.updateInterval));this.value=this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(d):d()},onKeyDown:function(a){if(a.keyCode===p.TAB&&this.isTabIndent&&(g.stop(a),this.queryCommandEnabled(a.shiftKey?"outdent":"indent")))this.execCommand(a.shiftKey?"outdent":"indent");if(n("ie"))if(a.keyCode==p.TAB&&
!this.isTabIndent)a.shiftKey&&!a.ctrlKey&&!a.altKey?this.iframe.focus():!a.shiftKey&&!a.ctrlKey&&!a.altKey&&this.tabStop.focus();else if(a.keyCode===p.BACKSPACE&&"Control"===this.document.selection.type)g.stop(a),this.execCommand("delete");else if(65<=a.keyCode&&90>=a.keyCode||37<=a.keyCode&&40>=a.keyCode)a.charCode=a.keyCode,this.onKeyPress(a);n("ff")&&(a.keyCode===p.PAGE_UP||a.keyCode===p.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&a.preventDefault();return!0},onKeyUp:function(){},
setDisabled:function(a){m.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?b.set(this.document.body,"spellcheck",!a):this.onLoadDeferred.then(l.hitch(this,function(){b.set(this.document.body,"spellcheck",!a)}));this._set("disableSpellCheck",a)},onKeyPress:function(a){var b=this._keyHandlers[a.keyChar&&a.keyChar.toLowerCase()||
a.keyCode],c=arguments;b&&!a.altKey&&k.some(b,function(b){if(!(b.shift^a.shiftKey)&&!(b.ctrl^(a.ctrlKey||a.metaKey)))return b.handler.apply(this,c)||a.preventDefault(),!0},this);if(!this._onKeyHitch)this._onKeyHitch=l.hitch(this,"onKeyPressed");this.defer("_onKeyHitch",1);return!0},addKeyHandler:function(a,b,c,d){l.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:c||!1,ctrl:b||!1,handler:d})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},
_onIEMouseDown:function(){!this.focused&&!this.disabled&&this.focus()},_onBlur:function(a){this.inherited(arguments);var b=this.getValue(!0);if(b!==this.value)this.onChange(b);this._set("value",b)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!n("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},
focus:function(){if(this.isLoaded){if(this._cursorToStart&&(delete this._cursorToStart,this.editNode.childNodes)){this.placeCursorAtStart();return}n("ie")?this.editNode&&this.editNode.focus&&this.iframe.fireEvent("onfocus",document.createEventObject()):D.focus(this.iframe)}else this.focusOnLoad=!0},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},
onChange:function(){},_normalizeCommand:function(a,b){var c=a.toLowerCase();"formatblock"===c?n("safari")&&void 0===b&&(c="heading"):"hilitecolor"===c&&!n("mozilla")&&(c="backcolor");return c},_qcaCache:{},queryCommandAvailable:function(a){var b=this._qcaCache[a];return void 0!==b?b:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){function b(a){return{ie:Boolean(a&c),mozilla:Boolean(a&d),webkit:Boolean(a&e),opera:Boolean(a&f)}}var c=1,d=2,e=4,f=8,h=null;switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":h=
b(d|c|e|f);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":h=b(d|c|f|e);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":h=b(c);break;case "cut":case "copy":case "paste":h=b(c|d|e|f);break;case "inserttable":h=
b(d|c);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":h=b(c|d);break;default:return!1}return n("ie")&&h.ie||n("mozilla")&&h.mozilla||n("webkit")&&h.webkit||n("opera")&&h.opera},execCommand:function(a,b){var c;this.focus();a=this._normalizeCommand(a,b);if(void 0!==b){if("heading"===a)throw Error("unimplemented");"formatblock"===a&&n("ie")&&(b="<"+b+">")}var d="_"+a+"Impl";if(this[d])c=this[d](b);else if((b=
1<arguments.length?b:null)||"createlink"!==a)c=this.document.execCommand(a,!1,b);this.onDisplayChanged();return c},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;var a=this._normalizeCommand(a),b="_"+a+"EnabledImpl";return this[b]?this[b](a):this._browserQueryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);try{return this.document.queryCommandState(a)}catch(b){return!1}},queryCommandValue:function(a){if(this.disabled||
!this._disabledOK)return!1;a=this._normalizeCommand(a);if(n("ie")&&"formatblock"===a)a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(n("mozilla")&&"hilitecolor"===a){var b;try{b=this.document.queryCommandValue("styleWithCSS")}catch(c){b=!1}this.document.execCommand("styleWithCSS",!1,!0);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",!1,b)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,b){return v.withGlobal(this.window,
a,C,b)},placeCursorAtStart:function(){this.focus();var a=!1;if(n("mozilla"))for(var b=this.editNode.firstChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this._sCall("selectElement",[b]);break}}else if(1===b.nodeType){a=!0;/br|input|img|base|meta|area|basefont|hr|link/.test(b.tagName?b.tagName.toLowerCase():"")?this._sCall("selectElement",[b]):this._sCall("selectElementChildren",[b]);break}b=b.nextSibling}else a=!0,this._sCall("selectElementChildren",[this.editNode]);
a&&this._sCall("collapse",[!0])},placeCursorAtEnd:function(){this.focus();var a=!1;if(n("mozilla"))for(var b=this.editNode.lastChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this._sCall("selectElement",[b]);break}}else if(1===b.nodeType){a=!0;this._sCall("selectElement",[b.lastChild||b]);break}b=b.previousSibling}else a=!0,this._sCall("selectElementChildren",[this.editNode]);a&&this._sCall("collapse",[!1])},getValue:function(a){return this.textarea&&(this.isClosed||
!this.isLoaded)?this.textarea.value:this._postFilterContent(null,a)},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(this.isLoaded){this._cursorToStart=!0;if(this.textarea&&(this.isClosed||!this.isLoaded))this.textarea.value=a;else{var a=this._preFilterContent(a),b=this.isClosed?this.domNode:this.editNode;a&&n("mozilla")&&"<p></p>"===a.toLowerCase()&&(a="<p>&#160;</p>");!a&&n("webkit")&&(a="&#160;");b.innerHTML=a;this._preDomFilterContent(b)}this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(l.hitch(this,function(){this.setValue(a)}))},replaceValue:function(a){if(this.isClosed)this.setValue(a);else if(this.window&&this.window.getSelection&&!n("mozilla"))this.setValue(a);else if(this.window&&this.window.getSelection){a=this._preFilterContent(a);this.execCommand("selectall");if(!a)this._cursorToStart=!0,a="&#160;";this.execCommand("inserthtml",a);this._preDomFilterContent(this.editNode)}else this.document&&this.document.selection&&this.setValue(a);
this._set("value",this.getValue(!0))},_preFilterContent:function(a){var b=a;k.forEach(this.contentPreFilters,function(a){a&&(b=a(b))});return b},_preDomFilterContent:function(a){a=a||this.editNode;k.forEach(this.contentDomPreFilters,function(b){b&&l.isFunction(b)&&b(a)},this)},_postFilterContent:function(a,b){var c;l.isString(a)?c=a:(a=a||this.editNode,this.contentDomPostFilters.length&&(b&&(a=l.clone(a)),k.forEach(this.contentDomPostFilters,function(b){a=b(a)})),c=E.getChildrenHtml(a));l.trim(c.replace(/^\xA0\xA0*/,
"").replace(/\xA0\xA0*$/,"")).length||(c="");k.forEach(this.contentPostFilters,function(a){c=a(c)});return c},_saveContent:function(){var a=d.byId(x._scopeName+"._editor.RichText.value");a&&(a.value&&(a.value+=this._SEPARATOR),a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");b||(a=a.replace(/'/gm,"&#39;"));return a},getNodeHtml:function(a){m.deprecated("dijit.Editor::getNodeHtml is deprecated",
"use dijit/_editor/html::getNodeHtml instead",2);return E.getNodeHtml(a)},getNodeChildrenHtml:function(a){m.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return E.getChildrenHtml(a)},close:function(a){if(!this.isClosed){arguments.length||(a=!0);a&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this.disconnect(this._webkitListener),delete this._webkitListener);if(n("ie"))this.iframe.onfocus=
null;this.iframe._loadFunc=null;this._iframeRegHandle&&(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var b=this.textarea.style;b.position="";b.left=b.top="";if(n("ie"))b.overflow=this.__overflow,this.__overflow=null;this.textarea.value=this.value;c.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;e.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;
if(this.window&&this.window._frameElement)this.window._frameElement=null;this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);y._globalSaveHandler&&delete y._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,
"");a=a.replace(/\sclass="apple-style-span"/gi,"");return a=a.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")},
_browserQueryCommandEnabled:function(a){if(!a)return!1;var b=n("ie")?this.document.selection.createRange():this.document;try{return b.queryCommandEnabled(a)}catch(c){return!1}},_createlinkEnabledImpl:function(){var a=!0;return a=n("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var a=!0;return a=n("mozilla")||n("webkit")?this._sCall("hasAncestorElement",["a"]):this._browserQueryCommandEnabled("unlink")},
_inserttableEnabledImpl:function(){var a=!0;return a=n("mozilla")||n("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var a=!0;n("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("cut");return a},_copyEnabledImpl:function(){var a=!0;n("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("copy");return a},_pasteEnabledImpl:function(){var a=!0;return n("webkit")?
!0:a=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(a){return n("ie")?this._inserthtmlImpl("<hr>"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){return this.queryCommandEnabled("unlink")&&(n("mozilla")||n("webkit"))?(this._sCall("selectElement",[this._sCall("getAncestorElement",["a"])]),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",!1,a)},_hilitecolorImpl:function(a){var b;this._handleTextColorOrProperties("hilitecolor",
a)||(n("mozilla")?(this.document.execCommand("styleWithCSS",!1,!0),b=this.document.execCommand("hilitecolor",!1,a),this.document.execCommand("styleWithCSS",!1,!1)):b=this.document.execCommand("hilitecolor",!1,a));return b},_backcolorImpl:function(a){n("ie")&&(a=a?a:null);var b=this._handleTextColorOrProperties("backcolor",a);b||(b=this.document.execCommand("backcolor",!1,a));return b},_forecolorImpl:function(a){n("ie")&&(a=a?a:null);var b=!1;(b=this._handleTextColorOrProperties("forecolor",a))||(b=
this.document.execCommand("forecolor",!1,a));return b},_inserthtmlImpl:function(a){var a=this._preFilterContent(a),b=!0;if(n("ie")){var c=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var d=c.item(0);c.length;)c.remove(c.item(0));d.outerHTML=a}else c.pasteHTML(a);c.select()}else n("mozilla")&&!a.length?this._sCall("remove"):b=this.document.execCommand("inserthtml",!1,a);return b},_boldImpl:function(a){var b=!1;n("ie")&&(this._adaptIESelection(),
b=this._adaptIEFormatAreaAndExec("bold"));b||(b=this.document.execCommand("bold",!1,a));return b},_italicImpl:function(a){var b=!1;n("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("italic"));b||(b=this.document.execCommand("italic",!1,a));return b},_underlineImpl:function(a){var b=!1;n("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("underline"));b||(b=this.document.execCommand("underline",!1,a));return b},_strikethroughImpl:function(a){var b=!1;n("ie")&&(this._adaptIESelection(),
b=this._adaptIEFormatAreaAndExec("strikethrough"));b||(b=this.document.execCommand("strikethrough",!1,a));return b},_superscriptImpl:function(a){var b=!1;n("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("superscript"));b||(b=this.document.execCommand("superscript",!1,a));return b},_subscriptImpl:function(a){var b=!1;n("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("subscript"));b||(b=this.document.execCommand("subscript",!1,a));return b},_fontnameImpl:function(a){var b;
n("ie")&&(b=this._handleTextColorOrProperties("fontname",a));b||(b=this.document.execCommand("fontname",!1,a));return b},_fontsizeImpl:function(a){var b;n("ie")&&(b=this._handleTextColorOrProperties("fontsize",a));b||(b=this.document.execCommand("fontsize",!1,a));return b},_insertorderedlistImpl:function(a){var b=!1;n("ie")&&(b=this._adaptIEList("insertorderedlist",a));b||(b=this.document.execCommand("insertorderedlist",!1,a));return b},_insertunorderedlistImpl:function(a){var b=!1;n("ie")&&(b=this._adaptIEList("insertunorderedlist",
a));b||(b=this.document.execCommand("insertunorderedlist",!1,a));return b},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(a){var b=0;if(a&&a.childNodes){var c;for(c=0;c<a.childNodes.length;c++)var d=h.position(a.childNodes[c]),b=b+d.h}return b},_isNodeEmpty:function(a,b){return 1===a.nodeType?0<a.childNodes.length?this._isNodeEmpty(a.childNodes[0],b):!0:3===a.nodeType?
""===a.nodeValue.substring(b):!1},_removeStartingRangeFromRange:function(a,b){if(a.nextSibling)b.setStart(a.nextSibling,0);else{for(var c=a.parentNode;c&&null==c.nextSibling;)c=c.parentNode;c&&b.setStart(c.nextSibling,0)}return b},_adaptIESelection:function(){var a=w.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var b=a.getRangeAt(0),c=b.startContainer,d=b.startOffset;3===c.nodeType&&d>=c.length&&c.nextSibling;)d-=c.length,c=c.nextSibling;for(var e=null;this._isNodeEmpty(c,d)&&
c!==e;)e=c,b=this._removeStartingRangeFromRange(c,b),c=b.startContainer,d=0;a.removeAllRanges();a.addRange(b)}},_adaptIEFormatAreaAndExec:function(a){var b=w.getSelection(this.window),d=this.document,e,f,h,g,i,j,m;if(a&&b&&b.isCollapsed){if(this.queryCommandValue(a)){a=this._tagNamesForCommand(a);h=b.getRangeAt(0);g=h.startContainer;if(3===g.nodeType&&(f=h.endOffset,g.length<f))f=this._adjustNodeAndOffset(e,f),g=f.node;for(;g&&g!==this.editNode;){e=g.tagName?g.tagName.toLowerCase():"";if(-1<k.indexOf(a,
e)){m=g;break}g=g.parentNode}if(m&&(e=h.startContainer,a=d.createElement(m.tagName),c.place(a,m,"after"),e&&3===e.nodeType)){f=h.endOffset;if(e.length<f)f=this._adjustNodeAndOffset(e,f),e=f.node,f=f.offset;g=e.nodeValue;h=d.createTextNode(g.substring(0,f));var l=g.substring(f,g.length);l&&(i=d.createTextNode(l));c.place(h,e,"before");if(i)j=d.createElement("span"),j.className="ieFormatBreakerSpan",c.place(j,e,"after"),c.place(i,j,"after"),i=j;c.destroy(e);h=h.parentNode;for(e=[];h!==m;){g=h.tagName;
f={tagName:g};e.push(f);g=d.createElement(g);if(h.style&&g.style&&h.style.cssText)g.style.cssText=h.style.cssText,f.cssText=h.style.cssText;if("FONT"===h.tagName){if(h.color)g.color=h.color,f.color=h.color;if(h.face)g.face=h.face,f.face=h.face;if(h.size)g.size=h.size,f.size=h.size}if(h.className)g.className=h.className,f.className=h.className;if(i)for(;i;)f=i.nextSibling,g.appendChild(i),i=f;g.tagName==h.tagName?(j=d.createElement("span"),j.className="ieFormatBreakerSpan",c.place(j,h,"after"),c.place(g,
j,"after")):c.place(g,h,"after");i=g;h=h.parentNode}if(i){if(1===i.nodeType||3===i.nodeType&&i.nodeValue)a.innerHTML="";for(;i;)f=i.nextSibling,a.appendChild(i),i=f}if(e.length){f=e.pop();i=d.createElement(f.tagName);if(f.cssText&&i.style)i.style.cssText=f.cssText;if(f.className)i.className=f.className;if("FONT"===f.tagName){if(f.color)i.color=f.color;if(f.face)i.face=f.face;if(f.size)i.size=f.size}for(c.place(i,a,"before");e.length;){f=e.pop();m=d.createElement(f.tagName);if(f.cssText&&m.style)m.style.cssText=
f.cssText;if(f.className)m.className=f.className;if("FONT"===f.tagName){if(f.color)m.color=f.color;if(f.face)m.face=f.face;if(f.size)m.size=f.size}i.appendChild(m);i=m}m=d.createTextNode(".");j.appendChild(m);i.appendChild(m)}else j=d.createElement("span"),j.className="ieFormatBreakerSpan",m=d.createTextNode("."),j.appendChild(m),c.place(j,a,"before");i=w.create(this.window);i.setStart(m,0);i.setEnd(m,m.length);b.removeAllRanges();b.addRange(i);this._sCall("collapse",[!1]);m.parentNode.innerHTML=
"";a.firstChild||c.destroy(a);return!0}return!1}h=b.getRangeAt(0);if((e=h.startContainer)&&3===e.nodeType){f=h.startOffset;if(e.length<f)f=this._adjustNodeAndOffset(e,f),e=f.node,f=f.offset;g=e.nodeValue;h=d.createTextNode(g.substring(0,f));l=g.substring(f);""!==l&&(i=d.createTextNode(g.substring(f)));j=d.createElement("span");m=d.createTextNode(".");j.appendChild(m);h.length?c.place(h,e,"after"):h=e;c.place(j,h,"after");i&&c.place(i,j,"after");c.destroy(e);i=w.create(this.window);i.setStart(m,0);
i.setEnd(m,m.length);b.removeAllRanges();b.addRange(i);d.execCommand(a);c.place(j.firstChild,j,"before");c.destroy(j);i.setStart(m,0);i.setEnd(m,m.length);b.removeAllRanges();b.addRange(i);this._sCall("collapse",[!1]);m.parentNode.innerHTML="";return!0}}else return!1},_adaptIEList:function(a){var b=w.getSelection(this.window);if(b.isCollapsed&&b.rangeCount&&!this.queryCommandValue(a)){var d=b.getRangeAt(0),e=d.startContainer;if(e&&3==e.nodeType&&!d.startOffset)return d="ul","insertorderedlist"===
a&&(d="ol"),a=this.document.createElement(d),d=c.create("li",null,a),c.place(a,e,"before"),d.appendChild(e),c.create("br",null,a,"after"),a=w.create(this.window),a.setStart(e,0),a.setEnd(e,e.length),b.removeAllRanges(),b.addRange(a),this._sCall("collapse",[!0]),!0}return!1},_handleTextColorOrProperties:function(b,d){var e=w.getSelection(this.window),f=this.document,h,g,i,j,m,d=d||null;if(b&&e&&e.isCollapsed&&e.rangeCount&&(g=e.getRangeAt(0),(h=g.startContainer)&&3===h.nodeType)){m=g.startOffset;if(h.length<
m)g=this._adjustNodeAndOffset(h,m),h=g.node,m=g.offset;i=h.nodeValue;g=f.createTextNode(i.substring(0,m));""!==i.substring(m)&&(j=f.createTextNode(i.substring(m)));i=f.createElement("span");m=f.createTextNode(".");i.appendChild(m);f=f.createElement("span");i.appendChild(f);g.length?c.place(g,h,"after"):g=h;c.place(i,g,"after");j&&c.place(j,i,"after");c.destroy(h);h=w.create(this.window);h.setStart(m,0);h.setEnd(m,m.length);e.removeAllRanges();e.addRange(h);if(n("webkit")){e="color";if("hilitecolor"===
b||"backcolor"===b)e="backgroundColor";a.set(i,e,d);this._sCall("remove",[]);c.destroy(f);i.innerHTML="&#160;";this._sCall("selectElement",[i]);this.focus()}else this.execCommand(b,d),c.place(i.firstChild,i,"before"),c.destroy(i),h.setStart(m,0),h.setEnd(m,m.length),e.removeAllRanges(),e.addRange(h),this._sCall("collapse",[!1]),m.parentNode.removeChild(m);return!0}return!1},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3===a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,
offset:b}},_tagNamesForCommand:function(a){return"bold"===a?["b","strong"]:"italic"===a?["i","em"]:"strikethrough"===a?["s","strike"]:"superscript"===a?["sup"]:"subscript"===a?["sub"]:"underline"===a?["u"]:[]},_stripBreakerNodes:function(a){if(this.isLoaded)return r(".ieFormatBreakerSpan",a).forEach(function(a){for(;a.firstChild;)c.place(a.firstChild,a,"before");c.destroy(a)}),a}});return y})},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff",
"dojo/_base/window","../main"],function(k,j,i,f,d){var b={getType:function(){if(f.doc.getSelection){var b="text",c;try{c=f.global.getSelection()}catch(d){}c&&1==c.rangeCount&&(c=c.getRangeAt(0),c.startContainer==c.endContainer&&1==c.endOffset-c.startOffset&&3!=c.startContainer.nodeType&&(b="control"));return b}return f.doc.selection.type.toLowerCase()},getSelectedText:function(){if(f.doc.getSelection){var b=f.global.getSelection();return b?b.toString():""}return"control"==d._editor.selection.getType()?
null:f.doc.selection.createRange().text},getSelectedHtml:function(){if(f.doc.getSelection){var b=f.global.getSelection();if(b&&b.rangeCount){var c,h="";for(c=0;c<b.rangeCount;c++){var a=b.getRangeAt(c).cloneContents(),g=f.doc.createElement("div");g.appendChild(a);h+=g.innerHTML}return h}return null}return"control"==d._editor.selection.getType()?null:f.doc.selection.createRange().htmlText},getSelectedElement:function(){if("control"==d._editor.selection.getType()){if(f.doc.getSelection){var b=f.global.getSelection();
return b.anchorNode.childNodes[b.anchorOffset]}if((b=f.doc.selection.createRange())&&b.item)return f.doc.selection.createRange().item(0)}return null},getParentElement:function(){if("control"==d._editor.selection.getType()){var b=this.getSelectedElement();if(b)return b.parentNode}else if(f.doc.getSelection){if(b=f.global.getSelection()){for(b=b.anchorNode;b&&1!=b.nodeType;)b=b.parentNode;return b}}else return b=f.doc.selection.createRange(),b.collapse(!0),b.parentElement();return null},hasAncestorElement:function(b){return null!=
this.getAncestorElement.apply(this,arguments)},getAncestorElement:function(b){return this.getParentOfType(this.getSelectedElement()||this.getParentElement(),arguments)},isTag:function(b,c){if(b&&b.tagName)for(var d=b.tagName.toLowerCase(),a=0;a<c.length;a++){var f=(""+c[a]).toLowerCase();if(d==f)return f}return""},getParentOfType:function(b,c){for(;b;){if(this.isTag(b,c).length)return b;b=b.parentNode}return null},collapse:function(b){if(f.doc.getSelection){var c=f.global.getSelection();c.removeAllRanges?
b?c.collapseToStart():c.collapseToEnd():c.collapse(b)}else c=f.doc.selection.createRange(),c.collapse(b),c.select()},remove:function(){var b=f.doc.selection;f.doc.getSelection?(b=f.global.getSelection(),b.deleteFromDocument()):"none"!=b.type.toLowerCase()&&b.clear();return b},selectElementChildren:function(b,c){var d=f.doc,b=k.byId(b);if(f.doc.getSelection){var a=f.global.getSelection();i("opera")?(d=a.rangeCount?a.getRangeAt(0):d.createRange(),d.setStart(b,0),d.setEnd(b,3==b.nodeType?b.length:b.childNodes.length),
a.addRange(d)):a.selectAllChildren(b)}else if(d=b.ownerDocument.body.createTextRange(),d.moveToElementText(b),!c)try{d.select()}catch(g){}},selectElement:function(b,c){var d,b=k.byId(b),a=b.ownerDocument,g=f.global;if(a.getSelection)g=g.getSelection(),d=a.createRange(),g.removeAllRanges&&(i("opera")&&g.getRangeAt(0)&&(d=g.getRangeAt(0)),d.selectNode(b),g.removeAllRanges(),g.addRange(d));else try{var j=b.tagName?b.tagName.toLowerCase():"";d="img"===j||"table"===j?f.body(a).createControlRange():f.body(a).createRange();
d.addElement(b);c||d.select()}catch(p){this.selectElementChildren(b,c)}},inSelection:function(b){if(b){var c,d=f.doc,a;if(f.doc.getSelection){var g=f.global.getSelection();g&&0<g.rangeCount&&(a=g.getRangeAt(0));if(a&&a.compareBoundaryPoints&&d.createRange)try{if(c=d.createRange(),c.setStart(b,0),1===a.compareBoundaryPoints(a.START_TO_END,c))return!0}catch(i){}}else{a=d.selection.createRange();try{(c=b.ownerDocument.body.createControlRange())&&c.addElement(b)}catch(j){try{c=b.ownerDocument.body.createTextRange(),
c.moveToElementText(b)}catch(k){}}if(a&&c&&1===a.compareEndPoints("EndToStart",c))return!0}}return!1}};j.setObject("dijit._editor.selection",b);return b})},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(k,j,i,f,d){d.range={};d.range.getIndex=function(b,d){for(var c=[],f=[],a=b,g,i;b!=d;){var j=0;for(g=b.parentNode;i=g.childNodes[j++];)if(i===b){--j;break}c.unshift(j);f.unshift(j-g.childNodes.length);
b=g}if(0<c.length&&3==a.nodeType){for(i=a.previousSibling;i&&3==i.nodeType;)c[c.length-1]--,i=i.previousSibling;for(i=a.nextSibling;i&&3==i.nodeType;)f[f.length-1]++,i=i.nextSibling}return{o:c,r:f}};d.range.getNode=function(b,d){if(!i.isArray(b)||0==b.length)return d;var c=d;k.every(b,function(b){if(0<=b&&b<c.childNodes.length)c=c.childNodes[b];else return c=null,!1;return!0});return c};d.range.getCommonAncestor=function(b,d,c){for(var c=c||b.ownerDocument.body,f=function(a){for(var b=[];a;)if(b.unshift(a),
a!==c)a=a.parentNode;else break;return b},b=f(b),d=f(d),f=Math.min(b.length,d.length),a=b[0],g=1;g<f;g++)if(b[g]===d[g])a=b[g];else break;return a};d.range.getAncestor=function(b,d,c){for(c=c||b.ownerDocument.body;b&&b!==c;){var f=b.nodeName.toUpperCase();if(d.test(f))return b;b=b.parentNode}return null};d.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;d.range.getBlockAncestor=function(b,e,c){for(var c=c||b.ownerDocument.body,e=e||d.range.BlockTagNames,f=null,a;b&&
b!==c;){var g=b.nodeName.toUpperCase();!f&&e.test(g)&&(f=b);!a&&/^(?:BODY|TD|TH|CAPTION)$/.test(g)&&(a=b);b=b.parentNode}return{blockNode:f,blockContainer:a||b.ownerDocument.body}};d.range.atBeginningOfContainer=function(b,d,c){var f=!1,a=0==c;!a&&3==d.nodeType&&/^[\s\xA0]+$/.test(d.nodeValue.substr(0,c))&&(a=!0);if(a)for(f=!0;d&&d!==b;){if(d.previousSibling){f=!1;break}d=d.parentNode}return f};d.range.atEndOfContainer=function(b,d,c){var f=!1,a=c==(d.length||d.childNodes.length);!a&&3==d.nodeType&&
/^[\s\xA0]+$/.test(d.nodeValue.substr(c))&&(a=!0);if(a)for(f=!0;d&&d!==b;){if(d.nextSibling){f=!1;break}d=d.parentNode}return f};d.range.adjacentNoneTextNode=function(b,d){for(var c=b,f=0-b.length||0,a=d?"nextSibling":"previousSibling";c&&!(3!=c.nodeType);){f+=c.length;c=c[a]}return[c,f]};d.range.create=function(b){b=b||window;return b.getSelection?b.document.createRange():new d.range.W3CRange};d.range.getSelection=function(b,e){if(b.getSelection)return b.getSelection();var c=new d.range.ie.selection(b);
e||c._getCurrentSelection();return c};if(!window.getSelection)d.range.ie={cachedSelection:{},selection:function(b){this._ranges=[];this.addRange=function(b,c){this._ranges.push(b);c||b._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(b){return this._ranges[b]};this._getCurrentSelection=function(){this.removeAllRanges();var e;e=b.document.selection.createRange();(e="CONTROL"==b.document.selection.type.toUpperCase()?
new d.range.W3CRange(d.range.ie.decomposeControlRange(e)):new d.range.W3CRange(d.range.ie.decomposeTextRange(e)))?(this.addRange(e,!0),this.isCollapsed=e.collapsed):this.isCollapsed=!0}},decomposeControlRange:function(b){var e=b.item(0),c=b.item(b.length-1),b=e.parentNode,f=c.parentNode,e=d.range.getIndex(e,b).o[0],c=d.range.getIndex(c,f).o[0]+1;return[b,e,f,c]},getEndPoint:function(b,e){var c=b.duplicate();c.collapse(!e);var f="EndTo"+(e?"End":"Start"),a=c.parentElement(),g,i,j;0<a.childNodes.length?
k.every(a.childNodes,function(e,k){var l;if(3!=e.nodeType)if(c.moveToElementText(e),0<c.compareEndPoints(f,b))if(j&&3==j.nodeType)g=j,l=!0;else return g=a,i=k,!1;else{if(k==a.childNodes.length-1)return g=a,i=a.childNodes.length,!1}else k==a.childNodes.length-1&&(g=e,l=!0);if(l&&g){g=(l=d.range.adjacentNoneTextNode(g)[0])?l.nextSibling:a.firstChild;var n=d.range.adjacentNoneTextNode(g);l=n[0];n=n[1];l?(c.moveToElementText(l),c.collapse(!1)):c.moveToElementText(a);c.setEndPoint(f,b);i=c.text.length-
n;return!1}j=e;return!0}):(g=a,i=0);if(!e&&1==g.nodeType&&i==g.childNodes.length){var l=g.nextSibling;l&&3==l.nodeType&&(g=l,i=0)}return[g,i]},setEndPoint:function(b,e,c){var b=b.duplicate(),f;if(3!=e.nodeType)if(0<c){if(f=e.childNodes[c-1])if(3==f.nodeType)e=f,c=f.length;else if(f.nextSibling&&3==f.nextSibling.nodeType)e=f.nextSibling,c=0;else{b.moveToElementText(f.nextSibling?f:e);var a=f.parentNode;f=a.insertBefore(f.ownerDocument.createTextNode(" "),f.nextSibling);b.collapse(!1);a.removeChild(f)}}else b.moveToElementText(e),
b.collapse(!0);3==e.nodeType&&(f=d.range.adjacentNoneTextNode(e),a=f[0],f=f[1],a?(b.moveToElementText(a),b.collapse(!1),"inherit"!=a.contentEditable&&f++):(b.moveToElementText(e.parentNode),b.collapse(!0),b.move("character",1),b.move("character",-1)),c+=f,0<c&&b.move("character",c)!=c&&console.error("Error when moving!"));return b},decomposeTextRange:function(b){var e=d.range.ie.getEndPoint(b),c=e[0],f=e[1],a=e[0],e=e[1];b.htmlText.length&&(b.htmlText==b.text?e=f+b.text.length:(e=d.range.ie.getEndPoint(b,
!0),a=e[0],e=e[1]));return[c,f,a,e]},setRange:function(b,e,c,f,a,g){e=d.range.ie.setEndPoint(b,e,c);b.setEndPoint("StartToStart",e);if(!g)var i=d.range.ie.setEndPoint(b,f,a);b.setEndPoint("EndToEnd",i||e);return b}},j("dijit.range.W3CRange",null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=
!0)},_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==this.endContainer?d.range.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(b,d){d=parseInt(d);if(!(this.startContainer===b&&this.startOffset==d))delete this._cachedBookmark,this.startContainer=b,this.startOffset=d,this.endContainer?this._updateInternal():this.setEnd(b,d)},setEnd:function(b,
d){d=parseInt(d);if(!(this.endContainer===b&&this.endOffset==d))delete this._cachedBookmark,this.endContainer=b,this.endOffset=d,this.startContainer?this._updateInternal():this.setStart(b,d)},setStartAfter:function(b,d){this._setPoint("setStart",b,d,1)},setStartBefore:function(b,d){this._setPoint("setStart",b,d,0)},setEndAfter:function(b,d){this._setPoint("setEnd",b,d,1)},setEndBefore:function(b,d){this._setPoint("setEnd",b,d,0)},_setPoint:function(b,e,c,f){c=d.range.getIndex(e,e.parentNode).o;this[b](e.parentNode,
c.pop()+f)},_getIERange:function(){var b=(this._body||this.endContainer.ownerDocument.body).createTextRange();d.range.ie.setRange(b,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return b},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var b=this.startContainer,d=this._getIERange();3===b.nodeType&&!this.startOffset&&this.setStartBefore(b);d.pasteHTML("");this.endContainer=
this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var b=new d.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);b._body=this._body;return b},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});return d.range})},"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang",
"dojo/sniff"],function(k,j,i){var f={};j.setObject("dijit._editor.html",f);var d=f.escapeXml=function(b,d){b=b.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");d||(b=b.replace(/'/gm,"&#39;"));return b};f.getNodeHtml=function(b){var d=[];f.getNodeHtmlHelper(b,d);return d.join("")};f.getNodeHtmlHelper=function(b,e){switch(b.nodeType){case 1:var c=b.nodeName.toLowerCase();if(!c||"/"==c.charAt(0))return"";e.push("<",c);var h=[],a={},g;if(i("dom-attributes-explicit")||
i("dom-attributes-specified-flag"))for(var j=0;g=b.attributes[j++];){var p=g.name;if("_dj"!==p.substr(0,3)&&(!i("dom-attributes-specified-flag")||g.specified)&&!(p in a)){g=g.value;if("src"==p||"href"==p)b.getAttribute("_djrealurl")&&(g=b.getAttribute("_djrealurl"));8===i("ie")&&"style"===p&&(g=g.replace("HEIGHT:","height:").replace("WIDTH:","width:"));h.push([p,g]);a[p]=g}}else{var l=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML,a=l.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi),l=l.substr(0,
l.indexOf(">"));k.forEach(a,function(a){if(a){var d=a.indexOf("=");if(0<d&&(a=a.substring(0,d),"_dj"!=a.substr(0,3)))if(("src"==a||"href"==a)&&b.getAttribute("_djrealurl"))h.push([a,b.getAttribute("_djrealurl")]);else{var e;switch(a){case "style":e=b.style.cssText.toLowerCase();break;case "class":e=b.className;break;case "width":if("img"===c){(d=/width=(\S+)/i.exec(l))&&(e=d[1]);break}case "height":if("img"===c){(d=/height=(\S+)/i.exec(l))&&(e=d[1]);break}default:e=b.getAttribute(a)}null!=e&&h.push([a,
e.toString()])}}},this)}h.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(a=0;g=h[a++];)e.push(" ",g[0],'="',"string"===typeof g[1]?d(g[1],!0):g[1],'"');switch(c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":e.push(" />");break;case "script":e.push(">",b.innerHTML,"</",c,">");break;default:e.push(">"),b.hasChildNodes()&&f.getChildrenHtmlHelper(b,e),e.push("</",c,">")}break;case 4:case 3:e.push(d(b.nodeValue,!0));break;case 8:e.push("<\!--",
d(b.nodeValue,!0),"--\>");break;default:e.push("<\!-- Element not recognized - Type: ",b.nodeType," Name: ",b.nodeName,"--\>")}};f.getChildrenHtml=function(b){var d=[];f.getChildrenHtmlHelper(b,d);return d.join("")};f.getChildrenHtmlHelper=function(b,d){if(b)for(var c=b.childNodes||b,h=!i("ie")||c!==b,a,g=0;a=c[g++];)(!h||a.parentNode==b)&&f.getNodeHtmlHelper(a,d)};return f})},"*now":function(k){k(['dojo/i18n!*preload*JBrowse/View/TrackList/nls/Faceted*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
define("JBrowse/View/TrackList/Faceted","dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dijit/layout/AccordionContainer,dijit/layout/ContentPane,JBrowse/Util,dojox/grid/EnhancedGrid,dojox/grid/enhanced/plugins/IndirectSelection".split(","),function(k,j,i,f,d,b,e){var c=b.dojof;return k("JBrowse.View.TrackList.Faceted",null,{constructor:function(b){this.browser=b.browser;this.tracksActive={};this.config=b;this._isSelectableFacet=this._coerceFilter(b.selectableFacetFilter||function(a,b){return 1<
b.getFacetStats(a).avgBucketSize&&!j.some(b.getLabelAttributes().concat(b.getIdentityAttributes()),function(b){return b==a})});this.displayColumns=b.displayColumns;this._isDisplayableColumn=this._coerceFilter(b.displayColumnFilter||function(a){return"label"!=a.toLowerCase()});this.trackDataStore=b.trackMetaData;this.browser.subscribe("/jbrowse/v1/c/tracks/show",i.hitch(this,"setTracksActive"));this.browser.subscribe("/jbrowse/v1/c/tracks/hide",i.hitch(this,"setTracksInactive"));this.browser.subscribe("/jbrowse/v1/c/tracks/delete",
i.hitch(this,"setTracksInactive"));this.renderInitial();this.trackDataStore.onReady(this,function(){this.renderSelectors();dojo.connect(this.dataGrid.selection,"onSelected",this,function(a){this._ifNotSuppressed("selectionEvents",function(){this._suppress("gridUpdate",function(){this.browser.publish("/jbrowse/v1/v/tracks/show",[this.dataGrid.getItem(a).conf])})})});dojo.connect(this.dataGrid.selection,"onDeselected",this,function(a){this._ifNotSuppressed("selectionEvents",function(){this._suppress("gridUpdate",
function(){this.browser.publish("/jbrowse/v1/v/tracks/hide",[this.dataGrid.getItem(a).conf])})})})});this.trackDataStore.onReady(this,"_updateFacetCounts");this.trackDataStore.onReady(this,"_updateMatchCount");dojo.connect(this.trackDataStore,"onFetchSuccess",this,"_updateGridSelections");dojo.connect(this.trackDataStore,"onFetchSuccess",this,"_updateMatchCount")},_coerceFilter:function(b){"string"==typeof b&&(b=[b]);dojo.isArray(b)&&(b=function(a,c){return j.some(b,function(a){return c==a})});return b},
_ifNotSuppressed:function(b,a){"string"==typeof b&&(b=[b]);if(!this.suppress)this.suppress={};return j.some(b,function(a){return this.suppress[a]},this)?void 0:a.call(this)},_suppress:function(b,a){"string"==typeof b&&(b=[b]);if(!this.suppress)this.suppress={};dojo.forEach(b,function(a){this.suppress[a]=!0},this);var c=a.call(this);dojo.forEach(b,function(a){this.suppress[a]=!1},this);return c},_suppressRecursion:function(b){var a=["method_"+b],c=this[b];return this._ifNotSuppressed(a,function(){this._suppress(a,
c)})},renderInitial:function(){this.containerElem=dojo.create("div",{id:"faceted_tracksel",style:{left:"-95%",width:"95%",zIndex:500}},document.body);dojo.create("div",{className:"faceted_tracksel_on_off tab",innerHTML:'<img src="'+this.browser.resolveUrl("img/left_arrow.png")+'"><div>Select<br>tracks</div>'},this.containerElem);this.mainContainer=new dijit.layout.BorderContainer({design:"headline",gutters:!1},dojo.create("div",{className:"mainContainer"},this.containerElem));this.topPane=new dijit.layout.ContentPane({region:"top",
id:"faceted_tracksel_top",content:'<div class="title">Select Tracks</div> <div class="topLink" style="cursor: help"><a title="Track selector help">Help</a></div>'});dojo.query('div.topLink a[title="Track selector help"]',this.topPane.domNode).forEach(function(a){var b=new dijit.Dialog({"class":"help_dialog",refocus:!1,draggable:!1,title:"Track Selection",content:'<div class="main"><p>The JBrowse Faceted Track Selector makes it easy to search through large numbers of available tracks to find exactly the ones you want. You can incrementally filter the track display to narrow it down to those your are interested in.  There are two types of filtering available, which can be used together: <b>filtering with data fields</b>, and free-form <b>filtering with text</b>.</p>  <dl><dt>Filtering with Data Fields</dt>  <dd>The left column of the display contains the available <b>data fields</b>.  Click on the data field name to expand it, and then select one or more values for that field.  This narrows the search to display only tracks that have one of those values for that field.  You can do this for any number of fields.<dd>  <dt>Filtering with Text</dt>  <dd>Type text in the "Contains text" box to filter for tracks whose data contains that text.  If you type multiple words, tracks are filtered such that they must contain all of those words, in any order.  Placing "quotation marks" around the text filters for tracks that contain that phrase exactly.  All text matching is case insensitive.</dd>  <dt>Activating Tracks</dt>  <dd>To activate and deactivate a track, click its check-box in the left-most column.  When the box contains a check mark, the track is activated.  You can also turn whole groups of tracks on and off using the check-box in the table heading.</dd>  </dl></div>'});
dojo.connect(a,"onclick",this,function(){b.show();return!1})},this);this.mainContainer.addChild(this.topPane);dojo.query(".faceted_tracksel_on_off").onclick(i.hitch(this,"toggle"));this.centerPane=new dijit.layout.BorderContainer({region:"center","class":"gridPane",gutters:!1});this.mainContainer.addChild(this.centerPane);var b=this.renderTextFilter();this.busyIndicator=dojo.create("div",{innerHTML:'<img src="'+this.browser.resolveUrl("img/spinner.gif")+'">',className:"busy_indicator"},this.containerElem);
this.centerPane.addChild(new dijit.layout.ContentPane({region:"top","class":"gridControls",content:[dojo.create("button",{className:"faceted_tracksel_on_off",innerHTML:'<img src="'+this.browser.resolveUrl("img/left_arrow.png")+'"> <div>Back to browser</div>',onclick:i.hitch(this,"hide")}),dojo.create("button",{className:"clear_filters",innerHTML:'<img src="'+this.browser.resolveUrl("img/red_x.png")+'"><div>Clear All Filters</div>',onclick:i.hitch(this,function(){this._clearTextFilterControl();this._clearAllFacetControls();
this._async(function(){this.updateQuery();this._updateFacetCounts()},this).call()})}),this.busyIndicator,b,dojo.create("div",{className:"matching_record_count"})]}))},renderSelectors:function(){var b=this.renderFacetSelectors();b.set("region","left");this.mainContainer.addChild(b);this.dataGrid=this.renderGrid();this.dataGrid.set("region","center");this.centerPane.addChild(this.dataGrid);this.mainContainer.startup()},_async:function(b,a){var c=this;return function(){var d=arguments,e=this;c._busy(!0);
window.setTimeout(function(){b.apply(a||e,d);c._busy(!1)},50)}},_busy:function(b){this.busyCount=Math.max(0,(this.busyCount||0)+(b?1:-1));0<this.busyCount?dojo.addClass(this.containerElem,"busy"):dojo.removeClass(this.containerElem,"busy")},renderGrid:function(){var b=dojo.filter(this.displayColumns||this.trackDataStore.getFacetNames(),i.hitch(this,"_isDisplayableColumn")),a=90/b.length,c=new e({id:"trackSelectGrid",store:this.trackDataStore,selectable:!0,escapeHTMLInData:"escapeHTMLInData"in this.config?
this.config.escapeHTMLInData:!1,noDataMessage:"No tracks match the filtering criteria.",structure:[dojo.map(b,function(b){b={name:"key"}[b.toLowerCase()]||b;return{name:this._facetDisplayName(b),field:b.toLowerCase(),width:a+"%"}},this)],plugins:{indirectSelection:{headerSelector:!0}}}),d=this.config.initialSortColumn||0;"string"==typeof d&&(d=j.indexOf(b,d));c.setSortIndex(d+1);this._monkeyPatchGrid(c);return c},_facetDisplayName:function(c){var a;if(!(a=this.renameFacets)){a=this.config.renameFacets;
var d={},e;for(e in a)d[e.toLowerCase()]=a[e];d.key=d.key||"Name";a=d}this.renameFacets=a;return this.renameFacets[c.toLowerCase()]||b.ucFirst(c.replace("_"," "))},_monkeyPatchGrid:function(b){b.onRowClick=function(){};var a=b.selection.selectRange;b.selection.selectRange=function(b,c){if(30<c-b)alert("Too many tracks selected, please select fewer than 30 tracks.");else return a.apply(this,arguments)}},renderTextFilter:function(b){this.textFilterLabel=dojo.create("label",{className:"textFilterControl",
innerHTML:"Contains text ",id:"tracklist_textfilter",style:{position:"relative"}},b);this.textFilterInput=dojo.create("input",{type:"text",size:40,disabled:!0,onkeypress:i.hitch(this,function(a){if(!(a.keyCode==dojo.keys.SHIFT||a.keyCode==dojo.keys.CTRL||a.keyCode==dojo.keys.ALT))this.textFilterTimeout&&window.clearTimeout(this.textFilterTimeout),this.textFilterTimeout=window.setTimeout(i.hitch(this,function(){this._updateTextFilterControl();this._async(function(){this.updateQuery();this._updateFacetCounts();
this.textFilterInput.focus()},this).call();this.textFilterInput.focus()}),500),this._updateTextFilterControl(),a.stopPropagation()})},this.textFilterLabel);this.textFilterClearButton=dojo.create("img",{src:this.browser.resolveUrl("img/red_x.png"),className:"text_filter_clear",onclick:i.hitch(this,function(){this._clearTextFilterControl();this._async(function(){this.updateQuery();this._updateFacetCounts()},this).call()}),style:{position:"absolute",right:"4px",top:"20%"}},this.textFilterLabel);return this.textFilterLabel},
_clearTextFilterControl:function(){this.textFilterInput.value="";this._updateTextFilterControl()},_updateTextFilterControl:function(){this.textFilterInput.value.length?dojo.addClass(this.textFilterLabel,"selected"):dojo.removeClass(this.textFilterLabel,"selected")},renderFacetSelectors:function(){var b=new f({style:"width: 200px"}),a=this.trackDataStore;this.facetSelectors={};var c=this._renderFacetSelector("My Tracks",["Currently Active","Recently Used"]);c.set("class","myTracks");b.addChild(c);
c=dojo.filter(this.config.selectableFacets||a.getFacetNames(),function(a){return this._isSelectableFacet(a,this.trackDataStore)},this);dojo.forEach(c,function(c){var d=a.getFacetValues(c).sort();d&&d.length&&(c=this._renderFacetSelector(c,d),b.addChild(c))},this);return b},_renderFacetSelector:function(b,a){var c=new d({title:'<span id="facet_title_'+b+'" class="facetTitle">'+this._facetDisplayName(b)+' <a class="clearFacet"><img src="'+this.browser.resolveUrl("img/red_x.png")+'" /></a></span>'}),
e=dojo.create("table",{className:"facetSelect"},c.containerNode);this.facetSelectors[b]=dojo.map(a,function(a){var c=this,d=dojo.create("tr",{className:"facetValue",innerHTML:'<td class="count"></td><td class="value">'+a+"</td>",onclick:function(){dojo.toggleClass(this,"selected");c._updateFacetControl(b);c._async(function(){c.updateQuery();c._updateFacetCounts(b)}).call()}},e);d.facetValue=a;return d},this);return c},_clearAllFacetControls:function(){dojo.forEach(c.keys(this.facetSelectors),function(b){this._clearFacetControl(b)},
this)},_clearFacetControl:function(b){dojo.forEach(this.facetSelectors[b]||[],function(a){dojo.removeClass(a,"selected")},this);this._updateFacetControl(b)},_updateFacetCounts:function(){dojo.forEach(c.keys(this.facetSelectors),function(c){if("My Tracks"!=c){var a=this.trackDataStore.getFacetCounts(c);dojo.forEach(this.facetSelectors[c]||[],function(c){dojo.query(".count",c).forEach(function(d){var e=a?a[c.facetValue]||0:0;d.innerHTML=b.addCommas(e);e?dojo.removeClass(c,"disabled"):dojo.addClass(c,
"disabled")},this)},this);this._updateFacetControl(c)}},this)},_updateFacetControl:function(b){var a=dojo.byId("facet_title_"+b);j.every(this.facetSelectors[b]||[],function(a){return dojo.hasClass(a,"disabled")},this)&&dojo.addClass(a,"disabled");if(j.some(this.facetSelectors[b]||[],function(a){return dojo.hasClass(a,"selected")},this)){var c=i.hitch(this,function(a){this._clearFacetControl(b);this._async(function(){this.updateQuery();this._updateFacetCounts(b)},this).call();a.stopPropagation()});
dojo.addClass(a.parentNode.parentNode,"activeFacet");dojo.query("> a",a).forEach(function(a){a.onclick=c},this).attr("title","clear selections")}else dojo.removeClass(a.parentNode.parentNode,"activeFacet"),dojo.query("> a",a).onclick(function(){return!1}).removeAttr("title")},updateQuery:function(){this._suppressRecursion("_updateQuery")},_updateQuery:function(){var d={},a=function(a){return dojo.hasClass(a,"selected")};(function(){var e=this.facetSelectors["My Tracks"],f={};dojo.forEach(e,function(a){f[a.facetValue]=
a});if(a(f["Currently Active"])){var i=c.keys(this.tracksActive||{});d.label=b.uniq((d.label||[]).concat(i))}if(a(f["Recently Used"]))i=dojo.map(this.browser.getRecentlyUsedTracks(),function(a){return a.label}),d.label=b.uniq((d.label||[]).concat(i));if((!d.label||!d.label.length)&&j.some(e,a))d.label=["FAKE LABEL THAT IS HIGHLY UNLIKELY TO EVER MATCH ANYTHING"]}).call(this);if(this.textFilterInput.value.length)d.text=this.textFilterInput.value;dojo.forEach(this.trackDataStore.getFacetNames(),function(b){var c=
this.facetSelectors[b];c&&(c=dojo.map(dojo.filter(c,a),function(a){return a.facetValue}),c.length&&(d[b]=c))},this);this.query=d;this.dataGrid.setQuery(this.query);this._updateMatchCount()},_updateMatchCount:function(){var d=this.dataGrid.store.getCount();dojo.query(".matching_record_count",this.containerElem).forEach(function(a){a.innerHTML=b.addCommas(d)+" "+(c.keys(this.query||{}).length?"matching ":"")+"track"+(1==d?"":"s")},this)},_updateGridSelections:function(){this._ifNotSuppressed("gridUpdate",
function(){this._suppress("selectionEvents",function(){this.dataGrid.selection.deselectAll();for(var b=0;b<Math.min(this.dataGrid.get("rowCount"),this.dataGrid.get("rowsPerPage"));b++){var a=this.dataGrid.getItem(b);a&&this.tracksActive[this.dataGrid.store.getIdentity(a)]&&this.dataGrid.rowSelectCell.toggleRow(b,!0)}})})},setTracksActive:function(b){dojo.forEach(b,function(a){this.tracksActive[a.label]=!0},this);this._updateGridSelections()},setTracksInactive:function(b){dojo.forEach(b,function(a){delete this.tracksActive[a.label]},
this);this._updateGridSelections()},show:function(){window.setTimeout(i.hitch(this,function(){this.textFilterInput.disabled=!1;this.textFilterInput.focus()}),300);dojo.addClass(this.containerElem,"active");dojo.animateProperty({node:this.containerElem,properties:{left:{start:-95,end:0,units:"%"}}}).play();this.shown=!0},hide:function(){dojo.removeClass(this.containerElem,"active");dojo.animateProperty({node:this.containerElem,properties:{left:{start:0,end:-95,units:"%"}}}).play();this.textFilterInput.blur();
this.textFilterInput.disabled=!0;this.shown=!1},toggle:function(){this.shown?this.hide():this.show()}})});