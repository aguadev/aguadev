<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style type="text/css">

	/* DOJO STYLES */
	@import "../../dojo/dojo/resources/dojo.css";

	/* THEMES */
	@import "../../dojo/dijit/themes/dijit.css";
	@import "../../dojo/dijit/themes/soria/soria.css";
	@import "../../dojo/dijit/themes/tundra/tundra.css";

</style>

<link rel="stylesheet" href="plugins/core/css/toolbar.css">

<title>t/workflow/workflow.execute.html </title>

<style type="text/css" title="text/css">
	@import "http://ajax.googleapis.com/ajax/libs/dojo/1.5/dijit/themes/claro/claro.css";
	@import "http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojox/form/resources/CheckedMultiSelect.css";	
</style>

<script type="text/javascript"
	src="../../builds/006-workflow-base/dojo/dojo/dojo.js"
	djConfig="parseOnLoad: true, isDebug: false, locale: ''"></script>	

<script type="text/javascript" src="../../builds/006-workflow-base/dojo/workflow.js"></script>

<!-- TO AVOID PROBLEMS WHEN LOADING -->
<script type="text/javascript" src="../../dojo/dijit/nls/en-us.js"></script>
<script type="text/javascript" src="../../dojo/dijit/nls/common.js"></script>
<script type="text/javascript">

	// SET CGI AND HTML URLS (RELATIVE TO dojo.js)
	var cgiUrl = "../../../../cgi-bin/agua/";
	var htmlUrl = "../../../../agua/";

	// REGISTER module path FOR PLUGINS
	dojo.registerModulePath("plugins","../../../../plugins");	

	//////// TEST ROBOT
	//////dojo.require("dijit.dijit");
	////////dojo.require("dojox.robot.recorder");
	////////dojo.require("dijit.robot");

	// GLOBAL Agua VARIABLE
	var Agua;
	dojo.addOnLoad(function(){

		console.log("agua.html    BEFORE require plugins.core.Agua");
		dojo.require("plugins.core.Agua");
		console.log("agua.html    AFTER  require plugins.core.Agua");

		console.log("agua.html    BEFORE Agua = new plugins.core.Agua()");
		Agua = new plugins.core.Agua( {
			cgiUrl : cgiUrl,
			htmlUrl : htmlUrl,
			database: "testuser1",
			dataUrl: "../../t/workflow/json/getData-execute.json"
		});
		console.log("agua.html    AFTER new plugins.core.Agua");

		console.log("agua.html    BEFORE Agua.loadPlugins");
		Agua.loadPlugins();
		console.log("agua.html    AFTER Agua.loadPlugins");

		var workflow = Agua.widgets["workflow"][0];
		console.log("agua.html    workflow: " + workflow);
		var runStatus = workflow.core.runStatus;
		console.log("agua.html    runStatus: " + runStatus);
		
		var runner = new Object;
		runner.project = "Project1";
		runner.workflow = "Workflow1";
		runner.number = 1;
		runner.childNodes = workflow.core.stages.dropTarget.getAllNodes();
		console.log("agua.html    runner: " + runner);

		console.log("agua.html    BEFORE runStatus.startRun");
		runStatus.startRun(runner);
		console.log("agua.html    AFTER runStatus.startRun");
		
	//	console.log("agua.html    Doing second dojo.addOnLoad");
	//
	//	doh.register('dojox.robot.AutoGeneratedTestGroup',{
	//		name: 'autotest0',
	//		timeout: 20750,
	//		runTest: function(){
	//			
	//			console.log("workflow.html    autotest0    BEFORE d = new doh.Deferred()");
	//			// NB: doh.robot._mouseMove(x, y, absolute, duration);
	//			 var d = new doh.Deferred();
	//			console.log("workflow.html    autotest0    BEFORE moves")
	//			 doh.robot.mouseMove(470, 226, 696, 100, true);
	//			console.log("workflow.html    autotest0    AFTER FIRST mouseMove")
	//			 doh.robot.mouseMove(549, 220, 907, 100, true);
	//			
	//			 doh.robot.mouseMoveAt(function(){ return document.getElementsByTagName('TD')[123]; }, 138, 100, 45, 14);
	//			console.log("workflow.html    autotest0    AFTER FIRST mouseMoveAt")
	//			 doh.robot.mouseClick({left:true, middle:false, right:false}, 1);
	//			console.log("workflow.html    autotest0    AFTER FIRST mouseClick")
	//			 doh.robot.mouseMove(647, 254, 647, 100, true);
	//			 doh.robot.mouseMoveAt(function(){ return document.getElementsByTagName('TD')[128]; }, 212, 100, 17, 18);
	//			 doh.robot.mouseClick({left:true, middle:false, right:false}, 1);
	//			 doh.robot.scrollIntoView('plugins_files__GroupDragPane_0', 11);
	//			 doh.robot.scrollIntoView('plugins_files__GroupDragPane_1', 1);
	//			 doh.robot.scrollIntoView('plugins_files__GroupDragPane_2', 1);
	//			 doh.robot.scrollIntoView('plugins_files__GroupDragPane_3', 1);
	//			
	//			console.log("workflow.html    autotest0    AFTER scrollIntoView")
	//			
	//			 doh.robot.mouseMove(199, 206, 7018, 100, true);
	//			 doh.robot.mouseMoveAt('dojoUnique23', 1608, 100, 74, 10);
	//			 doh.robot.mouseClick({left:true, middle:false, right:false}, 1);
	//			 doh.robot.scrollIntoView('plugins_files__GroupDragPane_4', 9);
	//			 doh.robot.scrollIntoView('plugins_files__GroupDragPane_4', 5247);
	//			 doh.robot.mouseMove(385, 35, 3467, 100, true);
	//			 doh.robot.mouseMove(383, 41, 1005, 100, true);
	//			 doh.robot.mouseMoveAt('dojoUnique12_underlay', 34, 100, 383, 41);
	//			 doh.robot.mouseClick({left:true, middle:false, right:false}, 1);
	//			
	//			console.log("workflow.html    autotest0    AFTER moves")
	//			
	//			 doh.robot.sequence(function(){
	//				  if( 1 ) {
	//					   console.log("workflow.html    autotest0    Before d.callback(true)")
	//					   d.callback(true);
	//				  }
	//				  else
	//				  {
	//					   d.errback(new Error('workflow.html    autotest0    Error'));
	//				  }
	//			 }, 1000);
	//			 return d;
	//		}
	//   });
	//
	//	doh.run();


		
	}); // FIRST dojo.addOnLoad

	
</script>

</head>
<!--<body class="claro">-->
<body class="agua tundra claro">

	<div id="attachPoint" ></div>

</body>
</html>
